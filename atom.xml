<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lvzhh&#39;s Blog</title>
  
  <subtitle>a memo</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://lvzhh.github.io/"/>
  <updated>2018-06-18T02:48:24.459Z</updated>
  <id>http://lvzhh.github.io/</id>
  
  <author>
    <name>Lvzhh</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>UVA 1572 Self-Assembly</title>
    <link href="http://lvzhh.github.io/2018/06/UVA-1572-Self-Assembly/"/>
    <id>http://lvzhh.github.io/2018/06/UVA-1572-Self-Assembly/</id>
    <published>2018-06-18T01:55:44.000Z</published>
    <updated>2018-06-18T02:48:24.459Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šç»™nä¸ªæ­£æ–¹å½¢åˆ†å­ï¼Œåˆ†å­çš„è¾¹åœ¨ä¸€å®šæ¡ä»¶ä¸‹å¯ä»¥ç»“åˆï¼Œæ±‚è¿™äº›åˆ†å­èƒ½ä¸èƒ½å½¢æˆæ— ç©·å¤§çš„ç»“æ„ã€‚</p><p>æˆ‘ä»¬ä»åˆ†å­çš„æŸæ¡è¾¹å¼€å§‹é“ºï¼Œå‡è®¾ä»ä¸‹å›¾ä¸­çš„è¾¹K+å¼€å§‹é“ºã€‚K+ä¸K-ç›¸ç»“åˆï¼Œå†ä¸‹ä¸€æ­¥ï¼Œå¯ä»¥ä»C-ã€D+ã€D+è¾¹é“ºã€‚å‡è®¾D+ä¸D-ç›¸ç»“åˆåï¼Œç»“åˆçš„åˆ†å­æœ‰ä¸€æ¡è¾¹ä¸ºK+ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å¯ä»¥ä»æ­¤K+è¾¹å¼€å§‹ã€‚é—®é¢˜åˆå›åˆ°äº†èµ·ç‚¹ï¼ŒæŒ‰ç…§ä¸ä¹‹å‰ç›¸åŒçš„é€‰æ‹©ï¼Œå¯ä»¥ä¸æ–­é‡å¤è€Œç»„åˆæˆæ— ç©·å¤§çš„ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä»æŸæ¡è¾¹å¼€å§‹ï¼Œä¸æ–­åœ°é“ºï¼Œèƒ½å¤Ÿåˆ°è¾¾ä¸€æ¡è·Ÿå®ƒæœ‰ç›¸åŒæ ‡å·çš„è¾¹ï¼Œé‚£ä¹ˆèƒ½å¤Ÿå½¢æˆæ— ç©·å¤§çš„ç»“æ„ï¼›å¦åˆ™ï¼Œä¸èƒ½å¤Ÿå½¢æˆã€‚<br><img src="/2018/06/UVA-1572-Self-Assembly/10.png"></p><p>è€ƒè™‘ä»¥å›¾æ¥å»ºæ¨¡ï¼ŒæŠŠæ ‡å·ä½œä¸ºç»“ç‚¹ï¼Œç»“ç‚¹çš„æ•°ç›®æœ€å¤šæœ‰26*2ä¸ªï¼ˆä¸è€ƒè™‘00ï¼Œå› ä¸º00ä¸å¯èƒ½åœ¨æœ‰å‘åœˆä¸Šï¼‰ã€‚å‡è®¾æ­£æ–¹å½¢çš„å››æ¡è¾¹çš„æ ‡å·åˆ†åˆ«ä¸ºabcdï¼Œè®°dual(a)è¡¨ç¤ºå¯ä»¥å’Œæ ‡å·aç›¸ç»“åˆçš„æ ‡å·ï¼ˆå¦‚K+å’ŒK-å¯ä»¥ç»“åˆï¼‰ï¼Œé‚£ä¹ˆdual(a)å¯ä»¥åˆ°è¾¾bï¼Œdual(b)å¯ä»¥åˆ°è¾¾aâ€¦ã€‚é—®é¢˜è½¬åŒ–ä¸ºäº†æ‰¾æœ‰å‘å›¾ä¸­æ˜¯å¦å­˜åœ¨æœ‰å‘åœˆï¼Œç”¨æ‹“æ‰‘æ’åºå¯ä»¥åšã€‚</p><p>PSï¼šæŠŠdualå‡½æ•°ä¿®æ”¹äº†åä»50msåˆ°äº†40msï¼Œrank top äº†â€¦<br><a id="more"></a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dual</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (v &amp; <span class="number">1</span>) ? v - <span class="number">1</span> : v + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dual</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v ^= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> V = <span class="number">26</span> * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ID00 = <span class="number">26</span> * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">15</span>];</span><br><span class="line"><span class="keyword">int</span> id[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">bool</span> G[V][V];</span><br><span class="line"><span class="keyword">int</span> c[V];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">  c[v] = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">0</span>; u &lt; V; u++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!G[v][u]) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">if</span> (c[u] == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c[u] == <span class="number">0</span> &amp;&amp; !dfs(u)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  c[v] = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">memset</span>(c, <span class="number">0</span>, <span class="keyword">sizeof</span>(c));</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">0</span>; v &lt; V; v++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (c[v] == <span class="number">0</span> &amp;&amp; !dfs(v)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dual</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v ^= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF) &#123;</span><br><span class="line">    <span class="built_in">memset</span>(G, <span class="number">0</span>, <span class="keyword">sizeof</span>(G));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">8</span>; j += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[j] == <span class="string">'0'</span>) id[j / <span class="number">2</span>] = <span class="number">26</span> * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">else</span> id[j / <span class="number">2</span>] = (s[j] - <span class="string">'A'</span>) * <span class="number">2</span> + (s[j + <span class="number">1</span>] == <span class="string">'+'</span> ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[j] == ID00) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">int</span> u = dual(id[j]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">          <span class="keyword">if</span> (k == j || id[k] == ID00) <span class="keyword">continue</span>;</span><br><span class="line">          G[u][id[k]] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, solve() ? <span class="string">"bounded"</span> : <span class="string">"unbounded"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šç»™nä¸ªæ­£æ–¹å½¢åˆ†å­ï¼Œåˆ†å­çš„è¾¹åœ¨ä¸€å®šæ¡ä»¶ä¸‹å¯ä»¥ç»“åˆï¼Œæ±‚è¿™äº›åˆ†å­èƒ½ä¸èƒ½å½¢æˆæ— ç©·å¤§çš„ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»åˆ†å­çš„æŸæ¡è¾¹å¼€å§‹é“ºï¼Œå‡è®¾ä»ä¸‹å›¾ä¸­çš„è¾¹K+å¼€å§‹é“ºã€‚K+ä¸K-ç›¸ç»“åˆï¼Œå†ä¸‹ä¸€æ­¥ï¼Œå¯ä»¥ä»C-ã€D+ã€D+è¾¹é“ºã€‚å‡è®¾D+ä¸D-ç›¸ç»“åˆåï¼Œç»“åˆçš„åˆ†å­æœ‰ä¸€æ¡è¾¹ä¸ºK+ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å¯ä»¥ä»æ­¤K+è¾¹å¼€å§‹ã€‚é—®é¢˜åˆå›åˆ°äº†èµ·ç‚¹ï¼ŒæŒ‰ç…§ä¸ä¹‹å‰ç›¸åŒçš„é€‰æ‹©ï¼Œå¯ä»¥ä¸æ–­é‡å¤è€Œç»„åˆæˆæ— ç©·å¤§çš„ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä»æŸæ¡è¾¹å¼€å§‹ï¼Œä¸æ–­åœ°é“ºï¼Œèƒ½å¤Ÿåˆ°è¾¾ä¸€æ¡è·Ÿå®ƒæœ‰ç›¸åŒæ ‡å·çš„è¾¹ï¼Œé‚£ä¹ˆèƒ½å¤Ÿå½¢æˆæ— ç©·å¤§çš„ç»“æ„ï¼›å¦åˆ™ï¼Œä¸èƒ½å¤Ÿå½¢æˆã€‚&lt;br&gt;
&lt;img src=&quot;/2018/06/UVA-1572-Self-Assembly/10.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä»¥å›¾æ¥å»ºæ¨¡ï¼ŒæŠŠæ ‡å·ä½œä¸ºç»“ç‚¹ï¼Œç»“ç‚¹çš„æ•°ç›®æœ€å¤šæœ‰26*2ä¸ªï¼ˆä¸è€ƒè™‘00ï¼Œå› ä¸º00ä¸å¯èƒ½åœ¨æœ‰å‘åœˆä¸Šï¼‰ã€‚å‡è®¾æ­£æ–¹å½¢çš„å››æ¡è¾¹çš„æ ‡å·åˆ†åˆ«ä¸ºabcdï¼Œè®°dual(a)è¡¨ç¤ºå¯ä»¥å’Œæ ‡å·aç›¸ç»“åˆçš„æ ‡å·ï¼ˆå¦‚K+å’ŒK-å¯ä»¥ç»“åˆï¼‰ï¼Œé‚£ä¹ˆdual(a)å¯ä»¥åˆ°è¾¾bï¼Œdual(b)å¯ä»¥åˆ°è¾¾aâ€¦ã€‚é—®é¢˜è½¬åŒ–ä¸ºäº†æ‰¾æœ‰å‘å›¾ä¸­æ˜¯å¦å­˜åœ¨æœ‰å‘åœˆï¼Œç”¨æ‹“æ‰‘æ’åºå¯ä»¥åšã€‚&lt;/p&gt;
&lt;p&gt;PSï¼šæŠŠdualå‡½æ•°ä¿®æ”¹äº†åä»50msåˆ°äº†40msï¼Œrank top äº†â€¦&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å›¾è®º" scheme="http://lvzhh.github.io/categories/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="æ‹“æ‰‘æ’åº" scheme="http://lvzhh.github.io/categories/%E5%9B%BE%E8%AE%BA/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
      <category term="WF" scheme="http://lvzhh.github.io/tags/WF/"/>
    
  </entry>
  
  <entry>
    <title>UVA 1599 Ideal Path</title>
    <link href="http://lvzhh.github.io/2018/06/UVA-1599-Ideal-Path/"/>
    <id>http://lvzhh.github.io/2018/06/UVA-1599-Ideal-Path/</id>
    <published>2018-06-17T15:45:38.000Z</published>
    <updated>2018-06-18T02:48:00.769Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šç»™å®šä¸€ä¸ªnä¸ªé¡¶ç‚¹mæ¡è¾¹çš„æ— å‘å›¾ï¼Œå›¾ä¸­å¯èƒ½æœ‰å¤šé‡è¾¹å’Œè‡ªç¯ã€‚æ±‚é¡¶ç‚¹1åˆ°é¡¶ç‚¹næœ€å°‘éœ€è¦ç»è¿‡çš„è¾¹æ•°ï¼Œå¹¶ä¸”è¾“å‡ºå­—å…¸åºæœ€å°çš„è¾¹çš„é¢œè‰²åºåˆ—ã€‚</p><p>ä»é¡¶ç‚¹1åˆ°é¡¶ç‚¹nçš„æœ€å°‘è¾¹æ•°å¯ä»¥é€šè¿‡BFSæ±‚å¾—ï¼Œå…³é”®æ˜¯å­—å…¸åºæœ€å°çš„é¢œè‰²åºåˆ—ã€‚æƒ³åˆ°çš„åšæ³•æ˜¯ï¼Œ<strong>ä»é¡¶ç‚¹nåˆ°é¡¶ç‚¹1</strong>è¿›è¡ŒBFSï¼Œå¾—åˆ°æ¯ä¸ªé¡¶ç‚¹ä¸é¡¶ç‚¹nçš„è·ç¦»ã€‚ä¹‹åï¼Œæƒ³è±¡æŒ‰ç…§è·ç¦»æŠŠå›¾åˆ†å±‚ï¼Œç„¶åä»é¡¶ç‚¹1å¼€å§‹ï¼Œæ¯å¾€ä¸‹èµ°ä¸€å±‚ï¼Œéƒ½é€‰æ‹©é¢œè‰²å€¼æœ€å°çš„è¾¹ã€‚</p><p>è‹¥æ˜¯<strong>ä»é¡¶ç‚¹1åˆ°é¡¶ç‚¹n</strong>è¿›è¡ŒBFSï¼Œä¹‹åå†æŒ‰ç…§åˆ°é¡¶ç‚¹1çš„è·ç¦»åˆ†å±‚ï¼Œåœ¨å¾€ä¸‹ä¸€å±‚èµ°æ—¶ï¼Œå‡è®¾æŸæ¡è¾¹e(u,v)çš„é¢œè‰²å€¼æœ€å°ï¼Œæˆ‘ä»¬é€‰æ‹©äº†è¾¹eï¼Œä½†æ˜¯é¡¶ç‚¹våˆ°é¡¶ç‚¹nå¯èƒ½éœ€è¦ï¼ˆæ¯”æœ€å°‘è¾¹æ•°ï¼‰æ›´å¤šçš„è¾¹æ•°ï¼</p><p>ä¸€ä¸ªå‘ï¼šå› ä¸ºå›¾ä¸­å­˜åœ¨å¤šé‡è¾¹ï¼Œå‡è®¾æˆ‘ä»¬ä»é¡¶ç‚¹uå¾€ä¸‹ä¸€å±‚èµ°æ—¶ï¼Œé€‰æ‹©çš„æœ€å°é¢œè‰²å€¼ä¸è¾¹e(u,v)ç›¸åŒï¼Œä¸”æœ‰3000æ¡é¢œè‰²å€¼ç›¸åŒçš„è¾¹e(u,v)ï¼Œé‚£ä¹ˆç»“ç‚¹vè¦å…¥é˜Ÿï¼ˆè¿™é‡Œä½¿ç”¨é˜Ÿåˆ—ç»´æŠ¤ï¼‰3000æ¬¡ï¼å› æ­¤ï¼Œéœ€è¦ä¿è¯å…¥é˜Ÿä¸€æ¬¡ï¼Œä¸ç„¶ç©ºé—´å’Œæ—¶é—´éƒ½ä¼šçˆ†ç‚¸<span class="github-emoji" title="smile" data-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png?v8">ğŸ˜„</span>ã€‚<br><a id="more"></a><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_V = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = ~<span class="number">0U</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span> <span class="keyword">int</span> to, c; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="built_in">vector</span>&lt;Edge&gt; G[MAX_V];</span><br><span class="line"><span class="keyword">int</span> dist[MAX_V], prevv[MAX_V], color[MAX_V];</span><br><span class="line"><span class="keyword">bool</span> inque[MAX_V];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rbfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) dist[i] = INF;</span><br><span class="line">  <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; que;</span><br><span class="line">  dist[n] = <span class="number">0</span>;</span><br><span class="line">  que.push(n);</span><br><span class="line">  <span class="keyword">while</span> (!que.empty()) &#123;</span><br><span class="line">    <span class="keyword">int</span> v = que.front(); que.pop();</span><br><span class="line">    <span class="keyword">if</span> (v == <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) &#123;</span><br><span class="line">      Edge&amp; e = G[v][i];</span><br><span class="line">      <span class="keyword">int</span> u = e.to;</span><br><span class="line">      <span class="keyword">if</span> (dist[v] + <span class="number">1</span> &lt; dist[u]) &#123;</span><br><span class="line">        dist[u] = dist[v] + <span class="number">1</span>;</span><br><span class="line">        que.push(u);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; que;</span><br><span class="line">  que.push(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">int</span> level = dist[<span class="number">1</span>];</span><br><span class="line">  <span class="built_in">memset</span>(inque, <span class="number">0</span>, <span class="keyword">sizeof</span>(inque));</span><br><span class="line">  inque[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">while</span> (level--) &#123;</span><br><span class="line">    <span class="keyword">int</span> size = que.size();</span><br><span class="line">    <span class="keyword">int</span> cmin = INF;</span><br><span class="line">    <span class="keyword">while</span> (size--) &#123;</span><br><span class="line">      <span class="keyword">int</span> v = que.front();</span><br><span class="line">      que.pop(); que.push(v);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) &#123;</span><br><span class="line">        Edge&amp; e = G[v][i];</span><br><span class="line">        <span class="keyword">int</span> u = e.to;</span><br><span class="line">        <span class="keyword">if</span> (dist[u] != dist[v] - <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">        cmin = min(cmin, e.c);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    size = que.size();</span><br><span class="line">    <span class="keyword">while</span> (size--) &#123;</span><br><span class="line">      <span class="keyword">int</span> v = que.front(); que.pop();</span><br><span class="line">      inque[v] = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) &#123;</span><br><span class="line">        Edge&amp; e = G[v][i];</span><br><span class="line">        <span class="keyword">int</span> u = e.to;</span><br><span class="line">        <span class="keyword">if</span> (dist[u] != dist[v] - <span class="number">1</span> || e.c != cmin || inque[u]) <span class="keyword">continue</span>;</span><br><span class="line">        que.push(u);</span><br><span class="line">        prevv[u] = v;</span><br><span class="line">        color[u] = e.c;</span><br><span class="line">        inque[u] = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m) != EOF) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) G[i].clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> a, b, c;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">      G[a].push_back((Edge) &#123;b, c&#125;);</span><br><span class="line">      G[b].push_back((Edge) &#123;a, c&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    rbfs();</span><br><span class="line">    solve();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dist[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v = n; v != <span class="number">1</span>; v = prevv[v]) &#123;</span><br><span class="line">      ans.push_back(color[v]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = ans.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, ans[i], i == <span class="number">0</span> ? <span class="string">'\n'</span> : <span class="string">' '</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šç»™å®šä¸€ä¸ªnä¸ªé¡¶ç‚¹mæ¡è¾¹çš„æ— å‘å›¾ï¼Œå›¾ä¸­å¯èƒ½æœ‰å¤šé‡è¾¹å’Œè‡ªç¯ã€‚æ±‚é¡¶ç‚¹1åˆ°é¡¶ç‚¹næœ€å°‘éœ€è¦ç»è¿‡çš„è¾¹æ•°ï¼Œå¹¶ä¸”è¾“å‡ºå­—å…¸åºæœ€å°çš„è¾¹çš„é¢œè‰²åºåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;ä»é¡¶ç‚¹1åˆ°é¡¶ç‚¹nçš„æœ€å°‘è¾¹æ•°å¯ä»¥é€šè¿‡BFSæ±‚å¾—ï¼Œå…³é”®æ˜¯å­—å…¸åºæœ€å°çš„é¢œè‰²åºåˆ—ã€‚æƒ³åˆ°çš„åšæ³•æ˜¯ï¼Œ&lt;strong&gt;ä»é¡¶ç‚¹nåˆ°é¡¶ç‚¹1&lt;/strong&gt;è¿›è¡ŒBFSï¼Œå¾—åˆ°æ¯ä¸ªé¡¶ç‚¹ä¸é¡¶ç‚¹nçš„è·ç¦»ã€‚ä¹‹åï¼Œæƒ³è±¡æŒ‰ç…§è·ç¦»æŠŠå›¾åˆ†å±‚ï¼Œç„¶åä»é¡¶ç‚¹1å¼€å§‹ï¼Œæ¯å¾€ä¸‹èµ°ä¸€å±‚ï¼Œéƒ½é€‰æ‹©é¢œè‰²å€¼æœ€å°çš„è¾¹ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥æ˜¯&lt;strong&gt;ä»é¡¶ç‚¹1åˆ°é¡¶ç‚¹n&lt;/strong&gt;è¿›è¡ŒBFSï¼Œä¹‹åå†æŒ‰ç…§åˆ°é¡¶ç‚¹1çš„è·ç¦»åˆ†å±‚ï¼Œåœ¨å¾€ä¸‹ä¸€å±‚èµ°æ—¶ï¼Œå‡è®¾æŸæ¡è¾¹e(u,v)çš„é¢œè‰²å€¼æœ€å°ï¼Œæˆ‘ä»¬é€‰æ‹©äº†è¾¹eï¼Œä½†æ˜¯é¡¶ç‚¹våˆ°é¡¶ç‚¹nå¯èƒ½éœ€è¦ï¼ˆæ¯”æœ€å°‘è¾¹æ•°ï¼‰æ›´å¤šçš„è¾¹æ•°ï¼&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå‘ï¼šå› ä¸ºå›¾ä¸­å­˜åœ¨å¤šé‡è¾¹ï¼Œå‡è®¾æˆ‘ä»¬ä»é¡¶ç‚¹uå¾€ä¸‹ä¸€å±‚èµ°æ—¶ï¼Œé€‰æ‹©çš„æœ€å°é¢œè‰²å€¼ä¸è¾¹e(u,v)ç›¸åŒï¼Œä¸”æœ‰3000æ¡é¢œè‰²å€¼ç›¸åŒçš„è¾¹e(u,v)ï¼Œé‚£ä¹ˆç»“ç‚¹vè¦å…¥é˜Ÿï¼ˆè¿™é‡Œä½¿ç”¨é˜Ÿåˆ—ç»´æŠ¤ï¼‰3000æ¬¡ï¼å› æ­¤ï¼Œéœ€è¦ä¿è¯å…¥é˜Ÿä¸€æ¬¡ï¼Œä¸ç„¶ç©ºé—´å’Œæ—¶é—´éƒ½ä¼šçˆ†ç‚¸&lt;span class=&quot;github-emoji&quot; title=&quot;smile&quot; data-src=&quot;https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png?v8&quot;&gt;ğŸ˜„&lt;/span&gt;ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœç´¢" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/"/>
    
      <category term="BFS" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/BFS/"/>
    
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
  </entry>
  
  <entry>
    <title>UVA 12171 Sculpture</title>
    <link href="http://lvzhh.github.io/2018/06/UVA-12171-Sculpture/"/>
    <id>http://lvzhh.github.io/2018/06/UVA-12171-Sculpture/</id>
    <published>2018-06-16T12:03:08.000Z</published>
    <updated>2018-06-18T02:52:58.037Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šç»™å®šnä¸ªé•¿æ–¹ä½“ï¼Œæ±‚è¿™äº›é•¿æ–¹ä½“ç»„åˆæˆçš„ç‰©ä½“çš„è¡¨é¢ç§¯å’Œä½“ç§¯ã€‚æƒ³è±¡ç»„åˆåçš„å‡ ä½•ä½“å®Œå…¨æµ¸æ³¡åœ¨æ°´ä¸­ï¼Œæ‰€æ±‚çš„å³ä¸ºå‡ ä½•ä½“ä¸æ°´æ¥è§¦çš„é¢ç§¯ä»¥åŠæ‰€å æ®çš„ä½“ç§¯ã€‚</p><p>å¯ä»¥è€ƒè™‘åœ¨åæ ‡ç³»ä¸­ä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹å¡«å……å‡ ä½•ä½“ï¼Œç„¶åDFSæ ‡è®°å‡ºâ€œæ°´åŒºåŸŸâ€ã€‚è¿™æ ·ï¼Œä¸â€œæ°´åŒºåŸŸâ€æ¥è§¦çš„å‡ ä½•ä½“çš„é¢ç§¯å³ä¸ºæ‰€æ±‚çš„è¡¨é¢ç§¯ï¼Œéâ€œæ°´åŒºåŸŸâ€çš„ä½“ç§¯å³ä¸ºæ‰€æ±‚çš„ä½“ç§¯ã€‚å› ä¸ºæ‰€ç»™çš„åæ ‡èŒƒå›´æ¯”è¾ƒå¤§ï¼Œä½†nçš„èŒƒå›´æ¯”è¾ƒå°ï¼Œéœ€è¦å¯¹åæ ‡è¿›è¡Œç¦»æ•£åŒ–å¤„ç†ã€‚</p><p>ç¦»æ•£åŒ–çš„ä¸€äº›ç»†èŠ‚ï¼šè‹¥æ‰€ç»™åŒºé—´ä¸º<code>[x,y]</code>ï¼Œ<code>S</code>ä¸ºæ‰€æœ‰åæ ‡ç‚¹æ’åºåçš„æ•°ç»„ï¼Œè€ƒè™‘ä¸‹é¢ä¸¤ç§ï¼š<br><a id="more"></a></p><ol type="1"><li>ç¦»æ•£åŒºé—´<code>[x,y+1)</code>ï¼Œå†™ä¸º<code>[x,z)</code>ï¼Œ<code>S</code>ä¸­åŒ…å«çš„ä¸ºæ‰€æœ‰çš„<code>x</code>å’Œ<code>z</code>ã€‚è€ƒè™‘ä¸¤ä¸ªåŒºé—´<code>[1,5),[6,11)</code>ï¼Œå¡«å……ä¹‹åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç¦»æ•£åæ ‡<code>i</code>æ‰€è¡¨ç¤ºçš„åŒºé—´é•¿åº¦ä¸º<code>S[i+1]-S[i]</code>ï¼Œä¸”ä¸¤ä¸ªåŒºé—´ä¸­é—´çš„éƒ¨åˆ†<code>[5,6)</code>èƒ½å¤Ÿè¡¨ç¤ºä¸ºæœªå¡«å……çš„çŠ¶æ€ã€‚<br><img src="/2018/06/UVA-12171-Sculpture/10.png" alt="å›¾1"></li><li>ç¦»æ•£åŒºé—´<code>[x,y]</code>ï¼Œ<code>S</code>ä¸­åŒ…å«çš„ä¸ºæ‰€æœ‰çš„<code>x</code>å’Œ<code>y</code>ã€‚è€ƒè™‘ç›¸åŒçš„ä¸¤ä¸ªåŒºé—´<code>[1,4],[6,10]</code>ï¼Œå¡«å……ä¹‹åå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç¦»æ•£åæ ‡<code>i</code>æ‰€è¡¨ç¤ºçš„åŒºé—´é•¿åº¦ä¸èƒ½ç»Ÿä¸€è¡¨ç¤ºï¼Œéœ€è¦å¢åŠ ä¸€äº›é¢å¤–çš„åæ ‡ç‚¹æ¥å¤„ç†ã€‚ä¸”ä¸¤ä¸ªåŒºé—´ä¸­é—´çš„éƒ¨åˆ†<code>[5,5]</code>ä¸èƒ½è¡¨ç¤ºå‡ºçŠ¶æ€ï¼Œä¹Ÿéœ€è¦å¢åŠ ä¸€äº›é¢å¤–çš„åæ ‡ç‚¹æ¥å¤„ç†ã€‚<br><img src="/2018/06/UVA-12171-Sculpture/11.png"></li></ol><p>é€‰ç”¨ç¬¬ä¸€ç§ç¦»æ•£åŒ–çš„åšæ³•ï¼Œæ·»åŠ 0åæ ‡ä½¿â€æ°´åŒºåŸŸâ€œè¿é€šã€‚ç©ºé—´åæ ‡<span class="math inline">\((i,j,k)\)</span>æ‰€è¡¨ç¤ºçš„ä½“ç§¯ä¸º<span class="math inline">\((X[i+1]-X[i])*(Y[i+1]-Y[i])*(Z[i+1]-Z[i])\)</span>ã€‚</p><p>ä¹Ÿè®°ä¸€ä¸‹ç¬¬äºŒç§ç¦»æ•£åšæ³•é‡åˆ°çš„é”™è¯¯ã€‚line 99 <code>X[sx++] = X[t] + 1;</code>ï¼Œæœ€åˆå†™çš„æ˜¯<code>X[sx++] = X[sx - 2] + 1</code>ï¼Œæ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„ç»“æœï¼Œä¸”ä½¿å¾—line 22 çš„<code>assert</code>ä¸æˆç«‹ã€‚æ²¡æœ‰æ‰¾åˆ°åŸå› ï¼Œå¯èƒ½æ˜¯ç¼–è¯‘çš„é—®é¢˜ï¼Œå¯¼è‡´æ•°ç»„ä¸‹æ ‡ä¸æ˜¯æ‰€æƒ³è¡¨ç¤ºçš„ä¸‹æ ‡ï¼Ÿ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_X = MAX_N * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Box</span> &#123;</span> <span class="keyword">int</span> x0, y0, z0, x, y, z; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">Box S[MAX_N];</span><br><span class="line"><span class="keyword">int</span> X[MAX_X], Y[MAX_X], Z[MAX_X], sx, sy, sz;</span><br><span class="line"><span class="keyword">bool</span> space[MAX_X][MAX_X][MAX_X];</span><br><span class="line"><span class="keyword">int</span> cmp[MAX_X][MAX_X][MAX_X];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fill</span><span class="params">(<span class="keyword">int</span> x0, <span class="keyword">int</span> y0, <span class="keyword">int</span> z0, <span class="keyword">int</span> x1, <span class="keyword">int</span> y1, <span class="keyword">int</span> z1)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> x = x0; x &lt; x1; x++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> y = y0; y &lt; y1; y++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> z = z0; z &lt; z1; z++) &#123;</span><br><span class="line">        space[x][y][z] = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dz[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span> </span>&#123;</span><br><span class="line">  cmp[x][y][z] = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> nx = x + dx[i], ny = y + dy[i], nz = z + dz[i];</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> &lt;= nx &amp;&amp; nx &lt; sx &amp;&amp; <span class="number">0</span> &lt;= ny &amp;&amp; ny &lt; sy &amp;&amp;</span><br><span class="line">        <span class="number">0</span> &lt;= nz &amp;&amp; nz &lt; sz &amp;&amp; !space[nx][ny][nz] &amp;&amp; cmp[nx][ny][nz] == <span class="number">0</span>) &#123;</span><br><span class="line">      dfs(nx, ny, nz);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sx; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sy; j++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; sz; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp[i][j][k]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">0</span>; m &lt; <span class="number">6</span>; m++) &#123;</span><br><span class="line">          <span class="keyword">int</span> x = i + dx[m], y = j + dy[m], z = k + dz[m];</span><br><span class="line">          <span class="keyword">if</span> (cmp[x][y][z]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dx[m]) s += (Y[j + <span class="number">1</span>] - Y[j]) * (Z[k + <span class="number">1</span>] - Z[k]);</span><br><span class="line">            <span class="keyword">if</span> (dy[m]) s += (X[i + <span class="number">1</span>] - X[i]) * (Z[k + <span class="number">1</span>] - Z[k]);</span><br><span class="line">            <span class="keyword">if</span> (dz[m]) s += (X[i + <span class="number">1</span>] - X[i]) * (Y[j + <span class="number">1</span>] - Y[j]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">volume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sx; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sy; j++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; sz; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp[i][j][k]) <span class="keyword">continue</span>;</span><br><span class="line">        s += (X[i + <span class="number">1</span>] - X[i]) * (Y[j + <span class="number">1</span>] - Y[j]) * (Z[k + <span class="number">1</span>] - Z[k]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">discrete</span><span class="params">(<span class="keyword">int</span>* X, <span class="keyword">int</span>&amp; sx)</span> </span>&#123;</span><br><span class="line">  X[sx++] = <span class="number">0</span>;</span><br><span class="line">  sort(X, X + sx);</span><br><span class="line">  <span class="keyword">if</span> (sx != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; sx; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (X[i] != X[i - <span class="number">1</span>]) X[m++] = X[i];</span><br><span class="line">    &#125;</span><br><span class="line">    sx = m;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">  <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      Box&amp; b = S[i];</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %d %d"</span>, &amp;b.x0, &amp;b.y0, &amp;b.z0, &amp;b.x, &amp;b.y, &amp;b.z);</span><br><span class="line">    &#125;</span><br><span class="line">    sx = sy = sz = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      Box&amp; b = S[i];</span><br><span class="line">      X[sx++] = b.x0; X[sx++] = b.x0 + b.x;</span><br><span class="line">      Y[sy++] = b.y0; Y[sy++] = b.y0 + b.y;</span><br><span class="line">      Z[sz++] = b.z0; Z[sz++] = b.z0 + b.z;</span><br><span class="line">    &#125;</span><br><span class="line">    discrete(X, sx);</span><br><span class="line">    discrete(Y, sy);</span><br><span class="line">    discrete(Z, sz);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(space, <span class="number">0</span>, <span class="keyword">sizeof</span>(space));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      Box&amp; b = S[i];</span><br><span class="line">      <span class="keyword">int</span> x0 = lower_bound(X, X + sx, b.x0) - X;</span><br><span class="line">      <span class="keyword">int</span> y0 = lower_bound(Y, Y + sy, b.y0) - Y;</span><br><span class="line">      <span class="keyword">int</span> z0 = lower_bound(Z, Z + sz, b.z0) - Z;</span><br><span class="line">      <span class="keyword">int</span> x1 = lower_bound(X, X + sx, b.x0 + b.x) - X;</span><br><span class="line">      <span class="keyword">int</span> y1 = lower_bound(Y, Y + sy, b.y0 + b.y) - Y;</span><br><span class="line">      <span class="keyword">int</span> z1 = lower_bound(Z, Z + sz, b.z0 + b.z) - Z;</span><br><span class="line">      fill(x0, y0, z0, x1, y1, z1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(cmp, <span class="number">0</span>, <span class="keyword">sizeof</span>(cmp));</span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, area(), volume());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_X = MAX_N * <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Box</span> &#123;</span> <span class="keyword">int</span> x0, y0, z0, x, y, z; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">Box S[MAX_N];</span><br><span class="line"><span class="keyword">int</span> X[MAX_X], Y[MAX_X], Z[MAX_X], sx, sy, sz;</span><br><span class="line"><span class="keyword">bool</span> space[MAX_X][MAX_X][MAX_X];</span><br><span class="line"><span class="keyword">int</span> cmp[MAX_X][MAX_X][MAX_X];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fill</span><span class="params">(<span class="keyword">int</span> x0, <span class="keyword">int</span> y0, <span class="keyword">int</span> z0, <span class="keyword">int</span> x1, <span class="keyword">int</span> y1, <span class="keyword">int</span> z1)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> x = x0; x &lt;= x1; x++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> y = y0; y &lt;= y1; y++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> z = z0; z &lt;= z1; z++) &#123;</span><br><span class="line">        space[x][y][z] = <span class="literal">true</span>;</span><br><span class="line">        assert(x &gt;= <span class="number">1</span> &amp;&amp; y &gt;= <span class="number">1</span> &amp;&amp; z &gt;= <span class="number">1</span>);</span><br><span class="line">        assert(x &lt;= sx - <span class="number">2</span> &amp;&amp; y &lt;= sy - <span class="number">2</span> &amp;&amp; z &lt;= sz - <span class="number">2</span>);</span><br><span class="line"><span class="comment">//        assert(x &gt;= 1 &amp;&amp; x &lt;= sx - 1 &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= sy - 1 &amp;&amp; z &gt;= 1 &amp;&amp; z &lt;= sz - 1);</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dz[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span> </span>&#123;</span><br><span class="line">  cmp[x][y][z] = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> nx = x + dx[i], ny = y + dy[i], nz = z + dz[i];</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> &lt;= nx &amp;&amp; nx &lt; sx &amp;&amp; <span class="number">0</span> &lt;= ny &amp;&amp; ny &lt; sy &amp;&amp;</span><br><span class="line">        <span class="number">0</span> &lt;= nz &amp;&amp; nz &lt; sz &amp;&amp; !space[nx][ny][nz] &amp;&amp; cmp[nx][ny][nz] == <span class="number">0</span>) &#123;</span><br><span class="line">      dfs(nx, ny, nz);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sx; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sy; j++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; sz; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp[i][j][k]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">0</span>; m &lt; <span class="number">6</span>; m++) &#123;</span><br><span class="line">          <span class="keyword">int</span> x = i + dx[m], y = j + dy[m], z = k + dz[m];</span><br><span class="line">          <span class="keyword">if</span> (cmp[x][y][z]) &#123;</span><br><span class="line"><span class="comment">//            assert(i + 1 &lt; sx);</span></span><br><span class="line"><span class="comment">//            assert(j + 1 &lt; sy);</span></span><br><span class="line"><span class="comment">//            assert(k + 1 &lt; sz);</span></span><br><span class="line">            <span class="keyword">if</span> (dx[m]) s += (Y[j + <span class="number">1</span>] - Y[j]) * (Z[k + <span class="number">1</span>] - Z[k]);</span><br><span class="line">            <span class="keyword">if</span> (dy[m]) s += (X[i + <span class="number">1</span>] - X[i]) * (Z[k + <span class="number">1</span>] - Z[k]);</span><br><span class="line">            <span class="keyword">if</span> (dz[m]) s += (X[i + <span class="number">1</span>] - X[i]) * (Y[j + <span class="number">1</span>] - Y[j]);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">volume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sx; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sy; j++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; sz; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp[i][j][k]) <span class="keyword">continue</span>;</span><br><span class="line"><span class="comment">//        assert(i + 1 &lt; sx);</span></span><br><span class="line"><span class="comment">//        assert(j + 1 &lt; sy);</span></span><br><span class="line"><span class="comment">//        assert(k + 1 &lt; sz);</span></span><br><span class="line">        s += (X[i + <span class="number">1</span>] - X[i]) * (Y[j + <span class="number">1</span>] - Y[j]) * (Z[k + <span class="number">1</span>] - Z[k]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">discrete</span><span class="params">(<span class="keyword">int</span>* X, <span class="keyword">int</span>&amp; sx)</span> </span>&#123;</span><br><span class="line">  X[sx++] = <span class="number">0</span>;</span><br><span class="line">  sort(X, X + sx);</span><br><span class="line">  <span class="keyword">if</span> (sx != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; sx; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (X[i] != X[i - <span class="number">1</span>]) X[m++] = X[i];</span><br><span class="line">    &#125;</span><br><span class="line">    sx = m;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = sx - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">if</span> (X[i + <span class="number">1</span>] != X[i] + <span class="number">1</span>) X[sx++] = X[i] + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  sort(X, X + sx);</span><br><span class="line">  <span class="keyword">int</span> t = sx - <span class="number">1</span>;</span><br><span class="line">  assert(sx &gt;= <span class="number">1</span>);</span><br><span class="line">  X[sx++] = X[t] + <span class="number">1</span>; <span class="comment">// adding a boundary, for convenience</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">  <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      Box&amp; b = S[i];</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %d %d"</span>, &amp;b.x0, &amp;b.y0, &amp;b.z0, &amp;b.x, &amp;b.y, &amp;b.z);</span><br><span class="line">    &#125;</span><br><span class="line">    sx = sy = sz = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      Box&amp; b = S[i];</span><br><span class="line">      X[sx++] = b.x0; X[sx++] = b.x0 + b.x - <span class="number">1</span>;</span><br><span class="line">      Y[sy++] = b.y0; Y[sy++] = b.y0 + b.y - <span class="number">1</span>;</span><br><span class="line">      Z[sz++] = b.z0; Z[sz++] = b.z0 + b.z - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    discrete(X, sx);</span><br><span class="line">    discrete(Y, sy);</span><br><span class="line">    discrete(Z, sz);</span><br><span class="line"></span><br><span class="line"><span class="comment">//    for (int i = 0; i &lt; sx; i++) cout &lt;&lt; X[i] &lt;&lt; ' '; cout &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//    for (int i = 0; i &lt; sy; i++) cout &lt;&lt; Y[i] &lt;&lt; ' '; cout &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//    for (int i = 0; i &lt; sz; i++) cout &lt;&lt; Z[i] &lt;&lt; ' '; cout &lt;&lt; endl;</span></span><br><span class="line">    <span class="built_in">memset</span>(space, <span class="number">0</span>, <span class="keyword">sizeof</span>(space));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      Box&amp; b = S[i];</span><br><span class="line">      <span class="keyword">int</span> x0 = lower_bound(X, X + sx, b.x0) - X;</span><br><span class="line">      <span class="keyword">int</span> y0 = lower_bound(Y, Y + sy, b.y0) - Y;</span><br><span class="line">      <span class="keyword">int</span> z0 = lower_bound(Z, Z + sz, b.z0) - Z;</span><br><span class="line">      <span class="keyword">int</span> x1 = lower_bound(X, X + sx, b.x0 + b.x - <span class="number">1</span>) - X;</span><br><span class="line">      <span class="keyword">int</span> y1 = lower_bound(Y, Y + sy, b.y0 + b.y - <span class="number">1</span>) - Y;</span><br><span class="line">      <span class="keyword">int</span> z1 = lower_bound(Z, Z + sz, b.z0 + b.z - <span class="number">1</span>) - Z;</span><br><span class="line"><span class="comment">//      printf("%d %d %d %d %d %d\n", x0, y0, z0, x1, y1, z1);</span></span><br><span class="line">      fill(x0, y0, z0, x1, y1, z1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(cmp, <span class="number">0</span>, <span class="keyword">sizeof</span>(cmp));</span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, area(), volume());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šç»™å®šnä¸ªé•¿æ–¹ä½“ï¼Œæ±‚è¿™äº›é•¿æ–¹ä½“ç»„åˆæˆçš„ç‰©ä½“çš„è¡¨é¢ç§¯å’Œä½“ç§¯ã€‚æƒ³è±¡ç»„åˆåçš„å‡ ä½•ä½“å®Œå…¨æµ¸æ³¡åœ¨æ°´ä¸­ï¼Œæ‰€æ±‚çš„å³ä¸ºå‡ ä½•ä½“ä¸æ°´æ¥è§¦çš„é¢ç§¯ä»¥åŠæ‰€å æ®çš„ä½“ç§¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥è€ƒè™‘åœ¨åæ ‡ç³»ä¸­ä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹å¡«å……å‡ ä½•ä½“ï¼Œç„¶åDFSæ ‡è®°å‡ºâ€œæ°´åŒºåŸŸâ€ã€‚è¿™æ ·ï¼Œä¸â€œæ°´åŒºåŸŸâ€æ¥è§¦çš„å‡ ä½•ä½“çš„é¢ç§¯å³ä¸ºæ‰€æ±‚çš„è¡¨é¢ç§¯ï¼Œéâ€œæ°´åŒºåŸŸâ€çš„ä½“ç§¯å³ä¸ºæ‰€æ±‚çš„ä½“ç§¯ã€‚å› ä¸ºæ‰€ç»™çš„åæ ‡èŒƒå›´æ¯”è¾ƒå¤§ï¼Œä½†nçš„èŒƒå›´æ¯”è¾ƒå°ï¼Œéœ€è¦å¯¹åæ ‡è¿›è¡Œç¦»æ•£åŒ–å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ç¦»æ•£åŒ–çš„ä¸€äº›ç»†èŠ‚ï¼šè‹¥æ‰€ç»™åŒºé—´ä¸º&lt;code&gt;[x,y]&lt;/code&gt;ï¼Œ&lt;code&gt;S&lt;/code&gt;ä¸ºæ‰€æœ‰åæ ‡ç‚¹æ’åºåçš„æ•°ç»„ï¼Œè€ƒè™‘ä¸‹é¢ä¸¤ç§ï¼š&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœç´¢" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/"/>
    
      <category term="DFS" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/DFS/"/>
    
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
  </entry>
  
  <entry>
    <title>UVA 10305 Ordering Tasks</title>
    <link href="http://lvzhh.github.io/2018/06/UVA-10305-Ordering-Tasks/"/>
    <id>http://lvzhh.github.io/2018/06/UVA-10305-Ordering-Tasks/</id>
    <published>2018-06-14T14:40:55.000Z</published>
    <updated>2018-06-14T15:16:19.838Z</updated>
    
    <content type="html"><![CDATA[<p>æ‹“æ‰‘æ’åºçš„æ¨¡æ¿é¢˜ï¼Œä¸»è¦æ˜¯æ¥å­¦ä¹ ä¸€ä¸‹ç”¨DFSæ¥åˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼Œä»¥åŠè¾“å‡ºæ‹“æ‰‘æ’åºçš„åºåˆ—ã€‚ç”¨DFSè¿›è¡Œæ‹“æ‰‘æ’åºéœ€è¦å€ŸåŠ©ä¸€ä¸ªæ ‡è®°<code>c[v]</code>ï¼Œ<code>c[v]=0</code>è¡¨ç¤ºå›¾ä¸­çš„ç»“ç‚¹æœªè¢«è®¿é—®è¿‡ï¼Œ<code>c[v]=1</code>è¡¨ç¤ºæ­£åœ¨è®¿é—®ç»“ç‚¹ï¼ˆåŠå…¶åç»§ï¼‰ï¼Œ<code>c[v]=2</code>è¡¨ç¤ºç»“ç‚¹è®¿é—®å®Œæˆã€‚ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶ä»–æœ‰ç›¸åŒå«ä¹‰çš„ä¸åŒçš„æ•°å€¼ã€‚ï¼‰</p><p>æœ‰å‘å›¾ä¸­å­˜åœ¨ç¯ï¼Œå½“ä¸”ä»…å½“è®¿é—®åˆ°ä¸€ä¸ªç»“ç‚¹<code>v</code>æœ‰<code>c[v]=1</code>ã€‚è¯ï¼šè®¾å½“å‰æ­£åœ¨è®¿é—®ç»“ç‚¹<code>u</code>ï¼Œå…¶ç›´æ¥åç»§<code>v</code>æ»¡è¶³<code>c[v]=1</code>ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ä¸€æ¡ä»<code>v</code>åˆ°<code>u</code>çš„è·¯å¾„ï¼Œåˆå­˜åœ¨æœ‰å‘è¾¹<code>(u,v)</code>ï¼Œåˆ™å›¾ä¸­å­˜åœ¨ç¯ã€‚è‹¥<code>c[v]!=1</code>ï¼Œé‚£ä¹ˆä¸å­˜åœ¨ä»<code>v</code>åˆ°<code>u</code>çš„è·¯å¾„ï¼Œä¹Ÿå°±æ²¡æœ‰ç¯ã€‚</p><p>å¦ä¸€ç§æ¯”è¾ƒç†Ÿæ‚‰çš„åšæ³•æ˜¯ä¸æ–­ä»å›¾ä¸­åˆ å»å…¥åº¦ä¸º0çš„ç»“ç‚¹ï¼Œå¹¶æŠŠå…¶åŠ å…¥æ‹“æ‰‘åºåˆ—ã€‚å¦‚æœå›¾ä¸­å‰©ä½™çš„æ‰€æœ‰ç»“ç‚¹éƒ½ä¸æ»¡è¶³å…¥åº¦ä¸º0ï¼Œåˆ™è¯´æ˜å›¾ä¸­å­˜åœ¨ç¯ã€‚<br><a id="more"></a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_V = <span class="number">100</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[MAX_V];</span><br><span class="line"><span class="keyword">int</span> c[MAX_V];</span><br><span class="line"><span class="keyword">int</span> seq[MAX_V], idx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">  c[v] = <span class="number">1</span>; <span class="comment">// accessing</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> u = G[v][i];</span><br><span class="line">    <span class="keyword">if</span> (c[u] == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c[u] == <span class="number">0</span> &amp;&amp; !dfs(u)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  c[v] = <span class="number">2</span>; <span class="comment">// accessed</span></span><br><span class="line">  seq[idx--] = v; <span class="comment">// v should be before all its successor</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">toposort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">memset</span>(c, <span class="number">0</span>, <span class="keyword">sizeof</span>(c));</span><br><span class="line">  idx = n - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= n; v++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (c[v] == <span class="number">0</span> &amp;&amp; !dfs(v))</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m) &amp;&amp; (n || m)) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= n; v++) G[v].clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> u, v;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;u, &amp;v);</span><br><span class="line">      G[u].push_back(v);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (toposort()) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, seq[i], i == n - <span class="number">1</span> ? <span class="string">'\n'</span> : <span class="string">' '</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_V = <span class="number">100</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[MAX_V];</span><br><span class="line"><span class="keyword">int</span> indeg[MAX_V];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m) &amp;&amp; (n || m)) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= n; v++) G[v].clear();</span><br><span class="line">    <span class="built_in">memset</span>(indeg, <span class="number">0</span>, <span class="keyword">sizeof</span>(indeg));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> u, v;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;u, &amp;v);</span><br><span class="line">      G[u].push_back(v);</span><br><span class="line">      indeg[v]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; que;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= n; v++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (indeg[v] == <span class="number">0</span>) que.push(v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">while</span> (!que.empty()) &#123;</span><br><span class="line">      <span class="keyword">int</span> v = que.front(); que.pop();</span><br><span class="line">      ans.push_back(v);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = G[v][i];</span><br><span class="line">        indeg[u]--;</span><br><span class="line">        <span class="keyword">if</span> (indeg[u] == <span class="number">0</span>) que.push(u);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.size(); i++) &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, ans[i], i == ans.size() - <span class="number">1</span> ? <span class="string">'\n'</span> : <span class="string">' '</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‹“æ‰‘æ’åºçš„æ¨¡æ¿é¢˜ï¼Œä¸»è¦æ˜¯æ¥å­¦ä¹ ä¸€ä¸‹ç”¨DFSæ¥åˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼Œä»¥åŠè¾“å‡ºæ‹“æ‰‘æ’åºçš„åºåˆ—ã€‚ç”¨DFSè¿›è¡Œæ‹“æ‰‘æ’åºéœ€è¦å€ŸåŠ©ä¸€ä¸ªæ ‡è®°&lt;code&gt;c[v]&lt;/code&gt;ï¼Œ&lt;code&gt;c[v]=0&lt;/code&gt;è¡¨ç¤ºå›¾ä¸­çš„ç»“ç‚¹æœªè¢«è®¿é—®è¿‡ï¼Œ&lt;code&gt;c[v]=1&lt;/code&gt;è¡¨ç¤ºæ­£åœ¨è®¿é—®ç»“ç‚¹ï¼ˆåŠå…¶åç»§ï¼‰ï¼Œ&lt;code&gt;c[v]=2&lt;/code&gt;è¡¨ç¤ºç»“ç‚¹è®¿é—®å®Œæˆã€‚ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶ä»–æœ‰ç›¸åŒå«ä¹‰çš„ä¸åŒçš„æ•°å€¼ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;æœ‰å‘å›¾ä¸­å­˜åœ¨ç¯ï¼Œå½“ä¸”ä»…å½“è®¿é—®åˆ°ä¸€ä¸ªç»“ç‚¹&lt;code&gt;v&lt;/code&gt;æœ‰&lt;code&gt;c[v]=1&lt;/code&gt;ã€‚è¯ï¼šè®¾å½“å‰æ­£åœ¨è®¿é—®ç»“ç‚¹&lt;code&gt;u&lt;/code&gt;ï¼Œå…¶ç›´æ¥åç»§&lt;code&gt;v&lt;/code&gt;æ»¡è¶³&lt;code&gt;c[v]=1&lt;/code&gt;ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ä¸€æ¡ä»&lt;code&gt;v&lt;/code&gt;åˆ°&lt;code&gt;u&lt;/code&gt;çš„è·¯å¾„ï¼Œåˆå­˜åœ¨æœ‰å‘è¾¹&lt;code&gt;(u,v)&lt;/code&gt;ï¼Œåˆ™å›¾ä¸­å­˜åœ¨ç¯ã€‚è‹¥&lt;code&gt;c[v]!=1&lt;/code&gt;ï¼Œé‚£ä¹ˆä¸å­˜åœ¨ä»&lt;code&gt;v&lt;/code&gt;åˆ°&lt;code&gt;u&lt;/code&gt;çš„è·¯å¾„ï¼Œä¹Ÿå°±æ²¡æœ‰ç¯ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§æ¯”è¾ƒç†Ÿæ‚‰çš„åšæ³•æ˜¯ä¸æ–­ä»å›¾ä¸­åˆ å»å…¥åº¦ä¸º0çš„ç»“ç‚¹ï¼Œå¹¶æŠŠå…¶åŠ å…¥æ‹“æ‰‘åºåˆ—ã€‚å¦‚æœå›¾ä¸­å‰©ä½™çš„æ‰€æœ‰ç»“ç‚¹éƒ½ä¸æ»¡è¶³å…¥åº¦ä¸º0ï¼Œåˆ™è¯´æ˜å›¾ä¸­å­˜åœ¨ç¯ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å›¾è®º" scheme="http://lvzhh.github.io/categories/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="æ‹“æ‰‘æ’åº" scheme="http://lvzhh.github.io/categories/%E5%9B%BE%E8%AE%BA/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="template" scheme="http://lvzhh.github.io/tags/template/"/>
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
  </entry>
  
  <entry>
    <title>UVA 1103 Ancient Messages</title>
    <link href="http://lvzhh.github.io/2018/06/UVA-1103-Ancient-Messages/"/>
    <id>http://lvzhh.github.io/2018/06/UVA-1103-Ancient-Messages/</id>
    <published>2018-06-14T09:47:17.000Z</published>
    <updated>2018-06-14T11:15:57.596Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šç»™å®šä¸€ä¸ªé»‘ç™½å›¾ç‰‡çš„16è¿›åˆ¶è¡¨ç¤ºï¼Œè¯†åˆ«å‡ºå›¾ç‰‡ä¸­åŒ…å«çš„è±¡å½¢æ–‡å­—ã€‚</p><p>é¦–å…ˆéœ€è¦æŠŠåå…­è¿›åˆ¶è¡¨ç¤ºè½¬åŒ–ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºã€‚å› ä¸ºæ¯ä¸ªè±¡å½¢æ–‡å­—çš„é»‘è‰²åƒç´ æ˜¯è¿é€šçš„ï¼Œæ‰€ä»¥é»‘è‰²åƒç´ çš„è¿é€šåˆ†é‡çš„æ•°ç›®å³ä¸ºè±¡å½¢æ–‡å­—çš„æ•°ç›®ã€‚å„è±¡å½¢æ–‡å­—å¯ä»¥ç”¨å…¶åŒ…å«çš„ç™½è‰²åŒºåŸŸçš„æ•°ç›®æ¥åŒºåˆ«ã€‚æƒ³åˆ°çš„åšæ³•æ˜¯ï¼Œdfså¡«å……ç™½è‰²åƒç´ åŒºåŸŸï¼Œå¹¶è¿”å›åŒºåŸŸçš„è¾¹ç•Œï¼š0 è¡¨ç¤ºæ²¡æœ‰è¾¹ç•Œï¼ˆè¾¹ç•Œéƒ½æ˜¯ç™½è‰²åƒç´ ï¼‰ï¼Œ1,2,3â€¦ è¡¨ç¤ºè¾¹ç•Œæ˜¯å¯¹åº”çš„é»‘è‰²è¿é€šåˆ†é‡ï¼Œ-1 è¡¨ç¤ºè¾¹ç•Œæ˜¯æ•´ä¸ªå›¾åƒçš„è¾¹ç•Œã€‚è‹¥è¾¹ç•Œæ˜¯é»‘è‰²åƒç´ ï¼Œåˆ™å¯¹åº”çš„é»‘è‰²è¿é€šåˆ†é‡åŒ…å«çš„ç™½è‰²åŒºåŸŸæ•°+1ã€‚è¿™æ ·ï¼Œå³å¯åŒºåˆ†å‡ºä¸åŒçš„è±¡å½¢æ–‡å­—ã€‚</p><p>ä¸€ä¸ªæƒ³é”™çš„åœ°æ–¹æ˜¯ï¼Œè®¤ä¸ºè¿”å›çš„åŒºåŸŸè¾¹ç•Œä¸ä¼šä¸º0ã€‚æƒ³è±¡è¿™æ ·ä¸€ç§æƒ…å†µï¼Œä¸€ä¸ªç™½è‰²åƒç´ å…¶å‘¨å›´çš„ä¸‰ä¸ªç™½è‰²åƒç´ éƒ½å·²ç»éå†åˆ°ï¼Œåˆ™è¿”å›0ã€‚è€Œè¿™ç§æƒ…å†µæ˜¯æœ‰å¯èƒ½çš„ã€‚</p><p>ç´«ä¹¦ä¸­çš„åšæ³•æ˜¯å¢åŠ äº†ç™½è‰²è¾¹ç•Œï¼Œæ–¹ä¾¿å¤„ç†ï¼›ä»é»‘è‰²åŒºåŸŸæ‰¾ä¸å…¶ç›¸è¿çš„ç™½è‰²åŒºåŸŸã€‚<br><a id="more"></a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_H = <span class="number">200</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_W = <span class="number">50</span> * <span class="number">4</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> H, W;</span><br><span class="line"><span class="keyword">char</span> image[MAX_H][MAX_W];</span><br><span class="line"><span class="keyword">int</span> cmp[MAX_H][MAX_W];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">to_int</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">'0'</span> &lt;= ch &amp;&amp; ch &lt;= <span class="string">'9'</span>) <span class="keyword">return</span> ch - <span class="string">'0'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">10</span> + ch - <span class="string">'a'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dX[] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, dY[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">  cmp[x][y] = c;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> nx = x + dX[i], ny = y + dY[i];</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> &lt;= nx &amp;&amp; nx &lt; H &amp;&amp; <span class="number">0</span> &lt;= ny &amp;&amp; ny &lt; W &amp;&amp;</span><br><span class="line">        image[nx][ny] == <span class="string">'1'</span> &amp;&amp; cmp[nx][ny] == <span class="number">0</span>) &#123;</span><br><span class="line">      dfs(nx, ny, c);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fill</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">  cmp[x][y] = c;</span><br><span class="line">  <span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> nx = x + dX[i], ny = y + dY[i];</span><br><span class="line">    <span class="keyword">if</span> (nx &lt; <span class="number">0</span> || nx &gt;= H || ny &lt; <span class="number">0</span> || ny &gt;= W) &#123;</span><br><span class="line">      b = <span class="number">-1</span>;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (image[nx][ny] == <span class="string">'1'</span>) &#123;</span><br><span class="line">      b = b == <span class="number">-1</span> ? b : cmp[nx][ny];</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cmp[nx][ny] == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">int</span> r = fill(nx, ny, c);</span><br><span class="line">      <span class="comment">// order 0 &lt; 1,2,3... &lt; -1</span></span><br><span class="line">      b = r == <span class="number">-1</span> ? r : (b == <span class="number">-1</span> ? b : max(b, r));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> b; <span class="comment">// b maybe 0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;H, &amp;W) &amp;&amp; H) &#123;</span><br><span class="line">    <span class="built_in">memset</span>(image, <span class="number">0</span>, <span class="keyword">sizeof</span>(image));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%s"</span>, image[i]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = W - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">          <span class="keyword">int</span> t = to_int(image[i][j]);</span><br><span class="line">          image[i][(j + <span class="number">1</span>) * <span class="number">4</span> - <span class="number">1</span> - k] = ((t &gt;&gt; k) &amp; <span class="number">1</span>) ? <span class="string">'1'</span> : <span class="string">'0'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    W = W * <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(cmp, <span class="number">0</span>, <span class="keyword">sizeof</span>(cmp));</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (image[i][j] == <span class="string">'1'</span> &amp;&amp; cmp[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">          dfs(i, j, ++num);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; area(num + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (image[i][j] == <span class="string">'0'</span> &amp;&amp; cmp[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">int</span> b = fill(i, j, ++num);</span><br><span class="line">          <span class="keyword">if</span> (b != <span class="number">-1</span>) area[b]++;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; ans;</span><br><span class="line">    <span class="keyword">char</span> mp[] = &#123;<span class="string">'W'</span>, <span class="string">'A'</span>, <span class="string">'K'</span>, <span class="string">'J'</span>, <span class="string">'S'</span>, <span class="string">'D'</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; area.size(); i++) &#123;</span><br><span class="line">      ans.push_back(mp[area[i]]);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(ans.begin(), ans.end());</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Case %d: "</span>, T++);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.size(); i++) &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%c"</span>, ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šç»™å®šä¸€ä¸ªé»‘ç™½å›¾ç‰‡çš„16è¿›åˆ¶è¡¨ç¤ºï¼Œè¯†åˆ«å‡ºå›¾ç‰‡ä¸­åŒ…å«çš„è±¡å½¢æ–‡å­—ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆéœ€è¦æŠŠåå…­è¿›åˆ¶è¡¨ç¤ºè½¬åŒ–ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºã€‚å› ä¸ºæ¯ä¸ªè±¡å½¢æ–‡å­—çš„é»‘è‰²åƒç´ æ˜¯è¿é€šçš„ï¼Œæ‰€ä»¥é»‘è‰²åƒç´ çš„è¿é€šåˆ†é‡çš„æ•°ç›®å³ä¸ºè±¡å½¢æ–‡å­—çš„æ•°ç›®ã€‚å„è±¡å½¢æ–‡å­—å¯ä»¥ç”¨å…¶åŒ…å«çš„ç™½è‰²åŒºåŸŸçš„æ•°ç›®æ¥åŒºåˆ«ã€‚æƒ³åˆ°çš„åšæ³•æ˜¯ï¼Œdfså¡«å……ç™½è‰²åƒç´ åŒºåŸŸï¼Œå¹¶è¿”å›åŒºåŸŸçš„è¾¹ç•Œï¼š0 è¡¨ç¤ºæ²¡æœ‰è¾¹ç•Œï¼ˆè¾¹ç•Œéƒ½æ˜¯ç™½è‰²åƒç´ ï¼‰ï¼Œ1,2,3â€¦ è¡¨ç¤ºè¾¹ç•Œæ˜¯å¯¹åº”çš„é»‘è‰²è¿é€šåˆ†é‡ï¼Œ-1 è¡¨ç¤ºè¾¹ç•Œæ˜¯æ•´ä¸ªå›¾åƒçš„è¾¹ç•Œã€‚è‹¥è¾¹ç•Œæ˜¯é»‘è‰²åƒç´ ï¼Œåˆ™å¯¹åº”çš„é»‘è‰²è¿é€šåˆ†é‡åŒ…å«çš„ç™½è‰²åŒºåŸŸæ•°+1ã€‚è¿™æ ·ï¼Œå³å¯åŒºåˆ†å‡ºä¸åŒçš„è±¡å½¢æ–‡å­—ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæƒ³é”™çš„åœ°æ–¹æ˜¯ï¼Œè®¤ä¸ºè¿”å›çš„åŒºåŸŸè¾¹ç•Œä¸ä¼šä¸º0ã€‚æƒ³è±¡è¿™æ ·ä¸€ç§æƒ…å†µï¼Œä¸€ä¸ªç™½è‰²åƒç´ å…¶å‘¨å›´çš„ä¸‰ä¸ªç™½è‰²åƒç´ éƒ½å·²ç»éå†åˆ°ï¼Œåˆ™è¿”å›0ã€‚è€Œè¿™ç§æƒ…å†µæ˜¯æœ‰å¯èƒ½çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç´«ä¹¦ä¸­çš„åšæ³•æ˜¯å¢åŠ äº†ç™½è‰²è¾¹ç•Œï¼Œæ–¹ä¾¿å¤„ç†ï¼›ä»é»‘è‰²åŒºåŸŸæ‰¾ä¸å…¶ç›¸è¿çš„ç™½è‰²åŒºåŸŸã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœç´¢" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/"/>
    
      <category term="DFS" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/DFS/"/>
    
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
  </entry>
  
  <entry>
    <title>UVA 297 Quadtrees</title>
    <link href="http://lvzhh.github.io/2018/06/UVA-297-Quadtrees/"/>
    <id>http://lvzhh.github.io/2018/06/UVA-297-Quadtrees/</id>
    <published>2018-06-14T02:43:04.000Z</published>
    <updated>2018-06-14T11:16:12.377Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šç»™å®šä¸¤ä¸ªå››åˆ†æ ‘çš„å…ˆåºéå†åºåˆ—ï¼Œå››åˆ†æ ‘çš„æ¯ä¸ªç»“ç‚¹ä¸å›¾åƒçš„æŸä¸ªåŒºåŸŸå¯¹åº”ï¼Œæ±‚ä¸¤ä¸ªå›¾åƒåˆå¹¶åé»‘è‰²åƒç´ çš„æ•°ç›®ã€‚</p><p>æƒ³åˆ°çš„åšæ³•æ˜¯åŒæ—¶éå†ä¸¤ä¸ªå››åˆ†æ ‘ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­é‡åˆ°<code>p</code>ç»“ç‚¹åˆ™å‘ä¸‹ï¼›å¦‚æœä¸¤ä¸ªç»“ç‚¹éƒ½ä¸æ˜¯<code>p</code>ç»“ç‚¹ä¸”å…¶ä¸­ä¸€ä¸ªä¸º<code>f</code>ç»“ç‚¹ï¼Œåˆ™åŠ ä¸Šå¯¹åº”åŒºåŸŸçš„åƒç´ æ•°ç›®ã€‚</p><p>ç´«ä¹¦ä¸­çš„è§£æ³•æ˜¯è€ƒè™‘å››åˆ†æ ‘å¯¹åº”çš„å›¾åƒã€‚ä¸€ä¸ªå­¦åˆ°çš„åœ°æ–¹æ˜¯ï¼ˆæ­£æ–¹å½¢ï¼‰åŒºåŸŸçš„è¡¨ç¤ºï¼šåŒºåŸŸçš„å·¦ä¸Šè§’åæ ‡<code>(x,y)</code>ä»¥åŠåŒºåŸŸçš„å®½åº¦<code>w</code>ã€‚è¿™æ ·ï¼Œåœ¨è¡¨ç¤ºå››åˆ†åŒºåŸŸæ—¶éå¸¸æ–¹ä¾¿ã€‚<br><a id="more"></a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">1</span> &lt;&lt; <span class="number">11</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s1[MAX_N], s2[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scan</span><span class="params">(<span class="keyword">int</span>&amp; i, <span class="keyword">int</span> d1, <span class="keyword">int</span>&amp; j, <span class="keyword">int</span> d2, <span class="keyword">int</span>&amp; ans)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">bool</span> p1 = s1[i] == <span class="string">'p'</span>, p2 = s2[j] == <span class="string">'p'</span>;</span><br><span class="line">  <span class="keyword">if</span> (p1 || p2) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">      scan(p1 ? ++i : i, p1 ? d1 - <span class="number">1</span> : d1,</span><br><span class="line">           p2 ? ++j : j, p2 ? d2 - <span class="number">1</span> : d2,</span><br><span class="line">           ans);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s1[i] == <span class="string">'f'</span> || s2[j] == <span class="string">'f'</span>) &#123;</span><br><span class="line">      ans += (<span class="number">1</span> &lt;&lt; min(d1, d2)) * (<span class="number">1</span> &lt;&lt; min(d1, d2));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">  <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s %s"</span>, s1, s2);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    scan(i, <span class="number">5</span>, j, <span class="number">5</span>, ans);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"There are %d black pixels.\n"</span>, ans);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">1</span> &lt;&lt; <span class="number">11</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> W = <span class="number">32</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s1[MAX_N], s2[MAX_N];</span><br><span class="line"><span class="keyword">bool</span> pic[W][W];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">(<span class="keyword">char</span>* s, <span class="keyword">int</span>&amp; p, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (s[p] == <span class="string">'p'</span>) &#123;</span><br><span class="line">    draw(s, ++p, x, y + w / <span class="number">2</span>, w / <span class="number">2</span>);</span><br><span class="line">    draw(s, ++p, x, y, w / <span class="number">2</span>);</span><br><span class="line">    draw(s, ++p, x + w / <span class="number">2</span>, y, w / <span class="number">2</span>);</span><br><span class="line">    draw(s, ++p, x + w / <span class="number">2</span>, y + w / <span class="number">2</span>, w / <span class="number">2</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[p] == <span class="string">'f'</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; w; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; w; j++) &#123;</span><br><span class="line">        pic[x + i][y + j] = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">  <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s %s"</span>, s1, s2);</span><br><span class="line">    <span class="built_in">memset</span>(pic, <span class="number">0</span>, <span class="keyword">sizeof</span>(pic));</span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">0</span>;</span><br><span class="line">    draw(s1, p, <span class="number">0</span>, <span class="number">0</span>, W);</span><br><span class="line">    p = <span class="number">0</span>;</span><br><span class="line">    draw(s2, p, <span class="number">0</span>, <span class="number">0</span>, W);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; W; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pic[i][j]) ans++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"There are %d black pixels.\n"</span>, ans);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šç»™å®šä¸¤ä¸ªå››åˆ†æ ‘çš„å…ˆåºéå†åºåˆ—ï¼Œå››åˆ†æ ‘çš„æ¯ä¸ªç»“ç‚¹ä¸å›¾åƒçš„æŸä¸ªåŒºåŸŸå¯¹åº”ï¼Œæ±‚ä¸¤ä¸ªå›¾åƒåˆå¹¶åé»‘è‰²åƒç´ çš„æ•°ç›®ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³åˆ°çš„åšæ³•æ˜¯åŒæ—¶éå†ä¸¤ä¸ªå››åˆ†æ ‘ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­é‡åˆ°&lt;code&gt;p&lt;/code&gt;ç»“ç‚¹åˆ™å‘ä¸‹ï¼›å¦‚æœä¸¤ä¸ªç»“ç‚¹éƒ½ä¸æ˜¯&lt;code&gt;p&lt;/code&gt;ç»“ç‚¹ä¸”å…¶ä¸­ä¸€ä¸ªä¸º&lt;code&gt;f&lt;/code&gt;ç»“ç‚¹ï¼Œåˆ™åŠ ä¸Šå¯¹åº”åŒºåŸŸçš„åƒç´ æ•°ç›®ã€‚&lt;/p&gt;
&lt;p&gt;ç´«ä¹¦ä¸­çš„è§£æ³•æ˜¯è€ƒè™‘å››åˆ†æ ‘å¯¹åº”çš„å›¾åƒã€‚ä¸€ä¸ªå­¦åˆ°çš„åœ°æ–¹æ˜¯ï¼ˆæ­£æ–¹å½¢ï¼‰åŒºåŸŸçš„è¡¨ç¤ºï¼šåŒºåŸŸçš„å·¦ä¸Šè§’åæ ‡&lt;code&gt;(x,y)&lt;/code&gt;ä»¥åŠåŒºåŸŸçš„å®½åº¦&lt;code&gt;w&lt;/code&gt;ã€‚è¿™æ ·ï¼Œåœ¨è¡¨ç¤ºå››åˆ†åŒºåŸŸæ—¶éå¸¸æ–¹ä¾¿ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å…¥é—¨" scheme="http://lvzhh.github.io/categories/%E5%85%A5%E9%97%A8/"/>
    
      <category term="æ¨¡æ‹Ÿ" scheme="http://lvzhh.github.io/categories/%E5%85%A5%E9%97%A8/%E6%A8%A1%E6%8B%9F/"/>
    
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
  </entry>
  
  <entry>
    <title>HDU 4027 Can you answer these queries?</title>
    <link href="http://lvzhh.github.io/2018/06/HDU-4027-Can-you-answer-these-queries/"/>
    <id>http://lvzhh.github.io/2018/06/HDU-4027-Can-you-answer-these-queries/</id>
    <published>2018-06-08T03:54:53.000Z</published>
    <updated>2018-06-11T00:18:18.881Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šç»™Nä¸ªæ•°ï¼Œè¿›è¡Œä¸¤ç§æ“ä½œï¼š1.<code>0 X Y</code>å¯¹ç¬¬Xå’Œç¬¬Yä¸ªæ•°ä¹‹é—´çš„æ•°å¼€æ ¹å·ï¼›2.<code>1 X Y</code>å¯¹<br>ç¬¬Xå’Œç¬¬Yä¸ªæ•°ä¹‹é—´çš„æ•°æ±‚å’Œã€‚</p><p>å¼€æ ¹å·æ“ä½œéœ€è¦å¯¹åŒºé—´å†…çš„æ¯ä¸ªæ•°è¿›è¡Œï¼Œæ‰èƒ½ä½¿å¾—åŒºé—´çš„å’Œå¾—åˆ°æ›´æ–°ã€‚<br>æ²¡æœ‰æƒ³åˆ°çš„åœ°æ–¹åœ¨äºï¼Œ<span class="math inline">\(2^{64}\)</span>æ°å¥½éœ€è¦å¼€7æ¬¡æ ¹å·å˜ä¸º1ï¼Œä¸€ä¸ªå°äº<span class="math inline">\(2^{63}\)</span>çš„æ•°æœ€å¤šå¼€6æ¬¡æ ¹å·ä¼šå˜ä¸º1ï¼ˆå¦‚æœæœ€åˆçš„æ•°&gt;0)ï¼Œä¹‹åå†å¼€æ ¹å·æ•°å€¼ä¸ä¼šå˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå¯ä»¥å¾—åˆ°çš„è§£æ³•æ˜¯ï¼Œæ›´æ–°æ“ä½œæ›´æ–°åˆ°å¶ç»“ç‚¹ï¼Œå¹¶è®°å½•çº¿æ®µæ ‘ç»“ç‚¹å¼€æ ¹å·çš„æ¬¡æ•°ï¼Œå¦‚æœæ¬¡æ•°&gt;=6ï¼Œåˆ™ä¸å†å‘ä¸‹æ›´æ–°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å§‹çš„æ—¶å€™æ¯æ¬¡æ›´æ–°éƒ½ä¼šæ›´æ–°åˆ°å¶ç»“ç‚¹ï¼Œå¤æ‚åº¦ä¸º<span class="math inline">\(O(n)\)</span>ï¼Œå¯¹æ•´ä¸ªåŒºé—´æ›´æ–°6æ¬¡åï¼Œå¤æ‚åº¦å˜ä¸º<span class="math inline">\(O(logn)\)</span>.interestingâ€¦<br><a id="more"></a><br>å‘ï¼š1.è¾“å…¥çš„Eiè¦ç”¨long longå­˜ï¼Œçœ‹é¢˜ç›®æè¿°<code>integers Ei</code>ï¼Œé»˜è®¤å°±ç”¨äº†intâ€¦<br>2.<code>T X Y</code>æ“ä½œï¼ŒXå¯èƒ½å¤§äºYï¼Œé¢˜ç›®æè¿°çš„æ˜¯<code>between X-th and Y-th</code><span class="github-emoji" title="smile" data-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png?v8">ğŸ˜„</span></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ST_SIZE = <span class="number">1</span> &lt;&lt; <span class="number">18</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_SQRT = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line">ll E[MAX_N];</span><br><span class="line">ll dat[ST_SIZE];</span><br><span class="line"><span class="keyword">int</span> tag[ST_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    dat[k] = E[l];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    build(lc, l, m);</span><br><span class="line">    build(rc, m, r);</span><br><span class="line">    dat[k] = dat[lc] + dat[rc];</span><br><span class="line">  &#125;</span><br><span class="line">  tag[k] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b &lt;= l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// don't go down</span></span><br><span class="line">    <span class="keyword">if</span> (tag[k] &gt;= MAX_SQRT) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (a &lt;= l &amp;&amp; r &lt;= b) tag[k]++;</span><br><span class="line">    <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">      dat[k] = (ll) <span class="built_in">sqrt</span>(dat[k]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// go down</span></span><br><span class="line">      <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">      update(lc, l, m, a, b);</span><br><span class="line">      update(rc, m, r, a, b);</span><br><span class="line">      dat[k] = dat[lc] + dat[rc];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b &lt;= l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &lt;= l &amp;&amp; r &lt;= b) &#123;</span><br><span class="line">    <span class="keyword">return</span> dat[k];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> query(lc, l, m, a, b) + query(rc, m, r, a, b);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> c = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N) != EOF) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Case #%d:\n"</span>, c++);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, E + i);</span><br><span class="line">    build(<span class="number">0</span>, <span class="number">0</span>, N);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> T, X, Y;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;T, &amp;X, &amp;Y);</span><br><span class="line">      <span class="keyword">if</span> (X &gt; Y) swap(X, Y);</span><br><span class="line">      <span class="keyword">if</span> (T == <span class="number">0</span>) &#123;</span><br><span class="line">        update(<span class="number">0</span>, <span class="number">0</span>, N, X - <span class="number">1</span>, Y);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, query(<span class="number">0</span>, <span class="number">0</span>, N, X - <span class="number">1</span>, Y));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šç»™Nä¸ªæ•°ï¼Œè¿›è¡Œä¸¤ç§æ“ä½œï¼š1.&lt;code&gt;0 X Y&lt;/code&gt;å¯¹ç¬¬Xå’Œç¬¬Yä¸ªæ•°ä¹‹é—´çš„æ•°å¼€æ ¹å·ï¼›2.&lt;code&gt;1 X Y&lt;/code&gt;å¯¹&lt;br&gt;
ç¬¬Xå’Œç¬¬Yä¸ªæ•°ä¹‹é—´çš„æ•°æ±‚å’Œã€‚&lt;/p&gt;
&lt;p&gt;å¼€æ ¹å·æ“ä½œéœ€è¦å¯¹åŒºé—´å†…çš„æ¯ä¸ªæ•°è¿›è¡Œï¼Œæ‰èƒ½ä½¿å¾—åŒºé—´çš„å’Œå¾—åˆ°æ›´æ–°ã€‚&lt;br&gt;
æ²¡æœ‰æƒ³åˆ°çš„åœ°æ–¹åœ¨äºï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(2^{64}\)&lt;/span&gt;æ°å¥½éœ€è¦å¼€7æ¬¡æ ¹å·å˜ä¸º1ï¼Œä¸€ä¸ªå°äº&lt;span class=&quot;math inline&quot;&gt;\(2^{63}\)&lt;/span&gt;çš„æ•°æœ€å¤šå¼€6æ¬¡æ ¹å·ä¼šå˜ä¸º1ï¼ˆå¦‚æœæœ€åˆçš„æ•°&amp;gt;0)ï¼Œä¹‹åå†å¼€æ ¹å·æ•°å€¼ä¸ä¼šå˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå¯ä»¥å¾—åˆ°çš„è§£æ³•æ˜¯ï¼Œæ›´æ–°æ“ä½œæ›´æ–°åˆ°å¶ç»“ç‚¹ï¼Œå¹¶è®°å½•çº¿æ®µæ ‘ç»“ç‚¹å¼€æ ¹å·çš„æ¬¡æ•°ï¼Œå¦‚æœæ¬¡æ•°&amp;gt;=6ï¼Œåˆ™ä¸å†å‘ä¸‹æ›´æ–°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å§‹çš„æ—¶å€™æ¯æ¬¡æ›´æ–°éƒ½ä¼šæ›´æ–°åˆ°å¶ç»“ç‚¹ï¼Œå¤æ‚åº¦ä¸º&lt;span class=&quot;math inline&quot;&gt;\(O(n)\)&lt;/span&gt;ï¼Œå¯¹æ•´ä¸ªåŒºé—´æ›´æ–°6æ¬¡åï¼Œå¤æ‚åº¦å˜ä¸º&lt;span class=&quot;math inline&quot;&gt;\(O(logn)\)&lt;/span&gt;.interestingâ€¦&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    
      <category term="HDU" scheme="http://lvzhh.github.io/tags/HDU/"/>
    
      <category term="kuangbin#çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/tags/kuangbin-%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>åˆ·é¢˜æ€»ç»“</title>
    <link href="http://lvzhh.github.io/2018/06/%E5%88%B7%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    <id>http://lvzhh.github.io/2018/06/åˆ·é¢˜æ€»ç»“/</id>
    <published>2018-06-08T03:33:20.000Z</published>
    <updated>2018-06-13T23:58:13.962Z</updated>
    
    <content type="html"><![CDATA[<p>POJ 3253 Huffmanæ ‘<br>é”™è¯¯ï¼šç»“æœè¶…å‡ºäº†intçš„èŒƒå›´ï¼Œåº”è¯¥ç”¨long longï¼›è€Œä¸”<code>printf(&quot;%lld&quot;,ans)</code>ï¼Œæ³¨æ„æ˜¯<code>lld</code><br>POJ 2686 Traveling by Stagecoachï¼ˆDAGï¼ŒçŠ¶å‹dpï¼‰<br>é¢˜ç›®å¤§æ„ï¼šmä¸ªç»“ç‚¹çš„æ— å‘å›¾ï¼Œæ¯ä¸ªç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªåŸå¸‚ï¼Œnå¼ ç¥¨ï¼Œç»è¿‡ä¸€æ¡è¾¹æ¶ˆè€—ä¸€å¼ ç¥¨ï¼Œæ¯å¼ ç¥¨æœ‰ä¸€ä¸ªæ•°å€¼ï¼Œç»è¿‡ä¸€æ¡è¾¹çš„æ—¶é—´ä¸ºè¾¹çš„é•¿åº¦/ç¥¨çš„æ•°å€¼ã€‚ç»™å®šèµ·ç‚¹aï¼Œé—®ç»ˆç‚¹bæ˜¯å¦å¯è¾¾ï¼Œè‹¥å¯è¾¾ï¼Œæ±‚æœ€çŸ­æ—¶é—´ã€‚<br>ç”¨æœç´¢æ¥åšï¼Œåœ¨ç»“ç‚¹vï¼Œæœ‰kå¼ ç¥¨ï¼Œæ¯æ¡è¾¹ç”¨kå¼ ç¥¨å»è¯•ã€‚<strong>è¿™æ ·å¯ä»¥é‡æ–°å»ºä¸€å¼ æœ‰å‘å›¾ï¼Œå›¾ä¸­ç»“ç‚¹è¡¨ç¤ºçŠ¶æ€ï¼Œå³æ‰€åœ¨åŸå¸‚+æ‰‹ä¸­ä½™ç¥¨ï¼Œè¾¹è¡¨ç¤ºåŸæ¥è¾¹çš„é•¿åº¦/æ‰€ç”¨ç¥¨çš„æ•°å€¼ã€‚é—®é¢˜è½¬åŒ–ä¸ºäº†ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯é—®é¢˜ã€‚</strong>è¿™ä¸ªæœ‰å‘å›¾å‘¢ï¼Œæ˜¯ä¸€ä¸ªDAGï¼Œå› æ­¤å¯è€ƒè™‘ç”¨dpæ¥æ±‚æœ€çŸ­è·¯ï¼ŒæŠŠç¥¨çš„çŠ¶æ€å‹ç¼©æˆä¸€ä¸ªæ•´æ•°Tï¼Œç›¸å½“äºå¡«ä¸€å¼ T*mçš„è¡¨ã€‚<br>POJ 3734ï¼Œ3233 ï¼ˆdpï¼ŒçŸ©é˜µå¿«å¹‚ï¼‰<br>POJ 2932 å¹³é¢æ‰«æï¼ˆline sweepï¼‰<br>POJ 2187 Grahamå‡¸åŒ…ï¼Œæ—‹è½¬å¡å£³æ±‚å‡¸å¤šè¾¹å½¢ç›´å¾„ï¼ˆæœ€è¿œç‚¹å¯¹ï¼‰<br>POJ 1741 æ ‘çš„ç‚¹åˆ†æ²»<br>POJ 3264 RMQé—®é¢˜ï¼Œsparse table or segment tree<br><a id="more"></a><br>POJ 2217 ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±éƒ¨åˆ†ï¼šæ‹¼æ¥ä¹‹åæ±‚å‡ºåç¼€æ•°ç»„SAå’Œé«˜åº¦æ•°ç»„LCPï¼Œé«˜åº¦æ•°ç»„ä¸­çš„æœ€å¤§å€¼å³ä¸ºæ‰€æ±‚ç»“æœ<br>POJ 3581 åç¼€æ•°ç»„ï¼ˆä»éœ€å†åŠ è€ƒè™‘ï¼‰<br>POJ 3690 äºŒç»´å­—ç¬¦å“ˆå¸Œ<br>POJ 1961ï¼Œ2406ï¼Œ3461 KMP<br>LA 3942 æšä¸¾+Trie<br>HDU 2222 AC Automaton<br>ZOJ 1015 Maximum Cardinality Searchæ±‚å®Œç¾æ¶ˆé™¤åºåˆ—ï¼Œå¼¦å›¾çš„åˆ¤å®šï¼ˆå®ç°ä¸Šçš„é—®é¢˜ï¼šå›¾çš„é‚»æ¥è¡¨å’Œé‚»æ¥çŸ©é˜µéƒ½éœ€è¦å»ºç«‹ï¼Ÿï¼‰<br>BZOJ 1006 å¼¦å›¾çš„è‰²æ•°<br>LeetCode æœ€é•¿å›æ–‡ä¸² Manacherâ€˜s Algorithm https://www.felix021.com/blog/read.php?2040<br>POJ 3061ï¼Œ3320 å°ºå–æ³•</p><h4 id="zoj-1610-count-the-colors">ZOJ 1610 Count the Colors</h4><p>çº¿æ®µæ ‘ï¼ŒåŒºé—´æ›´æ–°</p><h4 id="uva-699-the-falling-leaves">UVA 699 The Falling Leaves</h4><p>äºŒå‰æ ‘æ„å»ºã€éå†ã€‚ä¸€ä¸ªæƒ³é”™çš„åœ°æ–¹æ˜¯ï¼Œä¸‹è½åæœ€é å·¦çš„ç»“ç‚¹æ˜¯æ ¹çš„å·¦å­©å­çš„å·¦å­©å­çš„å·¦å­©å­â€¦ï¼ˆç›´åˆ°å¶ç»“ç‚¹ï¼‰ã€‚ä¸€ä¸ªåä¾‹æ˜¯ï¼Œæ ¹çš„å³å­©å­çš„å·¦å­©å­å‘å·¦å»¶ä¼¸å¾ˆé•¿ï¼Œæˆä¸ºä¸‹è½åæœ€é å·¦çš„ç»“ç‚¹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;POJ 3253 Huffmanæ ‘&lt;br&gt;
é”™è¯¯ï¼šç»“æœè¶…å‡ºäº†intçš„èŒƒå›´ï¼Œåº”è¯¥ç”¨long longï¼›è€Œä¸”&lt;code&gt;printf(&amp;quot;%lld&amp;quot;,ans)&lt;/code&gt;ï¼Œæ³¨æ„æ˜¯&lt;code&gt;lld&lt;/code&gt;&lt;br&gt;
POJ 2686 Traveling by Stagecoachï¼ˆDAGï¼ŒçŠ¶å‹dpï¼‰&lt;br&gt;
é¢˜ç›®å¤§æ„ï¼šmä¸ªç»“ç‚¹çš„æ— å‘å›¾ï¼Œæ¯ä¸ªç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªåŸå¸‚ï¼Œnå¼ ç¥¨ï¼Œç»è¿‡ä¸€æ¡è¾¹æ¶ˆè€—ä¸€å¼ ç¥¨ï¼Œæ¯å¼ ç¥¨æœ‰ä¸€ä¸ªæ•°å€¼ï¼Œç»è¿‡ä¸€æ¡è¾¹çš„æ—¶é—´ä¸ºè¾¹çš„é•¿åº¦/ç¥¨çš„æ•°å€¼ã€‚ç»™å®šèµ·ç‚¹aï¼Œé—®ç»ˆç‚¹bæ˜¯å¦å¯è¾¾ï¼Œè‹¥å¯è¾¾ï¼Œæ±‚æœ€çŸ­æ—¶é—´ã€‚&lt;br&gt;
ç”¨æœç´¢æ¥åšï¼Œåœ¨ç»“ç‚¹vï¼Œæœ‰kå¼ ç¥¨ï¼Œæ¯æ¡è¾¹ç”¨kå¼ ç¥¨å»è¯•ã€‚&lt;strong&gt;è¿™æ ·å¯ä»¥é‡æ–°å»ºä¸€å¼ æœ‰å‘å›¾ï¼Œå›¾ä¸­ç»“ç‚¹è¡¨ç¤ºçŠ¶æ€ï¼Œå³æ‰€åœ¨åŸå¸‚+æ‰‹ä¸­ä½™ç¥¨ï¼Œè¾¹è¡¨ç¤ºåŸæ¥è¾¹çš„é•¿åº¦/æ‰€ç”¨ç¥¨çš„æ•°å€¼ã€‚é—®é¢˜è½¬åŒ–ä¸ºäº†ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯é—®é¢˜ã€‚&lt;/strong&gt;è¿™ä¸ªæœ‰å‘å›¾å‘¢ï¼Œæ˜¯ä¸€ä¸ªDAGï¼Œå› æ­¤å¯è€ƒè™‘ç”¨dpæ¥æ±‚æœ€çŸ­è·¯ï¼ŒæŠŠç¥¨çš„çŠ¶æ€å‹ç¼©æˆä¸€ä¸ªæ•´æ•°Tï¼Œç›¸å½“äºå¡«ä¸€å¼ T*mçš„è¡¨ã€‚&lt;br&gt;
POJ 3734ï¼Œ3233 ï¼ˆdpï¼ŒçŸ©é˜µå¿«å¹‚ï¼‰&lt;br&gt;
POJ 2932 å¹³é¢æ‰«æï¼ˆline sweepï¼‰&lt;br&gt;
POJ 2187 Grahamå‡¸åŒ…ï¼Œæ—‹è½¬å¡å£³æ±‚å‡¸å¤šè¾¹å½¢ç›´å¾„ï¼ˆæœ€è¿œç‚¹å¯¹ï¼‰&lt;br&gt;
POJ 1741 æ ‘çš„ç‚¹åˆ†æ²»&lt;br&gt;
POJ 3264 RMQé—®é¢˜ï¼Œsparse table or segment tree&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Notes" scheme="http://lvzhh.github.io/categories/Notes/"/>
    
    
      <category term="åˆ·é¢˜æ€»ç»“" scheme="http://lvzhh.github.io/tags/%E5%88%B7%E9%A2%98%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>HDU 3974 Assign the task</title>
    <link href="http://lvzhh.github.io/2018/06/HDU-3974-Assign-the-task/"/>
    <id>http://lvzhh.github.io/2018/06/HDU-3974-Assign-the-task/</id>
    <published>2018-06-08T02:16:10.000Z</published>
    <updated>2018-06-08T04:36:42.371Z</updated>
    
    <content type="html"><![CDATA[<p>dfsåºå¯ä»¥æŠŠç»“ç‚¹våŠå…¶å­æ ‘æ”¾åœ¨è¿ç»­çš„åŒºé—´ä¸­<br>åˆ†é…ä»»åŠ¡æ“ä½œ<code>T x y</code>ç›¸å½“äºæŠŠä¸€ä¸ªè¿ç»­çš„åŒºé—´ç½®ä¸ºyï¼Œå¯ä»¥ç”¨çº¿æ®µæ ‘æ¥ç»´æŠ¤<br>æŸ¥è¯¢æ“ä½œä¸ºçº¿æ®µæ ‘çš„å•ç‚¹æŸ¥è¯¢<br><a id="more"></a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50000</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[MAX_N];</span><br><span class="line"><span class="keyword">bool</span> leader[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vs;</span><br><span class="line"><span class="keyword">int</span> id[MAX_N];</span><br><span class="line"><span class="keyword">int</span> size[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= N; v++) &#123;</span><br><span class="line">    G[v].clear();</span><br><span class="line">    leader[v] = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  vs.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">  id[v] = vs.size();</span><br><span class="line">  vs.push_back(v);</span><br><span class="line">  size[v] = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; G[v].size(); i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> u = G[v][i];</span><br><span class="line">    dfs(u);</span><br><span class="line">    size[v] += size[u];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lc (2 * k + 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rc (2 * k + 2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> m ((l + r) / 2)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ST_SIZE = <span class="number">1</span> &lt;&lt; <span class="number">17</span>;</span><br><span class="line"><span class="keyword">int</span> task[ST_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">memset</span>(task, <span class="number">-1</span>, <span class="keyword">sizeof</span>(task));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (task[k] != <span class="number">-1</span>) &#123;</span><br><span class="line">    task[lc] = task[rc] = task[k];</span><br><span class="line">    task[k] = <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b &lt;= l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &lt;= l &amp;&amp; r &lt;= b) &#123;</span><br><span class="line">    task[k] = x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    push_down(k);</span><br><span class="line">    update(lc, l, m, a, b, x);</span><br><span class="line">    update(rc, m, r, a, b, x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> task[k];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    push_down(k);</span><br><span class="line">    <span class="keyword">if</span> (a &lt; m) <span class="keyword">return</span> query(lc, l, m, a);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> query(rc, m, r, a);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> T;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">1</span>; t &lt;= T; t++) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Case #%d:\n"</span>, t);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N);</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> u, v;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;u, &amp;v);</span><br><span class="line">      G[v].push_back(u);</span><br><span class="line">      leader[u] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> root = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= N; v++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (leader[v]) root = v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dfs(root);</span><br><span class="line">    build();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++) &#123;</span><br><span class="line">      <span class="keyword">char</span> cmd;</span><br><span class="line">      <span class="keyword">int</span> x, y;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;cmd);</span><br><span class="line">      <span class="keyword">if</span> (cmd == <span class="string">'C'</span>) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(<span class="number">0</span>, <span class="number">0</span>, N, id[x]));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;x, &amp;y);</span><br><span class="line">        update(<span class="number">0</span>, <span class="number">0</span>, N, id[x], id[x] + size[x], y);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;dfsåºå¯ä»¥æŠŠç»“ç‚¹våŠå…¶å­æ ‘æ”¾åœ¨è¿ç»­çš„åŒºé—´ä¸­&lt;br&gt;
åˆ†é…ä»»åŠ¡æ“ä½œ&lt;code&gt;T x y&lt;/code&gt;ç›¸å½“äºæŠŠä¸€ä¸ªè¿ç»­çš„åŒºé—´ç½®ä¸ºyï¼Œå¯ä»¥ç”¨çº¿æ®µæ ‘æ¥ç»´æŠ¤&lt;br&gt;
æŸ¥è¯¢æ“ä½œä¸ºçº¿æ®µæ ‘çš„å•ç‚¹æŸ¥è¯¢&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æœç´¢" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
      <category term="dfsåº" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/dfs%E5%BA%8F/"/>
    
    
      <category term="HDU" scheme="http://lvzhh.github.io/tags/HDU/"/>
    
      <category term="kuangbin#çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/tags/kuangbin-%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>HDU 1540 Tunnel Warfare</title>
    <link href="http://lvzhh.github.io/2018/06/HDU-1540-Tunnel-Warfare/"/>
    <id>http://lvzhh.github.io/2018/06/HDU-1540-Tunnel-Warfare/</id>
    <published>2018-06-07T17:00:25.000Z</published>
    <updated>2018-06-08T02:14:16.712Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šä¸€ä¸ª0\1åºåˆ—ï¼Œåˆå§‹ä¸ºå…¨1ï¼Œä¼šæŠŠæŸä¸ªç‚¹ä»0å˜1ï¼Œæˆ–ä»1å˜ä¸º0ï¼Œæ±‚åŒ…å«xçš„æœ€é•¿å…¨1åºåˆ—é•¿åº¦ã€‚</p><p>å¼€å§‹æƒ³åˆ°çš„è§£æ³•æ˜¯ï¼šæ±‚åŒ…å«xçš„æœ€é•¿å…¨1åºåˆ—é•¿åº¦ï¼Œé‚£ä¹ˆä»xå‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª0çš„ä½ç½®ï¼Œä»xå‘å³æ‰¾åˆ°ç¬¬ä¸€ä¸ª0ï¼Œè¿™ä¸­é—´çš„å³ä¸ºæ‰€æ±‚åºåˆ—ã€‚å› æ­¤ï¼Œçº¿æ®µæ ‘çš„æ¯ä¸ªç»“ç‚¹éœ€è¦ç»´æŠ¤çš„ä¿¡æ¯ä¸º<code>mi[k],mx[k]</code>ï¼Œå³æœ€å·¦0å’Œæœ€å³0çš„ä½ç½®ã€‚æ¯æ¬¡æŸ¥è¯¢æ—¶æ±‚å‡º[1,x+1)åŒºé—´ä¸­æœ€å³çš„0å’Œ[x+1,n+1)åŒºé—´ä¸­æœ€å·¦çš„0çš„ä½ç½®ï¼Œä¸¤è€…ä¹‹é—´å…ƒç´ çš„æ•°ç›®å³ä¸ºæ‰€æ±‚é•¿åº¦ã€‚<br><a id="more"></a><br>åé¢çœ‹åˆ°<a href="http://www.cnblogs.com/kuangbin/archive/2012/08/15/2640857.html" target="_blank" rel="noopener">è¿™ç¯‡åšå®¢</a>ä¸­ç”¨çº¿æ®µæ ‘ç»´æŠ¤ä¸‰ä¸ªåŒºé—´é•¿åº¦ä¿¡æ¯æ¥åšã€‚</p><p>å‘ï¼šè™½ç„¶é¢˜ç›®æ²¡è¯´æœ‰å¤šä¸ªcaseï¼Œä½†æ˜¯éœ€è¦å¤„ç†åˆ°EOFå•Š <span class="github-emoji" title="smile" data-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png?v8">ğŸ˜„</span></p><p>ç¬¬ä¸€ç§è§£æ³•ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; Pair;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ST_SIZE = <span class="number">1</span> &lt;&lt; <span class="number">17</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="comment">// leftmost and rightmost destroyed village</span></span><br><span class="line"><span class="keyword">int</span> mi[ST_SIZE], mx[ST_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> lc, <span class="keyword">int</span> rc)</span> </span>&#123;</span><br><span class="line">  mi[k] = min(mi[lc], mi[rc]);</span><br><span class="line">  mx[k] = max(mx[lc], mx[rc]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    mi[k] = n + <span class="number">1</span>;</span><br><span class="line">    mx[k] = <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    build(lc, l, m);</span><br><span class="line">    build(rc, m, r);</span><br><span class="line">    push_up(k, lc, rc);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x &lt; l || r &lt;= x) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    mi[k] = x;</span><br><span class="line">    mx[k] = x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    destroy(lc, l, m, x);</span><br><span class="line">    destroy(rc, m, r, x);</span><br><span class="line">    push_up(k, lc, rc);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">restore</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x &lt; l || r &lt;= x) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    mi[k] = n + <span class="number">1</span>;</span><br><span class="line">    mx[k] = <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    restore(lc, l, m, x);</span><br><span class="line">    restore(rc, m, r, x);</span><br><span class="line">    push_up(k, lc, rc);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Pair <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b &lt;= l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span> Pair(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &lt;= l &amp;&amp; r &lt;= b) &#123;</span><br><span class="line">    <span class="keyword">return</span> Pair(mi[k], mx[k]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    Pair p1 = query(lc, l, m, a, b);</span><br><span class="line">    Pair p2 = query(rc, m, r, a, b);</span><br><span class="line">    <span class="keyword">return</span> Pair(min(p1.first, p2.first), max(p1.second, p2.second));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d  %d"</span>, &amp;n, &amp;m) != EOF) &#123;</span><br><span class="line">    build(<span class="number">0</span>, <span class="number">1</span>, n + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; stk;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">      <span class="keyword">char</span> event;</span><br><span class="line">      <span class="keyword">int</span> x;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;event);</span><br><span class="line">      <span class="keyword">if</span> (event == <span class="string">'R'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (stk.empty()) <span class="keyword">continue</span>;</span><br><span class="line">        x = stk.top(); stk.pop();</span><br><span class="line">        restore(<span class="number">0</span>, <span class="number">1</span>, n + <span class="number">1</span>, x);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">        <span class="keyword">if</span> (event == <span class="string">'D'</span>) &#123;</span><br><span class="line">          <span class="comment">// destory destroyed village ?</span></span><br><span class="line">          stk.push(x);</span><br><span class="line">          destroy(<span class="number">0</span>, <span class="number">1</span>, n + <span class="number">1</span>, x);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          Pair p1 = query(<span class="number">0</span>, <span class="number">1</span>, n + <span class="number">1</span>, <span class="number">1</span>, x + <span class="number">1</span>);</span><br><span class="line">          Pair p2 = query(<span class="number">0</span>, <span class="number">1</span>, n + <span class="number">1</span>, x, n + <span class="number">1</span>);</span><br><span class="line">          <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, max(<span class="number">0</span>, p2.first - (p1.second + <span class="number">1</span>)));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç¬¬äºŒç§è§£æ³•ï¼š<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lc (2 * k + 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rc (2 * k + 2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> m ((l + r) / 2)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ST_SIZE = <span class="number">1</span> &lt;&lt; <span class="number">17</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="keyword">int</span> ls[ST_SIZE], rs[ST_SIZE], ms[ST_SIZE]; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  ls[k] = ls[lc] == m - l ? ls[lc] + ls[rc] : ls[lc];</span><br><span class="line">  rs[k] = rs[rc] == r - m ? rs[rc] + rs[lc] : rs[rc];</span><br><span class="line">  ms[k] = max(rs[lc] + ls[rc], max(ms[lc], ms[rc]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    ls[k] = rs[k] = ms[k] = <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    build(lc, l, m);</span><br><span class="line">    build(rc, m, r);</span><br><span class="line">    push_up(k, l, r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a &lt; l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    ls[k] = rs[k] = ms[k] = x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    update(lc, l, m, a, x);</span><br><span class="line">    update(rc, m, r, a, x);</span><br><span class="line">    push_up(k, l, r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a &lt; l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> ms[k];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> res = max(query(lc, l, m, a), query(rc, m, r, a));</span><br><span class="line">    <span class="keyword">if</span> (m - rs[lc] &lt;= a &amp;&amp; a &lt; m + ls[rc]) &#123;</span><br><span class="line">      res = max(res, rs[lc] + ls[rc]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d  %d"</span>, &amp;N, &amp;M) != EOF) &#123;</span><br><span class="line">    build(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; stk;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++) &#123;</span><br><span class="line">      <span class="keyword">char</span> event;</span><br><span class="line">      <span class="keyword">int</span> x;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;event);</span><br><span class="line">      <span class="keyword">if</span> (event == <span class="string">'R'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (stk.empty()) <span class="keyword">continue</span>;</span><br><span class="line">        x = stk.top(); stk.pop();</span><br><span class="line">        update(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>, x, <span class="number">1</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">        <span class="keyword">if</span> (event == <span class="string">'D'</span>) &#123;</span><br><span class="line">          <span class="comment">// destory destroyed village ?</span></span><br><span class="line">          stk.push(x);</span><br><span class="line">          update(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>, x, <span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>, x));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šä¸€ä¸ª0\1åºåˆ—ï¼Œåˆå§‹ä¸ºå…¨1ï¼Œä¼šæŠŠæŸä¸ªç‚¹ä»0å˜1ï¼Œæˆ–ä»1å˜ä¸º0ï¼Œæ±‚åŒ…å«xçš„æœ€é•¿å…¨1åºåˆ—é•¿åº¦ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å§‹æƒ³åˆ°çš„è§£æ³•æ˜¯ï¼šæ±‚åŒ…å«xçš„æœ€é•¿å…¨1åºåˆ—é•¿åº¦ï¼Œé‚£ä¹ˆä»xå‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª0çš„ä½ç½®ï¼Œä»xå‘å³æ‰¾åˆ°ç¬¬ä¸€ä¸ª0ï¼Œè¿™ä¸­é—´çš„å³ä¸ºæ‰€æ±‚åºåˆ—ã€‚å› æ­¤ï¼Œçº¿æ®µæ ‘çš„æ¯ä¸ªç»“ç‚¹éœ€è¦ç»´æŠ¤çš„ä¿¡æ¯ä¸º&lt;code&gt;mi[k],mx[k]&lt;/code&gt;ï¼Œå³æœ€å·¦0å’Œæœ€å³0çš„ä½ç½®ã€‚æ¯æ¬¡æŸ¥è¯¢æ—¶æ±‚å‡º[1,x+1)åŒºé—´ä¸­æœ€å³çš„0å’Œ[x+1,n+1)åŒºé—´ä¸­æœ€å·¦çš„0çš„ä½ç½®ï¼Œä¸¤è€…ä¹‹é—´å…ƒç´ çš„æ•°ç›®å³ä¸ºæ‰€æ±‚é•¿åº¦ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    
      <category term="HDU" scheme="http://lvzhh.github.io/tags/HDU/"/>
    
      <category term="kuangbin#çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/tags/kuangbin-%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>POJ 3667 Hotel</title>
    <link href="http://lvzhh.github.io/2018/06/POJ-3667-Hotel/"/>
    <id>http://lvzhh.github.io/2018/06/POJ-3667-Hotel/</id>
    <published>2018-06-07T16:56:59.000Z</published>
    <updated>2018-06-08T01:32:38.952Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šæ’æˆä¸€è¡Œçš„æ—…é¦†æˆ¿é—´<br>checkinæ—¶æ‰¾åˆ°æœ€é å·¦çš„ç©ºé—²çš„é•¿åº¦&gt;=dçš„è¿ç»­åŒºé—´ï¼Œè¾“å‡ºåŒºé—´çš„å·¦ç«¯ç‚¹<span class="math inline">\(r\)</span>å¹¶å…¥ä½<br>checkoutæ—¶æŠŠä»xå¼€å§‹çš„é•¿åº¦ä¸ºdçš„åŒºé—´å˜ä¸ºç©ºé—²</p><p>çº¿æ®µæ ‘çš„åŒºé—´åˆå¹¶é—®é¢˜ï¼Ÿ<br>ç©ºé—²0\1è¡¨ç¤ºï¼ŒåŒºé—´ç½®0\1å¯ä»¥ç”¨æ‰“æ ‡è®°æ¥å®ç°ã€‚<br>å¦‚ä½•æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„åŒºé—´ç«¯ç‚¹<span class="math inline">\(r\)</span>å‘¢ï¼Ÿçº¿æ®µæ ‘æ¯ä¸ªç»“ç‚¹ç»´æŠ¤çš„ä¿¡æ¯ä¸ºä»åŒºé—´å·¦ç«¯ç‚¹å¼€å§‹çš„å…¨0åºåˆ—çš„é•¿åº¦lsï¼Œä»åŒºé—´å³ç«¯ç‚¹å¼€å§‹çš„å…¨0åºåˆ—çš„é•¿åº¦rsï¼ŒåŒºé—´ä¸­æœ€é•¿çš„å…¨0åºåˆ—é•¿åº¦msã€‚å¦‚æœçº¿æ®µæ ‘æŸä¸ªç»“ç‚¹ms&gt;=dï¼Œé‚£ä¹ˆæœ€é•¿çš„åŒºé—´å¯ä»¥æ¥å…¥ä½ï¼Œæœ€é•¿åŒºé—´æœ‰ä¸‰ç§æƒ…å†µï¼šå®Œå…¨åœ¨å·¦å„¿å­çš„åŒºé—´ï¼Œæ¨ªè·¨å·¦å³å„¿å­çš„åŒºé—´ï¼Œå®Œå…¨åœ¨å³å„¿å­çš„åŒºé—´ã€‚å› ä¸º<span class="math inline">\(r\)</span>è¦æ»¡è¶³æœ€é å·¦ï¼Œæ‰€ä»¥ä¾æ¬¡å°è¯•ä¸Šé¢ä¸‰ç§å¯èƒ½æƒ…å†µã€‚<br><a id="more"></a><br>æ³¨æ„åœ¨æŸ¥è¯¢çš„æ—¶å€™ä¸‹ä¼ æ ‡è®°ã€‚ç”±äºqueryå‡½æ•°å†™æ³•çš„åŸå› ï¼Œå¦‚æœæŸä¸ªåŒºé—´è¢«ç½®ä¸ºå…¨0\1ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒºé—´ä¸€å®šæ»¡è¶³<code>ms[k] == ls[k]</code>ï¼Œå› æ­¤ä¸€å®šæ»¡è¶³<code>ms[k] &lt; d</code>ã€<code>ls[k] &gt;= d</code>å…¶ä¸­ä¹‹ä¸€è€Œé€€å‡ºã€‚å¦‚æœç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œé‚£ä¹ˆç»“ç‚¹kä¸€å®šæ˜¯æ²¡æœ‰æ ‡è®°çš„ï¼Œä¸éœ€è¦å‘ä¸‹ä¼ æ ‡è®°ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç¬¬ä¸€æ¬¡äº¤çš„æ—¶å€™æ²¡æœ‰<code>push_down</code>ä¹Ÿè¿‡äº†ã€‚</p><p>æœ‰äº†å®å®šä¹‰åä»£ç ç²¾ç®€äº†å¥½å¤šâ€¦<br>åˆšå¼€å§‹æ¥è§¦è¿™ç±»åŒºé—´é—®é¢˜ï¼Œè¿˜æ¯”è¾ƒç”Ÿç–â€¦</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lc (2 * k + 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rc (2 * k + 2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> m ((l + r) / 2)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ST_SIZE = <span class="number">1</span> &lt;&lt; <span class="number">17</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="keyword">int</span> ls[ST_SIZE], rs[ST_SIZE], ms[ST_SIZE], check[ST_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_tag</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">    ls[k] = rs[k] = ms[k] = r - l;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ls[k] = rs[k] = ms[k] = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  check[k] = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  ls[k] = ls[lc] == m - l ? ls[lc] + ls[rc] : ls[lc];</span><br><span class="line">  rs[k] = rs[rc] == r - m ? rs[rc] + rs[lc] : rs[rc];</span><br><span class="line">  ms[k] = max(max(ms[lc], ms[rc]), rs[lc] + ls[rc]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (check[k] != <span class="number">-1</span>) &#123;</span><br><span class="line">    set_tag(lc, l, m, check[k]);</span><br><span class="line">    set_tag(rc, m, r, check[k]);</span><br><span class="line">    check[k] = <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    ls[k] = rs[k] = ms[k] = <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    build(lc, l, m);</span><br><span class="line">    build(rc, m, r);</span><br><span class="line">    push_up(k, l, r);</span><br><span class="line">  &#125;</span><br><span class="line">  check[k] = <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b &lt;= l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &lt;= l &amp;&amp; r &lt;= b) &#123;</span><br><span class="line">    set_tag(k, l, r, x);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    push_down(k, l, r);</span><br><span class="line">    update(lc, l, m, a, b, x);</span><br><span class="line">    update(rc, m, r, a, b, x);</span><br><span class="line">    push_up(k, l, r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (ms[k] &lt; d) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (ls[k] &gt;= d) <span class="keyword">return</span> l;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// if go down, then there is no tag on k</span></span><br><span class="line">    push_down(k, l, r);</span><br><span class="line">    <span class="keyword">if</span> (ms[lc] &gt;= d) <span class="keyword">return</span> query(lc, l, m, d);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (rs[lc] + ls[rc] &gt;= d) <span class="keyword">return</span> m - rs[lc];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> query(rc, m, r, d);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;N, &amp;M);</span><br><span class="line">  build(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">while</span> (M--) &#123;</span><br><span class="line">    <span class="keyword">int</span> req, d, x;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;req);</span><br><span class="line">    <span class="keyword">if</span> (req == <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;d);</span><br><span class="line">      <span class="keyword">int</span> res = query(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>, d);</span><br><span class="line">      <span class="keyword">if</span> (res) update(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>, res, res + d, <span class="number">1</span>);</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;x, &amp;d);</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">1</span>, N + <span class="number">1</span>, x, x + d, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šæ’æˆä¸€è¡Œçš„æ—…é¦†æˆ¿é—´&lt;br&gt;
checkinæ—¶æ‰¾åˆ°æœ€é å·¦çš„ç©ºé—²çš„é•¿åº¦&amp;gt;=dçš„è¿ç»­åŒºé—´ï¼Œè¾“å‡ºåŒºé—´çš„å·¦ç«¯ç‚¹&lt;span class=&quot;math inline&quot;&gt;\(r\)&lt;/span&gt;å¹¶å…¥ä½&lt;br&gt;
checkoutæ—¶æŠŠä»xå¼€å§‹çš„é•¿åº¦ä¸ºdçš„åŒºé—´å˜ä¸ºç©ºé—²&lt;/p&gt;
&lt;p&gt;çº¿æ®µæ ‘çš„åŒºé—´åˆå¹¶é—®é¢˜ï¼Ÿ&lt;br&gt;
ç©ºé—²0\1è¡¨ç¤ºï¼ŒåŒºé—´ç½®0\1å¯ä»¥ç”¨æ‰“æ ‡è®°æ¥å®ç°ã€‚&lt;br&gt;
å¦‚ä½•æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„åŒºé—´ç«¯ç‚¹&lt;span class=&quot;math inline&quot;&gt;\(r\)&lt;/span&gt;å‘¢ï¼Ÿçº¿æ®µæ ‘æ¯ä¸ªç»“ç‚¹ç»´æŠ¤çš„ä¿¡æ¯ä¸ºä»åŒºé—´å·¦ç«¯ç‚¹å¼€å§‹çš„å…¨0åºåˆ—çš„é•¿åº¦lsï¼Œä»åŒºé—´å³ç«¯ç‚¹å¼€å§‹çš„å…¨0åºåˆ—çš„é•¿åº¦rsï¼ŒåŒºé—´ä¸­æœ€é•¿çš„å…¨0åºåˆ—é•¿åº¦msã€‚å¦‚æœçº¿æ®µæ ‘æŸä¸ªç»“ç‚¹ms&amp;gt;=dï¼Œé‚£ä¹ˆæœ€é•¿çš„åŒºé—´å¯ä»¥æ¥å…¥ä½ï¼Œæœ€é•¿åŒºé—´æœ‰ä¸‰ç§æƒ…å†µï¼šå®Œå…¨åœ¨å·¦å„¿å­çš„åŒºé—´ï¼Œæ¨ªè·¨å·¦å³å„¿å­çš„åŒºé—´ï¼Œå®Œå…¨åœ¨å³å„¿å­çš„åŒºé—´ã€‚å› ä¸º&lt;span class=&quot;math inline&quot;&gt;\(r\)&lt;/span&gt;è¦æ»¡è¶³æœ€é å·¦ï¼Œæ‰€ä»¥ä¾æ¬¡å°è¯•ä¸Šé¢ä¸‰ç§å¯èƒ½æƒ…å†µã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    
      <category term="POJ" scheme="http://lvzhh.github.io/tags/POJ/"/>
    
  </entry>
  
  <entry>
    <title>POJ 2528 Mayor&#39;s posters</title>
    <link href="http://lvzhh.github.io/2018/06/POJ-2528-Mayor-s-posters/"/>
    <id>http://lvzhh.github.io/2018/06/POJ-2528-Mayor-s-posters/</id>
    <published>2018-06-07T16:55:03.000Z</published>
    <updated>2018-06-08T09:56:44.481Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯å¼ æµ·æŠ¥çš„åæ ‡èŒƒå›´<span class="math inline">\(0&lt;=l_i&lt;=r_i&lt;=10^7\)</span>ï¼Œçº¿æ®µæ ‘ç»´æŠ¤<span class="math inline">\(10^7\)</span>é•¿åº¦çš„åºåˆ—ä¼šçˆ†å†…å­˜ã€‚ä½†æ˜¯æµ·æŠ¥çš„æ•°é‡<span class="math inline">\(1 &lt;= n &lt;= 10000\)</span>ï¼Œä¹Ÿå°±æ˜¯çº¿æ®µæ ‘éœ€è¦æ›´æ–°çš„åŒºé—´ç«¯ç‚¹æ•°&lt;=20000ä¸ªï¼Œå› æ­¤å¯¹åæ ‡è¿›è¡Œç¦»æ•£åŒ–å¤„ç†ã€‚</p><p><a href="https://blog.csdn.net/Chrome_matrix_68/article/details/52154139" target="_blank" rel="noopener">è¿™ç¯‡åšå®¢</a>ä¸­æŒ‡å‡ºæ™®é€šçš„ç¦»æ•£åŒ–åœ¨è¿™ä¸ªé¢˜ä¸­æœ‰äº›é—®é¢˜ï¼Œè€ƒè™‘ä¸‹é¢è¿™ç»„æ•°æ®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 10</span><br><span class="line">1 4</span><br><span class="line">6 10</span><br></pre></td></tr></table></figure></p><p>ç¦»æ•£åŒ–åæ ‡æ˜ å°„åï¼Œ1-&gt;0ï¼Œ4-&gt;1ï¼Œ6-&gt;2ï¼Œ10-&gt;3ï¼Œæ›´æ–°å®Œåï¼ŒåŒºé—´[0,1],[2,3]è¢«åé¢ä¸¤å¼ æµ·æŠ¥è¦†ç›–ï¼Œå¯è§çš„æµ·æŠ¥æ•°ä¸º2ã€‚è€Œç¬¬ä¸€å¼ æµ·æŠ¥åœ¨åŸå§‹åŒºé—´[5,5]ä»ç„¶å¯è§ï¼Œç­”æ¡ˆåº”ä¸º3.</p><p>å› æ­¤ï¼Œå¦‚æœæ’åºåç›¸é‚»ä¸¤åæ ‡<span class="math inline">\(x_i,x_{i+1}\)</span>çš„å·®&gt;1ï¼Œåˆ™éœ€è¦åœ¨ä¸¤è€…ä¹‹é—´æ’å…¥ä¸€ä¸ªæ•°ï¼Œä½¿å¾—ç¦»æ•£å<span class="math inline">\(x_i,x_{i+1}\)</span>çš„å·®ä¹Ÿ&gt;1ã€‚åŒºé—´<span class="math inline">\((x_i,x_{i+1})\)</span>ä¸­å¯è§çš„æµ·æŠ¥æ•°ä¸º0æˆ–1ï¼Œä»…éœ€è¦æ’å…¥ä¸€ä¸ªæ•°ï¼Œå…¶ä¿¡æ¯åœ¨æœ€ç»ˆå°±èƒ½å¤Ÿè¢«ç»Ÿè®¡åˆ°ã€‚<br><a id="more"></a><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">10000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ST_SIZE = <span class="number">1</span> &lt;&lt; <span class="number">17</span>; <span class="comment">// 40000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> L[MAX_N], R[MAX_N];</span><br><span class="line"><span class="keyword">int</span> change[ST_SIZE];</span><br><span class="line"><span class="keyword">bool</span> visible[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">memset</span>(change, <span class="number">0</span>, <span class="keyword">sizeof</span>(change));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b &lt;= l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &lt;= l &amp;&amp; r &lt;= b) &#123;</span><br><span class="line">    change[k] = c;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (change[k]) &#123;</span><br><span class="line">      change[lc] = change[k];</span><br><span class="line">      change[rc] = change[k];</span><br><span class="line">      change[k] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    update(lc, l, m, a, b, c);</span><br><span class="line">    update(rc, m, r, a, b, c);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (change[k]) visible[change[k]] = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (change[k]) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      query(<span class="number">2</span> * k + <span class="number">1</span>, l, (l + r) / <span class="number">2</span>);</span><br><span class="line">      query(<span class="number">2</span> * k + <span class="number">2</span>, (l + r) / <span class="number">2</span>, r);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> T;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">  <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; p;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, L + i, R + i);</span><br><span class="line">      p.push_back(L[i]);</span><br><span class="line">      p.push_back(R[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(p.begin(), p.end());</span><br><span class="line">    p.erase(unique(p.begin(), p.end()), p.end());</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = p.size() - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">      <span class="keyword">if</span> (p[i] != p[i - <span class="number">1</span>] + <span class="number">1</span>) p.push_back(p[i - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(p.begin(), p.end());</span><br><span class="line"></span><br><span class="line">    init(<span class="number">0</span>, <span class="number">0</span>, p.size());</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> l = lower_bound(p.begin(), p.end(), L[i]) - p.begin();</span><br><span class="line">      <span class="keyword">int</span> r = lower_bound(p.begin(), p.end(), R[i]) - p.begin();</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, p.size(), l, r + <span class="number">1</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(visible, <span class="number">0</span>, <span class="keyword">sizeof</span>(visible));</span><br><span class="line">    query(<span class="number">0</span>, <span class="number">0</span>, p.size());</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (visible[i]) res++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¯å¼ æµ·æŠ¥çš„åæ ‡èŒƒå›´&lt;span class=&quot;math inline&quot;&gt;\(0&amp;lt;=l_i&amp;lt;=r_i&amp;lt;=10^7\)&lt;/span&gt;ï¼Œçº¿æ®µæ ‘ç»´æŠ¤&lt;span class=&quot;math inline&quot;&gt;\(10^7\)&lt;/span&gt;é•¿åº¦çš„åºåˆ—ä¼šçˆ†å†…å­˜ã€‚ä½†æ˜¯æµ·æŠ¥çš„æ•°é‡&lt;span class=&quot;math inline&quot;&gt;\(1 &amp;lt;= n &amp;lt;= 10000\)&lt;/span&gt;ï¼Œä¹Ÿå°±æ˜¯çº¿æ®µæ ‘éœ€è¦æ›´æ–°çš„åŒºé—´ç«¯ç‚¹æ•°&amp;lt;=20000ä¸ªï¼Œå› æ­¤å¯¹åæ ‡è¿›è¡Œç¦»æ•£åŒ–å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/Chrome_matrix_68/article/details/52154139&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è¿™ç¯‡åšå®¢&lt;/a&gt;ä¸­æŒ‡å‡ºæ™®é€šçš„ç¦»æ•£åŒ–åœ¨è¿™ä¸ªé¢˜ä¸­æœ‰äº›é—®é¢˜ï¼Œè€ƒè™‘ä¸‹é¢è¿™ç»„æ•°æ®&lt;br&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6 10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç¦»æ•£åŒ–åæ ‡æ˜ å°„åï¼Œ1-&amp;gt;0ï¼Œ4-&amp;gt;1ï¼Œ6-&amp;gt;2ï¼Œ10-&amp;gt;3ï¼Œæ›´æ–°å®Œåï¼ŒåŒºé—´[0,1],[2,3]è¢«åé¢ä¸¤å¼ æµ·æŠ¥è¦†ç›–ï¼Œå¯è§çš„æµ·æŠ¥æ•°ä¸º2ã€‚è€Œç¬¬ä¸€å¼ æµ·æŠ¥åœ¨åŸå§‹åŒºé—´[5,5]ä»ç„¶å¯è§ï¼Œç­”æ¡ˆåº”ä¸º3.&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå¦‚æœæ’åºåç›¸é‚»ä¸¤åæ ‡&lt;span class=&quot;math inline&quot;&gt;\(x_i,x_{i+1}\)&lt;/span&gt;çš„å·®&amp;gt;1ï¼Œåˆ™éœ€è¦åœ¨ä¸¤è€…ä¹‹é—´æ’å…¥ä¸€ä¸ªæ•°ï¼Œä½¿å¾—ç¦»æ•£å&lt;span class=&quot;math inline&quot;&gt;\(x_i,x_{i+1}\)&lt;/span&gt;çš„å·®ä¹Ÿ&amp;gt;1ã€‚åŒºé—´&lt;span class=&quot;math inline&quot;&gt;\((x_i,x_{i+1})\)&lt;/span&gt;ä¸­å¯è§çš„æµ·æŠ¥æ•°ä¸º0æˆ–1ï¼Œä»…éœ€è¦æ’å…¥ä¸€ä¸ªæ•°ï¼Œå…¶ä¿¡æ¯åœ¨æœ€ç»ˆå°±èƒ½å¤Ÿè¢«ç»Ÿè®¡åˆ°ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    
      <category term="kuangbin#çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/tags/kuangbin-%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
      <category term="POJ" scheme="http://lvzhh.github.io/tags/POJ/"/>
    
  </entry>
  
  <entry>
    <title>POJ 3225 Help with Intervals</title>
    <link href="http://lvzhh.github.io/2018/06/POJ-3225-Help-with-Intervals/"/>
    <id>http://lvzhh.github.io/2018/06/POJ-3225-Help-with-Intervals/</id>
    <published>2018-06-06T15:36:40.000Z</published>
    <updated>2018-06-08T05:54:57.932Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šå®Œæˆ5ç§é›†åˆæ“ä½œï¼Œè¾“å‡ºæœ€ç»ˆçš„é›†åˆã€‚</p><p>è‹¥æŠŠé›†åˆ<code>S</code>ç”¨0\1åºåˆ—æ¥è¡¨ç¤ºï¼Œåˆ™é›†åˆæ“ä½œå¯è½¬åŒ–ä¸ºå¯¹è¿ç»­å­åºåˆ—ï¼ˆåŒºé—´ï¼‰çš„æ“ä½œã€‚</p><p><span class="math inline">\(T^C\)</span>è¡¨ç¤º<span class="math inline">\(T\)</span>çš„è¡¥é›†</p><table><tbody><tr class="odd"><td><span class="math inline">\(S \cup T\)</span></td><td><span class="math inline">\(T\)</span>åŒºé—´ç½®1</td></tr><tr class="even"><td><span class="math inline">\(S \cap T\)</span></td><td><span class="math inline">\(T^C\)</span>åŒºé—´ç½®0</td></tr><tr class="odd"><td><span class="math inline">\(S - T\)</span></td><td><span class="math inline">\(T\)</span>åŒºé—´ç½®0</td></tr><tr class="even"><td><span class="math inline">\(T - S\)</span></td><td><span class="math inline">\(S\)</span>å–åï¼Œ<span class="math inline">\(T^C\)</span>åŒºé—´ç½®0</td></tr><tr class="odd"><td><span class="math inline">\(S \oplus T\)</span></td><td><span class="math inline">\(T\)</span>åŒºé—´å–å</td></tr></tbody></table><p>åŒºé—´æ“ä½œæœ‰ä¸¤ç§ï¼Œç½®0\1å’Œå–åã€‚ç½®0\1å¯ä»¥ç”¨çº¿æ®µæ ‘æ‰“lazy tagæ¥å®ç°ï¼Œå–åä¹Ÿå¯ä»¥ç”¨æ‰“æ ‡è®°æ¥å®ç°ã€‚è¿™é‡Œåªç”¨äº†ä¸€ä¸ªæ ‡è®°ï¼Œæ ‡è®°çš„ç§ç±»æœ‰æ— æ ‡è®°ã€0ã€1ã€å–åå››ç§ï¼Œæ‰“0\1æ ‡è®°æ—¶ä¸éœ€è¦è€ƒè™‘ä¹‹å‰æ ‡è®°çš„ç±»å‹ï¼Œæ‰“å–åæ ‡è®°æ—¶ï¼Œè‹¥ä¹‹å‰ä¸º0\1ï¼Œåˆ™æ ‡è®°å˜ä¸º1\0ï¼Œè‹¥ä¹‹å‰ä¸ºå–åï¼Œåˆ™å˜ä¸ºæ— æ ‡è®°ï¼Œè‹¥ä¹‹å‰ä¸ºæ— æ ‡è®°ï¼Œåˆ™å˜ä¸ºå–åæ ‡è®°ã€‚</p><p>æœ€åï¼Œåœ¨å®Œæˆæ‰€æœ‰æ“ä½œåï¼Œä¸‹ä¼ æ‰€æœ‰æ ‡è®°ã€‚<br><a id="more"></a><br>å¼€åŒºé—´ã€é—­åŒºé—´çš„å¤„ç†ï¼šæŠŠé›†åˆåºåˆ—æ‰©å……ä¸ºåŸæ¥çš„3å€ï¼Œå¯¹äºæ•°aï¼š</p><table><tbody><tr class="odd"><td><span class="math inline">\(3a\)</span></td><td><code>)</code></td></tr><tr class="even"><td><span class="math inline">\(3a+1\)</span></td><td><code>]</code>or<code>[</code></td></tr><tr class="odd"><td><span class="math inline">\(3a+2\)</span></td><td><code>(</code></td></tr></tbody></table><p>è¿™æ ·ï¼Œ<code>(a,b)</code>åŒ…å«åœ¨<code>[a,b]</code>ä¸­ï¼Œé›†åˆå–è¡¥æ“ä½œä¹Ÿæ¯”è¾ƒç›´è§‚ã€‚</p><p><a href="http://www.cnblogs.com/kuangbin/archive/2013/04/10/3012986.html" target="_blank" rel="noopener">è¿™ç¯‡åšå®¢</a>å¯¹å¼€é—­åŒºé—´çš„å¤„ç†ä¸ºæ‰©å……åºåˆ—ä¸ºåŸæ¥çš„2å€ï¼Œå¯¹äºæ•°aï¼š</p><table><tbody><tr class="odd"><td><span class="math inline">\(2a-1\)</span></td><td><code>)</code></td></tr><tr class="even"><td><span class="math inline">\(2a\)</span></td><td><code>]</code>or<code>[</code></td></tr><tr class="odd"><td><span class="math inline">\(2a+1\)</span></td><td><code>(</code></td></tr></tbody></table><p><span class="math inline">\(2a-1\)</span>æ—¢è¡¨ç¤º<code>a)</code>ï¼Œä¹Ÿè¡¨ç¤º<code>(a-1</code>ã€‚</p><p>å‘ï¼šç¬¬ä¸€æ¬¡è§ç”¨å¼€é—­åŒºé—´è¡¨ç¤ºå®æ•°é›†åˆï¼Œå¼€å§‹è¿˜ä»¥ä¸ºåŒºé—´è¡¨ç¤ºçš„æ˜¯æ•´æ•°é›†åˆï¼Œçœ‹ç€æ ·ä¾‹è¾“å‡º<code>(2,3)</code>ä¸€è„¸æ‡µâ€¦</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = (<span class="number">65535</span> + <span class="number">1</span>) * <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ST_SIZE = <span class="number">1</span> &lt;&lt; <span class="number">19</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> S[M];</span><br><span class="line"><span class="keyword">int</span> tag[ST_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i, j;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; M &amp;&amp; S[i] == <span class="number">0</span>; i++);</span><br><span class="line">  <span class="keyword">if</span> (i &gt;= M) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"empty set\n"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">bool</span> first = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; M) &#123;</span><br><span class="line">      <span class="keyword">for</span> (j = i; j + <span class="number">1</span> &lt; M &amp;&amp; S[j + <span class="number">1</span>] == <span class="number">1</span>; j++);</span><br><span class="line">      <span class="keyword">if</span> (first) &#123;</span><br><span class="line">        first = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%c%d,%d%c"</span>, i % <span class="number">3</span> == <span class="number">2</span> ? <span class="string">'('</span> : <span class="string">'['</span>, i / <span class="number">3</span>, j / <span class="number">3</span>, j % <span class="number">3</span> == <span class="number">0</span> ? <span class="string">')'</span> : <span class="string">']'</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">" %c%d,%d%c"</span>, i % <span class="number">3</span> == <span class="number">2</span> ? <span class="string">'('</span> : <span class="string">'['</span>, i / <span class="number">3</span>, j / <span class="number">3</span>, j % <span class="number">3</span> == <span class="number">0</span> ? <span class="string">')'</span> : <span class="string">']'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (i = j + <span class="number">1</span>; i &lt; M &amp;&amp; S[i] == <span class="number">0</span>; i++);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_tag</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">0</span> || x == <span class="number">1</span>) &#123;</span><br><span class="line">    tag[k] = x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (tag[k] == <span class="number">-1</span>) tag[k] = x;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (tag[k] == <span class="number">0</span> || tag[k] == <span class="number">1</span>) tag[k] ^= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> tag[k] = <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> lc, <span class="keyword">int</span> rc)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (tag[k] != <span class="number">-1</span>) &#123;</span><br><span class="line">    set_tag(lc, tag[k]);</span><br><span class="line">    set_tag(rc, tag[k]);</span><br><span class="line">    tag[k] = <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (b &lt;= l || r &lt;= a) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &lt;= l &amp;&amp; r &lt;= b) &#123;</span><br><span class="line">    set_tag(k, x);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    push_down(k, lc, rc);</span><br><span class="line">    update(lc, l, m, a, b, x);</span><br><span class="line">    update(rc, m, r, a, b, x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l == r - <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (tag[k] == <span class="number">0</span> || tag[k] == <span class="number">-1</span>) &#123;</span><br><span class="line">      S[l] = <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      S[l] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> lc = <span class="number">2</span> * k + <span class="number">1</span>, rc = <span class="number">2</span> * k + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">    push_down(k, lc, rc);</span><br><span class="line">    down(lc, l, m);</span><br><span class="line">    down(rc, m, r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">memset</span>(S, <span class="number">0</span>, <span class="keyword">sizeof</span>(S));</span><br><span class="line">  <span class="built_in">memset</span>(tag, <span class="number">-1</span>, <span class="keyword">sizeof</span>(tag));</span><br><span class="line">  <span class="keyword">char</span> X, lb, rb;</span><br><span class="line">  <span class="keyword">int</span> a, b;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">" %c %c%d%*c%d %c"</span>, &amp;X, &amp;lb, &amp;a, &amp;b, &amp;rb) != EOF) &#123;</span><br><span class="line">    a = lb == <span class="string">'('</span> ? <span class="number">3</span> * a + <span class="number">2</span> : <span class="number">3</span> * a + <span class="number">1</span>;</span><br><span class="line">    b = rb == <span class="string">')'</span> ? <span class="number">3</span> * b : <span class="number">3</span> * b + <span class="number">1</span>;</span><br><span class="line">    b++; <span class="comment">// [a, b)</span></span><br><span class="line">    <span class="keyword">if</span> (X == <span class="string">'U'</span>) &#123;</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, a, b, <span class="number">1</span>);</span><br><span class="line"><span class="comment">//      for (int i = a; i &lt; b; i++) </span></span><br><span class="line"><span class="comment">//        S[i] = 1;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (X == <span class="string">'I'</span>) &#123;</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, <span class="number">0</span>, a, <span class="number">0</span>);</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, b, M, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//      for (int i = 0; i &lt; a; i++) </span></span><br><span class="line"><span class="comment">//        S[i] = 0;</span></span><br><span class="line"><span class="comment">//      for (int i = b; i &lt; M; i++) </span></span><br><span class="line"><span class="comment">//        S[i] = 0;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (X == <span class="string">'D'</span>) &#123;</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, a, b, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//      for (int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="comment">//        S[i] = 0;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (X == <span class="string">'C'</span>) &#123;</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, <span class="number">0</span>, M, <span class="number">2</span>);</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, <span class="number">0</span>, a, <span class="number">0</span>);</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, b, M, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//      for (int i = 0; i &lt; M; i++)</span></span><br><span class="line"><span class="comment">//        S[i] ^= 1;</span></span><br><span class="line"><span class="comment">//      for (int i = 0; i &lt; a; i++) </span></span><br><span class="line"><span class="comment">//        S[i] = 0;</span></span><br><span class="line"><span class="comment">//      for (int i = b; i &lt; M; i++) </span></span><br><span class="line"><span class="comment">//        S[i] = 0;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      update(<span class="number">0</span>, <span class="number">0</span>, M, a, b, <span class="number">2</span>);</span><br><span class="line"><span class="comment">//      for (int i = a; i &lt; b; i++)</span></span><br><span class="line"><span class="comment">//        S[i] ^= 1;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  down(<span class="number">0</span>, <span class="number">0</span>, M);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> i, j;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; M &amp;&amp; S[i] == <span class="number">0</span>; i++);</span><br><span class="line">  <span class="keyword">if</span> (i &gt;= M) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"empty set\n"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">bool</span> first = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; M) &#123;</span><br><span class="line">      <span class="keyword">for</span> (j = i; j + <span class="number">1</span> &lt; M &amp;&amp; S[j + <span class="number">1</span>] == <span class="number">1</span>; j++);</span><br><span class="line">      <span class="keyword">if</span> (first) &#123;</span><br><span class="line">        first = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%c%d,%d%c"</span>, i % <span class="number">3</span> == <span class="number">2</span> ? <span class="string">'('</span> : <span class="string">'['</span>, i / <span class="number">3</span>, j / <span class="number">3</span>, j % <span class="number">3</span> == <span class="number">0</span> ? <span class="string">')'</span> : <span class="string">']'</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">" %c%d,%d%c"</span>, i % <span class="number">3</span> == <span class="number">2</span> ? <span class="string">'('</span> : <span class="string">'['</span>, i / <span class="number">3</span>, j / <span class="number">3</span>, j % <span class="number">3</span> == <span class="number">0</span> ? <span class="string">')'</span> : <span class="string">']'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (i = j + <span class="number">1</span>; i &lt; M &amp;&amp; S[i] == <span class="number">0</span>; i++);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šå®Œæˆ5ç§é›†åˆæ“ä½œï¼Œè¾“å‡ºæœ€ç»ˆçš„é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;è‹¥æŠŠé›†åˆ&lt;code&gt;S&lt;/code&gt;ç”¨0\1åºåˆ—æ¥è¡¨ç¤ºï¼Œåˆ™é›†åˆæ“ä½œå¯è½¬åŒ–ä¸ºå¯¹è¿ç»­å­åºåˆ—ï¼ˆåŒºé—´ï¼‰çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math inline&quot;&gt;\(T^C\)&lt;/span&gt;è¡¨ç¤º&lt;span class=&quot;math inline&quot;&gt;\(T\)&lt;/span&gt;çš„è¡¥é›†&lt;/p&gt;
&lt;table&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(S \cup T\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(T\)&lt;/span&gt;åŒºé—´ç½®1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(S \cap T\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(T^C\)&lt;/span&gt;åŒºé—´ç½®0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(S - T\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(T\)&lt;/span&gt;åŒºé—´ç½®0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(T - S\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(S\)&lt;/span&gt;å–åï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(T^C\)&lt;/span&gt;åŒºé—´ç½®0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(S \oplus T\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&quot;math inline&quot;&gt;\(T\)&lt;/span&gt;åŒºé—´å–å&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åŒºé—´æ“ä½œæœ‰ä¸¤ç§ï¼Œç½®0\1å’Œå–åã€‚ç½®0\1å¯ä»¥ç”¨çº¿æ®µæ ‘æ‰“lazy tagæ¥å®ç°ï¼Œå–åä¹Ÿå¯ä»¥ç”¨æ‰“æ ‡è®°æ¥å®ç°ã€‚è¿™é‡Œåªç”¨äº†ä¸€ä¸ªæ ‡è®°ï¼Œæ ‡è®°çš„ç§ç±»æœ‰æ— æ ‡è®°ã€0ã€1ã€å–åå››ç§ï¼Œæ‰“0\1æ ‡è®°æ—¶ä¸éœ€è¦è€ƒè™‘ä¹‹å‰æ ‡è®°çš„ç±»å‹ï¼Œæ‰“å–åæ ‡è®°æ—¶ï¼Œè‹¥ä¹‹å‰ä¸º0\1ï¼Œåˆ™æ ‡è®°å˜ä¸º1\0ï¼Œè‹¥ä¹‹å‰ä¸ºå–åï¼Œåˆ™å˜ä¸ºæ— æ ‡è®°ï¼Œè‹¥ä¹‹å‰ä¸ºæ— æ ‡è®°ï¼Œåˆ™å˜ä¸ºå–åæ ‡è®°ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œåœ¨å®Œæˆæ‰€æœ‰æ“ä½œåï¼Œä¸‹ä¼ æ‰€æœ‰æ ‡è®°ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="çº¿æ®µæ ‘" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    
      <category term="POJ" scheme="http://lvzhh.github.io/tags/POJ/"/>
    
  </entry>
  
  <entry>
    <title>UVA 816 Abbott&#39;s Revenge</title>
    <link href="http://lvzhh.github.io/2018/06/UVA-816-Abbott-s-Revenge/"/>
    <id>http://lvzhh.github.io/2018/06/UVA-816-Abbott-s-Revenge/</id>
    <published>2018-06-06T15:18:39.000Z</published>
    <updated>2018-06-06T15:59:59.585Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼šè¿·å®«ä¸­çš„ç‚¹ä»ä¸åŒæ–¹å‘è¿›å…¥æ—¶æœ‰ä¸åŒçš„è½¬å‘ï¼Œæ±‚èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯ã€‚</p><p>æ¯ä¸ªç‚¹é™¤äº†åæ ‡xï¼Œyå¤–ï¼Œè¿˜æœ‰æ–¹å‘å±æ€§dã€‚ç”¨BFSæ±‚æœ€çŸ­è·¯ï¼Œå­˜å‚¨BFSæ ‘ä¸­ç»“ç‚¹çš„çˆ¶ç»“ç‚¹ç”¨äºè·¯å¾„è¿˜åŸã€‚</p><p>å­¦ä¹ äº†ä¸€ç§ç”¨<code>strchr</code>æ¥å¾—åˆ°å­—ç¬¦idçš„å†™æ³•ã€‚</p><a id="more"></a><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; Pair;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">9</span> + <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sx, sy, tx, ty;</span><br><span class="line"><span class="built_in">string</span> sd;</span><br><span class="line"><span class="keyword">int</span> maze[MAX_N][MAX_N][<span class="number">4</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;Pair&gt; ans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dX[<span class="number">4</span>] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;, dY[<span class="number">4</span>] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span> <span class="keyword">int</span> x, y, d; &#125;;</span><br><span class="line">Point pre[MAX_N][MAX_N][<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* dir = <span class="string">"SWNE"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* adir = <span class="string">"LFR"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">did</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">strchr</span>(dir, c) - dir; &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">adid</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">strchr</span>(adir, c) - adir; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">queue</span>&lt;Point&gt; que;</span><br><span class="line">  <span class="keyword">int</span> x, y, d, fd = did(sd[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">int</span> nx = sx + dX[fd], ny = sy + dY[fd];</span><br><span class="line">  pre[nx][ny][fd] = (Point) &#123;sx, sy, fd&#125;;</span><br><span class="line">  que.push((Point) &#123;nx, ny, fd&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (!que.empty()) &#123;</span><br><span class="line">    Point p = que.front(); que.pop();</span><br><span class="line">    x = p.x, y = p.y, d = p.d;</span><br><span class="line">    <span class="keyword">if</span> (x == tx &amp;&amp; y == ty) <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!((maze[x][y][d] &gt;&gt; i) &amp; <span class="number">1</span>)) <span class="keyword">continue</span>;</span><br><span class="line">      fd = d;</span><br><span class="line">      <span class="keyword">if</span> (i == <span class="number">0</span>) fd = (fd - <span class="number">1</span> + <span class="number">4</span>) % <span class="number">4</span>;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">2</span>) fd = (fd + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">int</span> nx = x + dX[fd], ny = y + dY[fd];</span><br><span class="line">      Point&amp; pp = pre[nx][ny][fd];</span><br><span class="line">      <span class="keyword">if</span> (pp.x == <span class="number">0</span> &amp;&amp; pp.y == <span class="number">0</span> &amp;&amp; pp.d == <span class="number">0</span>) &#123;</span><br><span class="line">        pp = (Point) &#123;x, y, d&#125;;</span><br><span class="line">        que.push((Point) &#123;nx, ny, fd&#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    Point pp = pre[tx][ty][i];</span><br><span class="line">    <span class="keyword">if</span> (pp.x == <span class="number">0</span> &amp;&amp; pp.y == <span class="number">0</span> &amp;&amp; pp.d == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">    Point p = (Point) &#123;tx, ty, i&#125;;</span><br><span class="line">    <span class="keyword">while</span> (p.x != sx || p.y != sy) &#123;</span><br><span class="line">      ans.push_back(Pair(p.x, p.y));</span><br><span class="line">      p = pre[p.x][p.y][p.d];</span><br><span class="line">    &#125;</span><br><span class="line">    ans.push_back(Pair(sx, sy));</span><br><span class="line">    reverse(ans.begin(), ans.end());</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">string</span> name, ad;</span><br><span class="line">  <span class="keyword">int</span> x, y;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; name &amp;&amp; name != <span class="string">"END"</span>) &#123;</span><br><span class="line">    <span class="built_in">memset</span>(maze, <span class="number">0</span>, <span class="keyword">sizeof</span>(maze));</span><br><span class="line">    <span class="built_in">memset</span>(pre, <span class="number">0</span>, <span class="keyword">sizeof</span>(pre));</span><br><span class="line">    ans.clear();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; sx &gt;&gt; sy &gt;&gt; sd &gt;&gt; tx &gt;&gt; ty;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; x &amp;&amp; x) &#123;</span><br><span class="line">      <span class="built_in">cin</span> &gt;&gt; y;</span><br><span class="line">      <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; ad &amp;&amp; ad != <span class="string">"*"</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; ad.size(); i++) &#123;</span><br><span class="line">          maze[x][y][did(ad[<span class="number">0</span>])] |= <span class="number">1</span> &lt;&lt; adid(ad[i]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> res = bfs();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">if</span> (res) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">10</span> == <span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"  "</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"("</span> &lt;&lt; ans[i].first &lt;&lt; <span class="string">","</span> &lt;&lt; ans[i].second &lt;&lt; <span class="string">")"</span>;</span><br><span class="line">        <span class="keyword">if</span> (i != ans.size() - <span class="number">1</span>)</span><br><span class="line">          <span class="built_in">cout</span> &lt;&lt; ((i + <span class="number">1</span>) % <span class="number">10</span> == <span class="number">0</span> ? <span class="string">'\n'</span> : <span class="string">' '</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">"  No Solution Possible"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼šè¿·å®«ä¸­çš„ç‚¹ä»ä¸åŒæ–¹å‘è¿›å…¥æ—¶æœ‰ä¸åŒçš„è½¬å‘ï¼Œæ±‚èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªç‚¹é™¤äº†åæ ‡xï¼Œyå¤–ï¼Œè¿˜æœ‰æ–¹å‘å±æ€§dã€‚ç”¨BFSæ±‚æœ€çŸ­è·¯ï¼Œå­˜å‚¨BFSæ ‘ä¸­ç»“ç‚¹çš„çˆ¶ç»“ç‚¹ç”¨äºè·¯å¾„è¿˜åŸã€‚&lt;/p&gt;
&lt;p&gt;å­¦ä¹ äº†ä¸€ç§ç”¨&lt;code&gt;strchr&lt;/code&gt;æ¥å¾—åˆ°å­—ç¬¦idçš„å†™æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æœç´¢" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/"/>
    
      <category term="BFS" scheme="http://lvzhh.github.io/categories/%E6%90%9C%E7%B4%A2/BFS/"/>
    
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
  </entry>
  
  <entry>
    <title>memo</title>
    <link href="http://lvzhh.github.io/2018/05/memo/"/>
    <id>http://lvzhh.github.io/2018/05/memo/</id>
    <published>2018-05-27T10:03:03.000Z</published>
    <updated>2018-06-18T03:32:39.853Z</updated>
    
    <content type="html"><![CDATA[<ol type="1"><li>è¾“å…¥è¾“å‡º<br>printfä¼šæŠŠfloatéšå¼è½¬æ¢ä¸ºdoubleï¼Œæ‰€ä»¥ä¸¤è€…çš„specifieréƒ½å¯ä»¥æ˜¯<code>'%f'</code></li></ol><table><thead><tr class="header"><th>function</th><th style="text-align: center;">int</th><th style="text-align: right;">long long</th></tr></thead><tbody><tr class="odd"><td><code>scanf</code></td><td style="text-align: center;"><code>'%d'</code></td><td style="text-align: right;"><code>'%lld'</code></td></tr><tr class="even"><td><code>printf</code></td><td style="text-align: center;"><code>'%d'</code></td><td style="text-align: right;"><code>'%lld'</code></td></tr></tbody></table><p>read a single character ignoring whitespace<br><code>scanf(&quot; %c&quot;, &amp;c)</code> place a whitespace before <code>%c</code><br><a id="more"></a></p><p>use <code>sscanf</code> to read from a C string<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> s[<span class="number">100</span>];</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, s); <span class="comment">// "(10,RL)"</span></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">sscanf</span>(&amp;s[<span class="number">1</span>], <span class="string">"%d"</span>, &amp;n); <span class="comment">// n = 10</span></span><br></pre></td></tr></table></figure></p><p>read a whole line<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> s;</span><br><span class="line">getline(<span class="built_in">cin</span>, s);</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[<span class="number">100</span>];</span><br><span class="line"><span class="built_in">cin</span>.getline(s, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[<span class="number">100</span>];</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%[^\n]%*c"</span>, s);</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[<span class="number">100</span>];</span><br><span class="line"><span class="comment">// no gets</span></span><br><span class="line"><span class="comment">// gets(s);</span></span><br><span class="line"><span class="comment">// fgets stores '\n' into s</span></span><br><span class="line">fgets(s, <span class="number">100</span>, <span class="built_in">stdin</span>);</span><br></pre></td></tr></table></figure></p><p>stringstream æ¸…ç©º<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stringstream</span> ss;</span><br><span class="line">ss.str(<span class="string">""</span>); <span class="comment">// clear the content</span></span><br><span class="line">ss.clear(); <span class="comment">// set a new value for stream's internal error state flags</span></span><br></pre></td></tr></table></figure></p><p>from <a href="https://stackoverflow.com/questions/2848087/how-to-clear-stringstream" target="_blank" rel="noopener">stackoverflow</a></p><blockquote><p>Typically to â€˜resetâ€™ a stringstream you need to both reset the underlying sequence to an empty string with str and to clear any fail and eof flags with clear.<br>parser.str( std::string() );<br>parser.clear();<br>Typically what happens is that the first &gt;&gt; reaches the end of the string and sets the eof bit, although it successfully parses the first short. Operations on the stream after this immediately fail because the streamâ€™s eof bit is still set.</p></blockquote><ol start="2" type="1"><li><p>bit operation<br>attention! <code>-1 &gt;&gt; 1 =&gt; -1 not 0</code><br>from <a href="http://train.usaco.org/usacotext2?a=apGwTk9Q5Nt&amp;S=binary" target="_blank" rel="noopener">USACO</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">This means that certain bit operations can exploit these definitions</span><br><span class="line">of negation and subtraction to yield interesting results, the proofs</span><br><span class="line">of which are left to the reader (see [a table of</span><br><span class="line">these](http://realtimecollisiondetection.net/blog/?p=78) offsite):</span><br><span class="line"></span><br><span class="line">             Binary</span><br><span class="line">Value        Sample             Meaning</span><br><span class="line">  x         00101100        the original x value</span><br><span class="line">x &amp; -x      00000100        extract lowest bit set</span><br><span class="line">x | -x      11111100        create mask for lowest-set-bit &amp; bits to its left</span><br><span class="line">x ^ -x      11111000        create mask bits to left of lowest bit set</span><br><span class="line">x &amp; (x-1)   00101000        strip off lowest bit set</span><br><span class="line">                            --&gt; useful to process words in O(bits set)</span><br><span class="line">                                instead of O(nbits in a word)</span><br><span class="line">x | (x-1)   00101111        fill in all bits below lowest bit set</span><br><span class="line">x ^ (x-1)   00000111        create mask for lowest-set-bit &amp; bits to its right</span><br><span class="line">~x &amp; (x-1)  00000011        create mask for bits to right of lowest bit set</span><br><span class="line">x | (x+1)   00101101        toggle lowest zero bit</span><br><span class="line">x / (x&amp;-x)  00001011        shift number right so lowest set bit is at bit 0</span><br><span class="line"></span><br><span class="line">There&apos;s no reason to memorize these expressions, but rather remember</span><br><span class="line">what&apos;s possible to refer back to this page for saving time when you</span><br><span class="line">processing bits.</span><br></pre></td></tr></table></figure></p></li><li><p>Graph<br>from <a href="http://train.usaco.org/usacotext2?a=0Ii18rWb43F&amp;S=graph" target="_blank" rel="noopener">USACO</a><br>é‚»æ¥çŸ©é˜µ<span class="math inline">\(A\)</span>çš„<span class="math inline">\(K\)</span>æ¬¡æ–¹çš„å…ƒç´ <span class="math inline">\(A^K(i,j)\)</span>è¡¨ç¤ºä»ç»“ç‚¹<span class="math inline">\(i\)</span>åˆ°ç»“ç‚¹<span class="math inline">\(j\)</span>æ°å¥½åŒ…å«<span class="math inline">\(K\)</span>æ¡è¾¹çš„è·¯å¾„çš„æ•°ç›®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">The sample undirected graph would be represented by the following adjacency matrix:</span><br><span class="line"></span><br><span class="line">    V1  V2  V3  V4  V5  V6</span><br><span class="line">V1  0   0   1   0   0   1</span><br><span class="line">V2  0   0   0   0   1   0</span><br><span class="line">V3  1   0   0   1   0   1</span><br><span class="line">V4  0   0   1   0   0   0</span><br><span class="line">V5  0   1   0   0   0   0</span><br><span class="line">V6  1   0   1   0   0   0</span><br><span class="line">It is sometimes helpful to use the fact that the (i,j) entry of the adjacency matrix raised to the k-th power gives the number of paths from vertex i to vertex j consisting of exactly k edges.</span><br></pre></td></tr></table></figure></p></li><li><p>Dynamic programming</p><blockquote><p>The basic idea is to try to avoid solving the same problem or subproblem twice.</p></blockquote></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;è¾“å…¥è¾“å‡º&lt;br&gt;
printfä¼šæŠŠfloatéšå¼è½¬æ¢ä¸ºdoubleï¼Œæ‰€ä»¥ä¸¤è€…çš„specifieréƒ½å¯ä»¥æ˜¯&lt;code&gt;&#39;%f&#39;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;function&lt;/th&gt;
&lt;th style=&quot;text-align: center;&quot;&gt;int&lt;/th&gt;
&lt;th style=&quot;text-align: right;&quot;&gt;long long&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;&lt;code&gt;scanf&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: center;&quot;&gt;&lt;code&gt;&#39;%d&#39;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;&lt;code&gt;&#39;%lld&#39;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;&lt;code&gt;printf&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: center;&quot;&gt;&lt;code&gt;&#39;%d&#39;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&quot;text-align: right;&quot;&gt;&lt;code&gt;&#39;%lld&#39;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;read a single character ignoring whitespace&lt;br&gt;
&lt;code&gt;scanf(&amp;quot; %c&amp;quot;, &amp;amp;c)&lt;/code&gt; place a whitespace before &lt;code&gt;%c&lt;/code&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Notes" scheme="http://lvzhh.github.io/categories/Notes/"/>
    
    
      <category term="memo" scheme="http://lvzhh.github.io/tags/memo/"/>
    
  </entry>
  
  <entry>
    <title>BBST</title>
    <link href="http://lvzhh.github.io/2018/05/BBST/"/>
    <id>http://lvzhh.github.io/2018/05/BBST/</id>
    <published>2018-05-24T08:57:21.000Z</published>
    <updated>2018-05-24T09:03:45.753Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å­¦ä¹ äº†ä¸€ä¸‹å„ç§BBSTï¼Œç®€å•æ€»ç»“ä¸€ä¸‹ã€‚</p><p>Splay Treeï¼šåŒºé—´æ“ä½œå¼ºæ— æ•Œâ€¦å¯¹[l,r)åŒºé—´çš„æ“ä½œï¼ŒæŠŠl-1ç»“ç‚¹splayåˆ°æ ‘æ ¹ï¼Œrç»“ç‚¹splayåˆ°æ ¹çš„å³ç»“ç‚¹ï¼Œåˆ™æ ¹çš„å³ç»“ç‚¹çš„å·¦å­æ ‘å°±æ˜¯åŒºé—´[l,r)ï¼Œç„¶åå¯¹è¿™æ£µå­æ ‘è¿›è¡Œæ“ä½œã€‚ä¸€ä¸ªsplayæ“ä½œçš„å‡æ‘Šå¤æ‚åº¦ä¸ºO(logn)ã€‚</p><p>å¸¸è§æ“ä½œï¼š[l,r)åŒºé—´æ¯ä¸ªæ•°åŠ aï¼Œæ¯ä¸ªç»“ç‚¹ç»´æŠ¤ä¸€ä¸ªåŠ çš„æ•°å€¼çš„lazy_tag</p><p>[l,r)åŒºé—´ç¿»è½¬ï¼Œæ¯ä¸ªç»“ç‚¹ç»´æŠ¤ä¸€ä¸ªè¡¨ç¤ºæ˜¯å¦ç¿»è½¬çš„æ ‡è®°</p><p>åœ¨ç¬¬kä¸ªå…ƒç´ åæ’å…¥å…ƒç´ æˆ–åŒºé—´ï¼Œè‹¥æ˜¯åŒºé—´ï¼Œåˆ™è¦å…ˆå»ºæˆä¸€æ£µbstï¼ŒæŠŠç¬¬kä¸ªç»“ç‚¹splayåˆ°æ ‘æ ¹ï¼Œç¬¬k+1ä¸ªç»“ç‚¹splayåˆ°æ ¹çš„å³å­©å­ï¼ŒæŠŠéœ€è¦æ’å…¥çš„å­æ ‘æ¥åˆ°å³å­©å­çš„å·¦å­©å­ã€‚</p><p>åˆ é™¤å…ƒç´ ï¼Œå¾—åˆ°åŒºé—´[l,r)åæ‘˜é™¤å­æ ‘ã€‚</p><p>å®ç°ï¼šåˆšå¼€å§‹çœ‹æ—¶è¿˜çº³é—·ä¸ºä»€ä¹ˆåœ¨å®ç°æ—¶éƒ½è¦å…ˆåŠ æ ¹èŠ‚ç‚¹ä»¥åŠæ ¹èŠ‚ç‚¹çš„å³å­©å­ï¼Œç„¶åæŠŠæ•´ä¸ªåŒºé—´å»ºåœ¨æ ¹çš„å³å­©å­çš„å·¦å­æ ‘ä¸Šã€‚åæ¥æ‰æƒ³åˆ°å¯¹äºæ•´ä¸ªåŒºé—´[1,N+1)ï¼Œè¿™ç§åšæ³•ç›¸å½“äºåœ¨å¼€å§‹å’Œç»“å°¾å„æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¯¹æ•´ä¸ªåŒºé—´è¿›è¡Œæ“ä½œåˆ™éœ€è¦æŠŠè¿™ä¸¤ä¸ªç»“ç‚¹splayåˆ°æ ‘æ ¹å’Œæ ¹çš„å³å­©å­ï¼Œæ‰èƒ½å¾—åˆ°æ•´ä¸ªåŒºé—´ã€‚åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ å‰å’Œæœ€åä¸€ä¸ªå…ƒç´ åæ’å…¥éƒ½éœ€è¦å€ŸåŠ©è¿™ä¸¤ä¸ªç»“ç‚¹ã€‚<br><a id="more"></a><br>ref: https://zhuanlan.zhihu.com/p/32090049?iam=5a347fde94eade0536f38c5e7434e822</p><p>http://blog.csdn.net/acm_cxlove/article/details/7800979</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line">HDU <span class="number">3487</span> Play With Chain</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 300010</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rrclc ch[ch[root][1]][0]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tot, root;</span><br><span class="line"><span class="keyword">int</span> size[MAX_N], val[MAX_N], par[MAX_N], ch[MAX_N][<span class="number">2</span>], rev[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="keyword">int</span> nums[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="comment">// update x from its two children</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  size[x] = size[ch[x][<span class="number">0</span>]] + size[ch[x][<span class="number">1</span>]] + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// make the lazy tag down</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (rev[x]) &#123;</span><br><span class="line">    swap(ch[x][<span class="number">0</span>], ch[x][<span class="number">1</span>]);</span><br><span class="line">    rev[ch[x][<span class="number">0</span>]] ^= <span class="number">1</span>;</span><br><span class="line">    rev[ch[x][<span class="number">1</span>]] ^= <span class="number">1</span>;</span><br><span class="line">    rev[x] ^= <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// x will be changed to the pos of new node</span></span><br><span class="line"><span class="comment">// v val, p par</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">new_node</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> v, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">  x = ++tot;</span><br><span class="line">  size[x] = <span class="number">1</span>;</span><br><span class="line">  val[x] = v;</span><br><span class="line">  par[x] = p;</span><br><span class="line">  ch[x][<span class="number">0</span>] = ch[x][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">  rev[x] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// x points to new node</span></span><br><span class="line"><span class="comment">// interval [l, r), par p</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">  new_node(x, nums[m], p);</span><br><span class="line">  build(ch[x][<span class="number">0</span>], l, m, x);</span><br><span class="line">  build(ch[x][<span class="number">1</span>], m + <span class="number">1</span>, r, x);</span><br><span class="line">  push_up(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  tot = root = <span class="number">0</span>;</span><br><span class="line">  size[<span class="number">0</span>] = val[<span class="number">0</span>] = par[<span class="number">0</span>] = ch[<span class="number">0</span>][<span class="number">0</span>] = ch[<span class="number">0</span>][<span class="number">1</span>] = rev[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  new_node(root, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  new_node(ch[root][<span class="number">1</span>], <span class="number">0</span>, root);</span><br><span class="line">  build(rrclc, <span class="number">1</span>, N + <span class="number">1</span>, ch[root][<span class="number">1</span>]);</span><br><span class="line">  push_up(ch[root][<span class="number">1</span>]);</span><br><span class="line">  push_up(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// level x up through rotation</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> p = par[x], g = par[p];</span><br><span class="line">  push_down(p); push_down(x);</span><br><span class="line">  <span class="keyword">int</span> tx = ch[p][<span class="number">0</span>] == x, tp = ch[g][<span class="number">0</span>] == p;</span><br><span class="line"></span><br><span class="line">  ch[p][!tx] = ch[x][tx];</span><br><span class="line">  <span class="keyword">if</span> (ch[x][tx]) par[ch[x][tx]] = p;</span><br><span class="line">  </span><br><span class="line">  ch[x][tx] = p; par[p] = x;</span><br><span class="line">  </span><br><span class="line">  par[x] = g;</span><br><span class="line">  <span class="keyword">if</span> (g) ch[g][!tp] = x;</span><br><span class="line"></span><br><span class="line">  push_up(p); push_up(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// splay node x up until its par is r</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> p = par[x];</span><br><span class="line">  <span class="keyword">while</span> (p != r) &#123;</span><br><span class="line">    <span class="keyword">int</span> g = par[p];</span><br><span class="line">    <span class="keyword">if</span> (g == r) rotate(x); <span class="comment">// two level</span></span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="comment">// three level</span></span><br><span class="line">      push_down(g); push_down(p);</span><br><span class="line">      <span class="keyword">int</span> tx = ch[p][<span class="number">0</span>] == x, tp = ch[g][<span class="number">0</span>] == p;</span><br><span class="line">      <span class="keyword">if</span> (tx == tp) rotate(p);</span><br><span class="line">      <span class="keyword">else</span> rotate(x);</span><br><span class="line">      rotate(x);</span><br><span class="line">    &#125;</span><br><span class="line">    p = par[x];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (r == <span class="number">0</span>) root = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// r is the root of subtree</span></span><br><span class="line"><span class="comment">// k: the order of inorder tranverse</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_kth</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  push_down(r);</span><br><span class="line">  <span class="keyword">int</span> ls = size[ch[r][<span class="number">0</span>]], rs = size[ch[r][<span class="number">1</span>]];</span><br><span class="line">  <span class="keyword">if</span> (ls == k) <span class="keyword">return</span> r;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; ls) <span class="keyword">return</span> get_kth(ch[r][<span class="number">0</span>], k);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">return</span> get_kth(ch[r][<span class="number">1</span>], k - ls - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cut</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">  splay(get_kth(root, l - <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, r + <span class="number">1</span>), root);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> cr = rrclc;</span><br><span class="line">  par[cr] = <span class="number">0</span>; rrclc = <span class="number">0</span>;</span><br><span class="line">  push_up(ch[root][<span class="number">1</span>]); push_up(root);</span><br><span class="line"></span><br><span class="line">  splay(get_kth(root, c), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, c + <span class="number">1</span>), root);</span><br><span class="line"></span><br><span class="line">  rrclc = cr; par[cr] = ch[root][<span class="number">1</span>];</span><br><span class="line">  push_up(ch[root][<span class="number">1</span>]); push_up(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">flip</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  splay(get_kth(root, l - <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, r + <span class="number">1</span>), root);</span><br><span class="line">  rev[rrclc] ^= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">level</span><span class="params">(<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!r) <span class="keyword">return</span>;</span><br><span class="line">  <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">  q.push(r);</span><br><span class="line">  <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">    <span class="keyword">int</span> s = q.size();</span><br><span class="line">    <span class="keyword">while</span> (s--) &#123;</span><br><span class="line">      <span class="keyword">int</span> x = q.front(); q.pop();</span><br><span class="line">      <span class="keyword">if</span> (ch[x][<span class="number">0</span>]) q.push(ch[x][<span class="number">0</span>]);</span><br><span class="line">      <span class="keyword">if</span> (ch[x][<span class="number">1</span>]) q.push(ch[x][<span class="number">1</span>]);</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d "</span>, val[x]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> first;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inorder</span><span class="params">(<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!r) <span class="keyword">return</span>;</span><br><span class="line">  push_down(r);</span><br><span class="line">  inorder(ch[r][<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">if</span> (first) &#123;</span><br><span class="line">    first = !first;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, val[r]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">" %d"</span>, val[r]);</span><br><span class="line">  &#125;</span><br><span class="line">  inorder(ch[r][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;N, &amp;M) &amp;&amp; N &gt; <span class="number">0</span> &amp;&amp; M &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) nums[i] = i;</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">while</span> (M--) &#123;</span><br><span class="line">      <span class="keyword">char</span> cmd[<span class="number">10</span>];</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%s"</span>, cmd);</span><br><span class="line">      <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'C'</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> a, b, c; <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        cut(a, b, c);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> a, b; <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b);</span><br><span class="line">        flip(a, b);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    splay(get_kth(root, <span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line">    splay(get_kth(root, N + <span class="number">1</span>), root);</span><br><span class="line">    </span><br><span class="line">    first = <span class="literal">true</span>;</span><br><span class="line">    inorder(rrclc);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// N = 10;</span></span><br><span class="line">  <span class="comment">// for (int i = 1; i &lt;= N; i++) nums[i] = i;</span></span><br><span class="line">  <span class="comment">// init();</span></span><br><span class="line">  <span class="comment">// splay(get_kth(root, 1), 0);</span></span><br><span class="line">  <span class="comment">// splay(get_kth(root, 5), root);</span></span><br><span class="line">  <span class="comment">// level(root);</span></span><br><span class="line">  <span class="comment">// inorder(root);</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line">POJ <span class="number">3580</span> SuperMemo</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 200005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rrclc ch[ch[root][1]][0]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1000000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tot, root;</span><br><span class="line"><span class="keyword">int</span> size[MAX_N], par[MAX_N], ch[MAX_N][<span class="number">2</span>], val[MAX_N];</span><br><span class="line"><span class="keyword">int</span> rev[MAX_N], add[MAX_N], mi[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="keyword">int</span> nums[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inorder</span><span class="params">(<span class="keyword">int</span> r)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">level</span><span class="params">(<span class="keyword">int</span> r)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> lc = ch[x][<span class="number">0</span>], rc = ch[x][<span class="number">1</span>];</span><br><span class="line">  size[x] = size[lc] + size[rc] + <span class="number">1</span>;</span><br><span class="line">  mi[x] = min(val[x], min(mi[lc], mi[rc]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (rev[x]) &#123;</span><br><span class="line">    swap(ch[x][<span class="number">0</span>], ch[x][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (ch[x][<span class="number">0</span>]) rev[ch[x][<span class="number">0</span>]] ^= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (ch[x][<span class="number">1</span>]) rev[ch[x][<span class="number">1</span>]] ^= <span class="number">1</span>;</span><br><span class="line">    rev[x] ^= <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (add[x] != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (ch[x][i]) &#123;</span><br><span class="line">        add[ch[x][i]] += add[x];</span><br><span class="line">        val[ch[x][i]] += add[x];</span><br><span class="line">        mi[ch[x][i]] += add[x];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    add[x] = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">new_node</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> v, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">  x = ++tot;</span><br><span class="line">  size[x] = <span class="number">1</span>;</span><br><span class="line">  par[x] = p;</span><br><span class="line">  ch[x][<span class="number">0</span>] = ch[x][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">  val[x] = v;</span><br><span class="line">  rev[x] = <span class="number">0</span>;</span><br><span class="line">  add[x] = <span class="number">0</span>;</span><br><span class="line">  mi[x] = val[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del_node</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!x) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (ch[x][<span class="number">0</span>]) del_node(ch[x][<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">if</span> (ch[x][<span class="number">1</span>]) del_node(ch[x][<span class="number">1</span>]);</span><br><span class="line">  <span class="comment">// tot--;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">  new_node(x, nums[m], p);</span><br><span class="line">  build(ch[x][<span class="number">0</span>], l, m, x);</span><br><span class="line">  build(ch[x][<span class="number">1</span>], m + <span class="number">1</span>, r, x);</span><br><span class="line">  push_up(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  tot = <span class="number">-1</span>;</span><br><span class="line">  new_node(root, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  size[root] = <span class="number">0</span>; mi[root] = INF;</span><br><span class="line">  new_node(root, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  new_node(ch[root][<span class="number">1</span>], <span class="number">0</span>, root);</span><br><span class="line">  build(rrclc, <span class="number">1</span>, N + <span class="number">1</span>, ch[root][<span class="number">1</span>]);</span><br><span class="line">  push_up(ch[root][<span class="number">1</span>]);</span><br><span class="line">  push_up(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> p = par[x], g = par[p]; <span class="comment">// if (p == 0) ?</span></span><br><span class="line">  push_down(p); push_down(x);</span><br><span class="line">  <span class="keyword">int</span> tx = ch[p][<span class="number">0</span>] == x, tp = ch[g][<span class="number">0</span>] == p;</span><br><span class="line"></span><br><span class="line">  ch[p][!tx] = ch[x][tx];</span><br><span class="line">  <span class="keyword">if</span> (ch[x][tx]) par[ch[x][tx]] = p;</span><br><span class="line"></span><br><span class="line">  ch[x][tx] = p; par[p] = x;</span><br><span class="line"></span><br><span class="line">  par[x] = g;</span><br><span class="line">  <span class="keyword">if</span> (g) ch[g][!tp] = x;</span><br><span class="line"></span><br><span class="line">  push_up(p); push_up(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> p = par[x];</span><br><span class="line">  <span class="keyword">while</span> (p != r) &#123;</span><br><span class="line">    <span class="keyword">int</span> g = par[p];</span><br><span class="line">    <span class="keyword">if</span> (g == r) rotate(x);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      push_down(g); push_down(p);</span><br><span class="line">      <span class="keyword">int</span> tx = ch[p][<span class="number">0</span>] == x, tp = ch[g][<span class="number">0</span>] == p;</span><br><span class="line">      <span class="keyword">if</span> (tx == tp) rotate(p);</span><br><span class="line">      <span class="keyword">else</span> rotate(x);</span><br><span class="line">      rotate(x);</span><br><span class="line">    &#125;</span><br><span class="line">    p = par[x];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (r == <span class="number">0</span>) root = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_kth</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  push_down(r);</span><br><span class="line">  <span class="keyword">int</span> ls = size[ch[r][<span class="number">0</span>]], rs = size[ch[r][<span class="number">1</span>]];</span><br><span class="line">  <span class="keyword">if</span> (ls == k) <span class="keyword">return</span> r;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; ls) <span class="keyword">return</span> get_kth(ch[r][<span class="number">0</span>], k);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">return</span> get_kth(ch[r][<span class="number">1</span>], k - ls - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// insert new node with val v after k</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">  splay(get_kth(root, k), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, k + <span class="number">1</span>), root);</span><br><span class="line">  <span class="keyword">int</span> x;</span><br><span class="line">  new_node(x, v, ch[root][<span class="number">1</span>]);</span><br><span class="line">  rrclc = x;</span><br><span class="line">  push_up(ch[root][<span class="number">1</span>]);</span><br><span class="line">  push_up(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// remove [l, r) from splay tree</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  splay(get_kth(root, l - <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, r), root);</span><br><span class="line">  <span class="keyword">int</span> cr = rrclc;</span><br><span class="line">  rrclc = <span class="number">0</span>; par[cr] = <span class="number">0</span>;</span><br><span class="line">  push_up(ch[root][<span class="number">1</span>]);</span><br><span class="line">  push_up(root);</span><br><span class="line">  <span class="keyword">return</span> cr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">lazy_add</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">  splay(get_kth(root, l - <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, r), root);</span><br><span class="line">  add[rrclc] += d;</span><br><span class="line">  mi[rrclc] += d;</span><br><span class="line">  val[rrclc] += d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  splay(get_kth(root, l - <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, r), root);</span><br><span class="line">  rev[rrclc] ^= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">revolve</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> m = r - l;</span><br><span class="line">  t %= m;</span><br><span class="line">  <span class="keyword">if</span> (t == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (t &lt; <span class="number">0</span>) t += m;</span><br><span class="line">  <span class="keyword">int</span> c1 = remove(r - t, r - <span class="number">1</span>), c2 = remove(l, r - t);</span><br><span class="line">  <span class="comment">// (r - 1) =&gt; (l)</span></span><br><span class="line">  splay(get_kth(root, l - <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, l + <span class="number">1</span>), root);</span><br><span class="line">  ch[rrclc][<span class="number">0</span>] = c1;</span><br><span class="line">  <span class="keyword">if</span> (c1) par[c1] = rrclc;</span><br><span class="line">  ch[rrclc][<span class="number">1</span>] = c2;</span><br><span class="line">  <span class="keyword">if</span> (c2) par[c2] = rrclc;</span><br><span class="line"></span><br><span class="line">  push_up(rrclc); push_up(ch[root][<span class="number">1</span>]); push_up(root);</span><br><span class="line">  <span class="comment">// reverse(l, r - t);</span></span><br><span class="line">  <span class="comment">// reverse(r - t, r);</span></span><br><span class="line">  <span class="comment">// reverse(l, r);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_min</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  splay(get_kth(root, l - <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">  splay(get_kth(root, r), root);</span><br><span class="line">  push_down(rrclc);</span><br><span class="line">  <span class="keyword">return</span> mi[rrclc];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">level</span><span class="params">(<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!r) <span class="keyword">return</span>;</span><br><span class="line">  <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">  q.push(r);</span><br><span class="line">  <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">    <span class="keyword">int</span> s = q.size();</span><br><span class="line">    <span class="keyword">while</span> (s--) &#123;</span><br><span class="line">      <span class="keyword">int</span> f = q.front(); q.pop();</span><br><span class="line">      <span class="keyword">if</span> (ch[f][<span class="number">0</span>]) q.push(ch[f][<span class="number">0</span>]);</span><br><span class="line">      <span class="keyword">if</span> (ch[f][<span class="number">1</span>]) q.push(ch[f][<span class="number">1</span>]);</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d "</span>, val[f]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inorder</span><span class="params">(<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!r) <span class="keyword">return</span>;</span><br><span class="line">  push_down(r);</span><br><span class="line">  inorder(ch[r][<span class="number">0</span>]);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d "</span>, val[r]);</span><br><span class="line">  inorder(ch[r][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// freopen("in.txt", "r", stdin);</span></span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, nums + i);</span><br><span class="line">  init();</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;M);</span><br><span class="line">  <span class="keyword">while</span> (M--) &#123;</span><br><span class="line">    <span class="keyword">char</span> cmd[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, cmd);</span><br><span class="line">    <span class="keyword">int</span> a, b, c;</span><br><span class="line">    <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'A'</span>) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">      lazy_add(a, b + <span class="number">1</span>, c);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'R'</span> &amp;&amp; cmd[<span class="number">3</span>] == <span class="string">'E'</span>) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b);</span><br><span class="line">      reverse(a, b + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'R'</span> &amp;&amp; cmd[<span class="number">3</span>] == <span class="string">'O'</span>) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">      revolve(a, b + <span class="number">1</span>, c);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'I'</span>) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b);</span><br><span class="line">      insert(a, b);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'D'</span>) &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a);</span><br><span class="line">      remove(a, a + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b);</span><br><span class="line">      <span class="comment">// inorder(root); printf("\n");</span></span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, get_min(a, b + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Treapï¼šBST+heapï¼Œæ¯ä¸ªç»“ç‚¹ç»´æŠ¤ä¸¤ä¸ªå±æ€§key,priorityï¼Œç»“ç‚¹çš„keyæ»¡è¶³bstï¼Œleft.key&lt;x.key&lt;right.keyï¼›priorityæ»¡è¶³heapçš„æ€§è´¨ï¼Œx.priority&lt;child.priorityï¼ˆè‹¥min heapï¼‰ã€‚ç›¸å½“äºæ˜¯é¦–å…ˆæŠŠæ‰€æœ‰ç»“ç‚¹æŒ‰ç…§priorityçš„å¤§å°ä»å°åˆ°å¤§æ’åºï¼Œç„¶åæŒ‰ç…§æ’åºåçš„é¡ºåºä¾æ¬¡æ’å…¥bstã€‚ç»“ç‚¹çš„priorityæ˜¯éšæœºçš„ï¼Œæ•´ä¸ªæŒ‰ç…§priorityæ’åºçš„åºåˆ—ç›¸å½“äºä¸€ä¸ªéšæœºçš„åºåˆ—ï¼Œå› nä¸ªå…³é”®å­—éšæœºæ’å…¥æ‰€æ„å»ºçš„bstçš„é«˜åº¦æœŸæœ›æ˜¯O(logn)ï¼Œtreapçš„é«˜åº¦çš„æœŸæœ›ä¹Ÿæ˜¯O(logn)ã€‚</p><p>ä¸€èˆ¬treapå¯ç”¨æ¥ç»´æŠ¤ä¸€ä¸ªåºåˆ—ï¼Œç»™å®šxï¼ŒæŸ¥è¯¢xåœ¨åºåˆ—æ’åºåçš„ä½ç½®ï¼›æˆ–ç»™å®šä½ç½®kï¼ŒæŸ¥è¯¢å…ƒç´ x</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">POJ <span class="number">1442</span> Black Box</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_M = <span class="number">30000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">30000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = ~<span class="number">0U</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> M, N;</span><br><span class="line"><span class="keyword">int</span> A[MAX_M], u[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">  Node *ch[<span class="number">2</span>], *par;</span><br><span class="line">  <span class="keyword">int</span> key, prio, size;</span><br><span class="line">  Node() &#123;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">set_ch</span><span class="params">(Node* c, <span class="keyword">bool</span> tc)</span> </span>&#123;</span><br><span class="line">    ch[tc] = c;</span><br><span class="line">    c-&gt;par = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">tn</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> par-&gt;ch[<span class="number">1</span>] == <span class="keyword">this</span>; &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    size = ch[<span class="number">0</span>]-&gt;size + ch[<span class="number">1</span>]-&gt;size + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125; Tnull, *null = &amp;Tnull;</span><br><span class="line"><span class="comment">// null's par and children may be modified</span></span><br><span class="line"></span><br><span class="line">Node mem[MAX_M], *ct = mem;</span><br><span class="line"></span><br><span class="line">Node* root;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  root = null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node* <span class="title">new_node</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  ct-&gt;key = k;</span><br><span class="line">  ct-&gt;prio = rand();</span><br><span class="line">  ct-&gt;size = <span class="number">1</span>;</span><br><span class="line">  ct-&gt;ch[<span class="number">0</span>] = ct-&gt;ch[<span class="number">1</span>] = null;</span><br><span class="line">  ct-&gt;par = null;</span><br><span class="line">  <span class="keyword">return</span> ct++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(Node* x)</span> </span>&#123;</span><br><span class="line">  Node *p = x-&gt;par, *g = p-&gt;par; <span class="comment">// p != null</span></span><br><span class="line">  <span class="keyword">bool</span> tx = x-&gt;tn(), tp = p-&gt;tn();</span><br><span class="line">  <span class="comment">// p-&gt;set_ch(x-&gt;ch[!tx], tx);</span></span><br><span class="line">  p-&gt;ch[tx] = x-&gt;ch[!tx];</span><br><span class="line">  <span class="keyword">if</span> (x-&gt;ch[!tx] != null) x-&gt;ch[!tx]-&gt;par = p;</span><br><span class="line">  x-&gt;set_ch(p, !tx);</span><br><span class="line">  p-&gt;up();</span><br><span class="line">  x-&gt;up();</span><br><span class="line">  x-&gt;par = g;</span><br><span class="line">  <span class="keyword">if</span> (g != null) g-&gt;ch[tp] = x;</span><br><span class="line">  <span class="keyword">else</span> root = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// min heap</span></span><br><span class="line"><span class="comment">// x's left child.key &lt; x.key</span></span><br><span class="line"><span class="comment">// right child.key &gt;= x.key</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  Node* x = new_node(k);</span><br><span class="line">  <span class="keyword">if</span> (root == null) &#123;</span><br><span class="line">    root = x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  Node* p = root;</span><br><span class="line">  <span class="keyword">while</span> (p != null) &#123;</span><br><span class="line">    <span class="keyword">if</span> (k &lt; p-&gt;key) &#123;</span><br><span class="line">      <span class="keyword">if</span> (p-&gt;ch[<span class="number">0</span>] == null) &#123;</span><br><span class="line">        p-&gt;set_ch(x, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      p = p-&gt;ch[<span class="number">0</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (p-&gt;ch[<span class="number">1</span>] == null) &#123;</span><br><span class="line">        p-&gt;set_ch(x, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      p = p-&gt;ch[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (p != null) &#123;</span><br><span class="line">    p-&gt;up();</span><br><span class="line">    p = p-&gt;par;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (x-&gt;par != null &amp;&amp; x-&gt;par-&gt;prio &gt; x-&gt;prio) &#123;</span><br><span class="line">    rotate(x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node* <span class="title">get_kth</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  Node* p = root;</span><br><span class="line">  <span class="keyword">while</span> (p != null) &#123;</span><br><span class="line">    <span class="keyword">int</span> ls = p-&gt;ch[<span class="number">0</span>]-&gt;size;</span><br><span class="line">    <span class="keyword">if</span> (ls == k) <span class="keyword">return</span> p;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; ls) p = p-&gt;ch[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      k = k - ls - <span class="number">1</span>;</span><br><span class="line">      p = p-&gt;ch[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inorder</span><span class="params">(Node* r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (r == null) <span class="keyword">return</span>;</span><br><span class="line">  inorder(r-&gt;ch[<span class="number">0</span>]);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d "</span>, r-&gt;key);</span><br><span class="line">  inorder(r-&gt;ch[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// freopen("in.txt", "r", stdin);</span></span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;M, &amp;N);</span><br><span class="line">  init();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= M; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, A + i);</span><br><span class="line">  <span class="comment">// for (int i = 1; i &lt;= M; i++) &#123;</span></span><br><span class="line">  <span class="comment">//   insert(A[i]);</span></span><br><span class="line">  <span class="comment">//   inorder(root); printf("\n");</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, u + i);</span><br><span class="line">  u[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = u[i - <span class="number">1</span>] + <span class="number">1</span>; j &lt;= u[i]; j++) &#123;</span><br><span class="line">      insert(A[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// inorder(root); printf("\n");</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, get_kth(i - <span class="number">1</span>)-&gt;key);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AVL Treeï¼šniceçš„ç»“æ„ï¼Œåœ¨æ’å…¥åˆ é™¤æ—¶è¿›è¡Œæ—‹è½¬æ“ä½œä¿è¯å·¦å³æ ‘é«˜å·®ä¸è¶…è¿‡1</p><p>æ—‹è½¬æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œæ€»ç»“ä¸€ä¸‹å³å·¦é«˜æ—¶å³æ—‹ï¼Œè‹¥å·¦å­æ ‘å³é«˜ï¼Œåˆ™å·¦å­æ ‘å…ˆå·¦æ—‹ï¼›å³é«˜æ—¶å·¦æ—‹ï¼Œè‹¥å³å­æ ‘å·¦é«˜ï¼Œåˆ™å³å­æ ‘å…ˆå³æ—‹ã€‚</p><p>AVLæ ‘ä¸Treapä¸€æ ·éƒ½æ˜¯ç”¨æ¥å®ç°BBSTï¼Œè¿˜æœ‰çº¢é»‘æ ‘ï¼Œä¸è¿‡å®ç°å°±æœ‰ç‚¹å¤æ‚äº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">SPOJ AVL Tree</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">200000</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AVLTree</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> key, val, size, height;</span><br><span class="line">    Node* ch[<span class="number">2</span>]; <span class="comment">// no par pointer =&gt; all rec</span></span><br><span class="line">    Node() : size(<span class="number">0</span>), height(<span class="number">0</span>) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      size = ch[<span class="number">0</span>]-&gt;size + ch[<span class="number">1</span>]-&gt;size + <span class="number">1</span>;</span><br><span class="line">      height = max(ch[<span class="number">0</span>]-&gt;height, ch[<span class="number">1</span>]-&gt;height) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">bf</span><span class="params">()</span> </span>&#123; <span class="comment">// left.height - right.height</span></span><br><span class="line">      <span class="keyword">return</span> ch[<span class="number">0</span>]-&gt;height - ch[<span class="number">1</span>]-&gt;height;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; Tnull, *null;</span><br><span class="line"></span><br><span class="line">  Node mem[MAX_N], *ct;</span><br><span class="line"></span><br><span class="line">  <span class="function">Node* <span class="title">new_node</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    ct-&gt;key = key;</span><br><span class="line">    ct-&gt;val = val;</span><br><span class="line">    ct-&gt;size = <span class="number">1</span>;</span><br><span class="line">    ct-&gt;height = <span class="number">1</span>;</span><br><span class="line">    ct-&gt;ch[<span class="number">0</span>] = ct-&gt;ch[<span class="number">1</span>] = null;</span><br><span class="line">    <span class="keyword">return</span> ct++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Node* root;</span><br><span class="line"></span><br><span class="line">  AVLTree() &#123;</span><br><span class="line">    null = &amp;Tnull;</span><br><span class="line">    ct = mem;</span><br><span class="line">    root = null;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == null) &#123;</span><br><span class="line">      root = new_node(key, val);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    put(root, key, val);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function">Node* <span class="title">put</span><span class="params">(Node* x, <span class="keyword">int</span> key, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == null) <span class="keyword">return</span> new_node(key, val);</span><br><span class="line">    <span class="keyword">if</span> (key &lt; x-&gt;key) &#123;</span><br><span class="line">      x-&gt;ch[<span class="number">0</span>] = put(x-&gt;ch[<span class="number">0</span>], key, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x-&gt;key &lt; key) &#123;</span><br><span class="line">      x-&gt;ch[<span class="number">1</span>] = put(x-&gt;ch[<span class="number">1</span>], key, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      x-&gt;val = val;</span><br><span class="line">      <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    x-&gt;up();</span><br><span class="line">    <span class="keyword">return</span> balance(x);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// t: 1 right rotation; 0 left rotation</span></span><br><span class="line">  <span class="function">Node* <span class="title">rotate</span><span class="params">(Node* x, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    Node* c = x-&gt;ch[!t];</span><br><span class="line">    x-&gt;ch[!t] = c-&gt;ch[t];</span><br><span class="line">    c-&gt;ch[t] = x;</span><br><span class="line">    x-&gt;up();</span><br><span class="line">    c-&gt;up();</span><br><span class="line">    <span class="keyword">if</span> (root == x) root = c;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function">Node* <span class="title">balance</span><span class="params">(Node* x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x-&gt;bf() &lt; <span class="number">-1</span>) &#123; <span class="comment">// x right higher</span></span><br><span class="line">      <span class="keyword">if</span> (x-&gt;ch[<span class="number">1</span>]-&gt;bf() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        x-&gt;ch[<span class="number">1</span>] = rotate(x-&gt;ch[<span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      x = rotate(x, <span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x-&gt;bf() &gt; <span class="number">1</span>) &#123; <span class="comment">// x left higher</span></span><br><span class="line">      <span class="keyword">if</span> (x-&gt;ch[<span class="number">0</span>]-&gt;bf() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        x-&gt;ch[<span class="number">0</span>] = rotate(x-&gt;ch[<span class="number">0</span>], <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      x = rotate(x, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">rank</span><span class="params">(Node* x, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == null) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (x-&gt;key == key) <span class="keyword">return</span> x-&gt;ch[<span class="number">0</span>]-&gt;size;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; x-&gt;key) &#123;</span><br><span class="line">      <span class="keyword">return</span> rank(x-&gt;ch[<span class="number">0</span>], key);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">int</span> r = rank(x-&gt;ch[<span class="number">1</span>], key);</span><br><span class="line">      <span class="keyword">return</span> (r == <span class="number">-1</span>) ? r : x-&gt;ch[<span class="number">0</span>]-&gt;size + <span class="number">1</span> + r;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">inorder</span><span class="params">(Node* x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == null) <span class="keyword">return</span>;</span><br><span class="line">    inorder(x-&gt;ch[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>, x-&gt;key);</span><br><span class="line">    inorder(x-&gt;ch[<span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// freopen("in.txt", "r", stdin);</span></span><br><span class="line">  AVLTree* t = <span class="keyword">new</span> AVLTree();</span><br><span class="line">  <span class="keyword">int</span> Q, type, n, r;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;Q);</span><br><span class="line">  <span class="keyword">while</span> (Q--) &#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;type, &amp;n);</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">1</span>) &#123;</span><br><span class="line">      t-&gt;insert(n, <span class="number">0</span>);</span><br><span class="line">      <span class="comment">// t-&gt;inorder(t-&gt;root); printf("\n");</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      r = t-&gt;rank(t-&gt;root, n);</span><br><span class="line">      <span class="keyword">if</span> (r == <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Data tidak ada\n"</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, r + <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å­¦ä¹ äº†ä¸€ä¸‹å„ç§BBSTï¼Œç®€å•æ€»ç»“ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;Splay Treeï¼šåŒºé—´æ“ä½œå¼ºæ— æ•Œâ€¦å¯¹[l,r)åŒºé—´çš„æ“ä½œï¼ŒæŠŠl-1ç»“ç‚¹splayåˆ°æ ‘æ ¹ï¼Œrç»“ç‚¹splayåˆ°æ ¹çš„å³ç»“ç‚¹ï¼Œåˆ™æ ¹çš„å³ç»“ç‚¹çš„å·¦å­æ ‘å°±æ˜¯åŒºé—´[l,r)ï¼Œç„¶åå¯¹è¿™æ£µå­æ ‘è¿›è¡Œæ“ä½œã€‚ä¸€ä¸ªsplayæ“ä½œçš„å‡æ‘Šå¤æ‚åº¦ä¸ºO(logn)ã€‚&lt;/p&gt;
&lt;p&gt;å¸¸è§æ“ä½œï¼š[l,r)åŒºé—´æ¯ä¸ªæ•°åŠ aï¼Œæ¯ä¸ªç»“ç‚¹ç»´æŠ¤ä¸€ä¸ªåŠ çš„æ•°å€¼çš„lazy_tag&lt;/p&gt;
&lt;p&gt;[l,r)åŒºé—´ç¿»è½¬ï¼Œæ¯ä¸ªç»“ç‚¹ç»´æŠ¤ä¸€ä¸ªè¡¨ç¤ºæ˜¯å¦ç¿»è½¬çš„æ ‡è®°&lt;/p&gt;
&lt;p&gt;åœ¨ç¬¬kä¸ªå…ƒç´ åæ’å…¥å…ƒç´ æˆ–åŒºé—´ï¼Œè‹¥æ˜¯åŒºé—´ï¼Œåˆ™è¦å…ˆå»ºæˆä¸€æ£µbstï¼ŒæŠŠç¬¬kä¸ªç»“ç‚¹splayåˆ°æ ‘æ ¹ï¼Œç¬¬k+1ä¸ªç»“ç‚¹splayåˆ°æ ¹çš„å³å­©å­ï¼ŒæŠŠéœ€è¦æ’å…¥çš„å­æ ‘æ¥åˆ°å³å­©å­çš„å·¦å­©å­ã€‚&lt;/p&gt;
&lt;p&gt;åˆ é™¤å…ƒç´ ï¼Œå¾—åˆ°åŒºé—´[l,r)åæ‘˜é™¤å­æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°ï¼šåˆšå¼€å§‹çœ‹æ—¶è¿˜çº³é—·ä¸ºä»€ä¹ˆåœ¨å®ç°æ—¶éƒ½è¦å…ˆåŠ æ ¹èŠ‚ç‚¹ä»¥åŠæ ¹èŠ‚ç‚¹çš„å³å­©å­ï¼Œç„¶åæŠŠæ•´ä¸ªåŒºé—´å»ºåœ¨æ ¹çš„å³å­©å­çš„å·¦å­æ ‘ä¸Šã€‚åæ¥æ‰æƒ³åˆ°å¯¹äºæ•´ä¸ªåŒºé—´[1,N+1)ï¼Œè¿™ç§åšæ³•ç›¸å½“äºåœ¨å¼€å§‹å’Œç»“å°¾å„æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¯¹æ•´ä¸ªåŒºé—´è¿›è¡Œæ“ä½œåˆ™éœ€è¦æŠŠè¿™ä¸¤ä¸ªç»“ç‚¹splayåˆ°æ ‘æ ¹å’Œæ ¹çš„å³å­©å­ï¼Œæ‰èƒ½å¾—åˆ°æ•´ä¸ªåŒºé—´ã€‚åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ å‰å’Œæœ€åä¸€ä¸ªå…ƒç´ åæ’å…¥éƒ½éœ€è¦å€ŸåŠ©è¿™ä¸¤ä¸ªç»“ç‚¹ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="å¹³è¡¡æ ‘" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B3%E8%A1%A1%E6%A0%91/"/>
    
      <category term="splay" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B3%E8%A1%A1%E6%A0%91/splay/"/>
    
      <category term="treap" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B3%E8%A1%A1%E6%A0%91/treap/"/>
    
      <category term="AVL" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B3%E8%A1%A1%E6%A0%91/AVL/"/>
    
    
      <category term="template" scheme="http://lvzhh.github.io/tags/template/"/>
    
      <category term="HDU" scheme="http://lvzhh.github.io/tags/HDU/"/>
    
      <category term="POJ" scheme="http://lvzhh.github.io/tags/POJ/"/>
    
      <category term="SPOJ" scheme="http://lvzhh.github.io/tags/SPOJ/"/>
    
  </entry>
  
  <entry>
    <title>Link Cut Tree</title>
    <link href="http://lvzhh.github.io/2018/05/Link-Cut-Tree/"/>
    <id>http://lvzhh.github.io/2018/05/Link-Cut-Tree/</id>
    <published>2018-05-24T02:08:41.000Z</published>
    <updated>2018-06-08T07:37:36.868Z</updated>
    
    <content type="html"><![CDATA[<p>LCTç”¨æ¥ç»´æŠ¤<strong>æœ‰æ ¹æ ‘çš„æ£®æ—</strong>ã€‚å¯¹ä»»æ„ç»“ç‚¹vï¼ŒPreferred Childï¼ˆPCï¼‰çš„å®šä¹‰ä¸ºï¼šå¦‚æœvæ²¡è¢«è®¿é—®è¿‡æˆ–è€…åˆšåˆšè®¿é—®åˆ°vï¼Œåˆ™PC[v] = nullï¼›å¦‚æœåˆšåˆšè®¿é—®åˆ°vçš„å­©å­ç»“ç‚¹uæ‰€åœ¨çš„å­æ ‘ï¼Œåˆ™PC[v] = uã€‚våˆ°å…¶preferred childï¼ˆå¦‚æœæœ‰ï¼‰çš„è¾¹ä¸ºpreferred edgeï¼Œpreferred edgeè¿æ¥èµ·æ¥å½¢æˆpreferred pathã€‚éœ€è¦è¡¨ç¤ºçš„æ ‘ï¼ˆä¹Ÿå°±æ˜¯ç›´è§‚ä¸Šçš„æ ‘ï¼‰ç§°ä¸ºrepresented treeã€‚LCTæŠŠæ¯ä¸€æ¡preferred pathç»´æŠ¤æˆä¸€ä¸ªæ ‘ï¼Œç§°ä¸ºAuxiliary Treeï¼Œæ‰€ç”¨çš„æ•°æ®ç»“æ„ä¸ºSplay Treeã€‚</p><p>æ ‘é“¾å‰–åˆ†æ˜¯Heavy Light Decompositionï¼ŒæŠŠä¸€ä¸ªç»“ç‚¹çš„å­©å­åˆ†ä¸ºé‡å’Œè½»ï¼Œæ˜¯æŒ‰ç…§æ ‘çš„ç»“æ„æ¥è¿›è¡Œåˆ’åˆ†ã€‚LCTæ˜¯Preferred Path Decompositionï¼Œæ˜¯æŒ‰ç…§å¯¹ç»“ç‚¹çš„è®¿é—®æ¥åˆ’åˆ†çš„ã€‚<br><a id="more"></a><br>å€Ÿç”¨MIT 6.851è¯¾ä»¶çš„å›¾ï¼š<br><img src="/2018/05/Link-Cut-Tree/0.png"></p><p>LCTçš„åŸºæœ¬æ“ä½œä¸ºaccess(v),make_root(v),link(v,w),cut(v,w)<br>in represented tree world:<br>access(v)æŠŠä»æ ¹ç»“ç‚¹åˆ°vçš„è·¯å¾„å˜ä¸ºpreferred path<br>make_root(v)æŠŠvå˜ä¸ºæ‰€åœ¨æœ‰æ ¹æ ‘çš„æ ¹ç»“ç‚¹<br>link(v,w)væ˜¯æ‰€åœ¨æ ‘çš„æ ¹ç»“ç‚¹ï¼Œè¿æ¥vå’Œw<br>cut(v,w)å»æ‰vå’Œwä¹‹é—´çš„è¾¹</p><p>in Aux tree world:<br>å®ç°ä¸Š è§ä»£ç &gt;,&lt;<br>æ¯ä¸ªæ“ä½œçš„å¤æ‚åº¦ä¸ºO(logn)ï¼Œè¯æ˜ï¼Ÿ</p><p>åœ¨æ¯ä¸€ä¸ªsplayæ ‘ä¸­ï¼Œç›¸å½“äºæ˜¯æŠŠç»“ç‚¹æ·±åº¦ä½œä¸ºé”®å€¼ï¼Œè¿›è¡Œä¸­åºéå†å¯å¾—åˆ°ä»æœ€æ¥è¿‘æ ¹çš„ç»“ç‚¹åˆ°æ·±åº¦æœ€å¤§çš„ç»“ç‚¹çš„è·¯å¾„ï¼Œå³ä¸€æ¡preferred pathæ‰€å¯¹åº”çš„ç»“ç‚¹ã€‚<br>access(v)æŠŠæ ¹ç»“ç‚¹åˆ°vçš„è·¯å¾„ä¸Šçš„æ‰€æœ‰ç»“ç‚¹æ”¾åœ¨ä¸€é¢—splayæ ‘ä¸­ï¼Œå¦‚æœç»´æŠ¤è·¯å¾„ä¸Šçš„ä¿¡æ¯ï¼Œåˆ™å¯åœ¨è¿™é¢—splayæ ‘çš„æ ¹ç»“ç‚¹è·å¾—ç»Ÿè®¡ä¿¡æ¯ã€‚<br>å¦‚æœè¦å¾—åˆ°uåˆ°vçš„è·¯å¾„ä¸Šçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¯ä»¥å…ˆmake_root(u)æŠŠuå˜ä¸ºæœ‰æ ¹æ ‘çš„æ ¹ç»“ç‚¹ï¼Œå†access(v)æŠŠuåˆ°vçš„è·¯å¾„ä¸Šçš„æ‰€æœ‰ç»“ç‚¹æ”¾åœ¨ä¸€ä¸ªsplayæ ‘ä¸­ã€‚<br>LCTæ˜¯æ¥è§£å†³åŠ¨æ€æ ‘é—®é¢˜çš„ï¼Œä¹Ÿå°±æ˜¯æ ‘çš„ç»“æ„åœ¨å‘ç”Ÿå˜åŒ–ï¼Œä¸æ–­æœ‰è¾¹çš„åŠ å…¥æˆ–è¾¹çš„æ¶ˆå»ã€‚åœ¨æ ‘çš„ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¡ä»¶ä¸‹æ ‘é“¾å‰–åˆ†ä¸å¤ªèƒ½åšã€‚</p><p>UOJ 3 é­”æ³•æ£®æ—<br>æŒ‰ç…§Açš„å€¼æ’åºæ‰€æœ‰çš„è¾¹ï¼ŒæŒ‰ç…§æ’å¥½çš„é¡ºåºä¾æ¬¡å‘å›¾ä¸­åŠ å…¥è¾¹ï¼Œå›¾ä¸­æ¯æ¡è¾¹çš„æƒå€¼ä¸ºæ­¤è¾¹çš„Bå€¼ã€‚åŠ è¾¹çš„è§„åˆ™ä¸ºï¼šè®¾è¾¹eçš„ä¸¤ç«¯ç‚¹æ˜¯(u,v)ï¼Œå¦‚æœu,vä¸è¿é€šåˆ™åŠ å…¥eï¼›å¦‚æœè¿é€šï¼Œåˆ™æŸ¥è¯¢uåˆ°vçš„è·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼bï¼Œå¦‚æœb&gt;e.Bï¼Œåˆ™å»æ‰u-&gt;vè·¯å¾„ä¸Šæœ€å¤§æƒå€¼çš„è¾¹ï¼ŒåŠ å…¥eï¼Œå¦åˆ™ä¸åŠ å…¥eã€‚</p><p>æ¯åŠ å…¥ä¸€æ¡è¾¹eï¼ŒæŸ¥è¯¢1å’ŒNæ˜¯å¦è¿é€šï¼Œå¦‚æœè¿é€šåˆ™æ±‚å‡º1åˆ°Nçš„è·¯å¾„ä¸Šæœ€å¤§æƒå€¼ï¼Œæ‰€æ±‚ç»“æœ1-&gt;Nçš„è·¯å¾„æ‰€å¯¹åº”çš„å€¼ï¼ˆå³æœ€å¤§Aå€¼+æœ€å¤§Bå€¼ï¼‰r=minï¼ˆe.A+1-&gt;Nè·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼ï¼‰ã€‚</p><p>è¯æ˜ï¼š<br>æŒ‰ç…§åŠ å…¥è¾¹çš„è§„åˆ™ï¼Œä¿è¯ä»»æ„ä¸€å¯¹ç»“ç‚¹ä¹‹é—´æœ€å¤šåªæœ‰ä¸€æ¡è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯åœ¨åŠ è¾¹çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªå›¾æ˜¯ä¸€ä¸ªæ£®æ—ã€‚</p><p>è¯æ˜åœ¨åŠ å…¥è¾¹eä¹‹åçš„æ£®æ—ä¸­1-&gt;Nçš„è·¯å¾„æ‰€å¯¹åº”çš„å€¼ä¸ºminï¼ˆe.A+1-&gt;Nè·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼ï¼‰ï¼š<br>å¦‚æœåŠ å…¥eä¹‹å‰1-&gt;Nä¸è¿é€šï¼ŒåŠ å…¥eä¹‹åè¿é€šåˆ™1-&gt;Nçš„è·¯å¾„ä¸Šå¿…åŒ…å«eï¼Œæ­¤æ¡è·¯å¾„æ‰€å¯¹åº”çš„å€¼ä¸ºï¼ˆe.A+1-&gt;Nè·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼ï¼‰ã€‚<br>å¦‚æœåŠ å…¥eä¹‹å‰1-&gt;Nå·²ç»è¿é€šï¼ŒåŠ å…¥eåï¼Œå¦‚æœ1-&gt;Nçš„è·¯å¾„ä¸ŠåŒ…å«eï¼Œåˆ™æ­¤æ¡è·¯å¾„æ‰€å¯¹åº”çš„å€¼ä¸ºï¼ˆe.A+1-&gt;Nè·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼ï¼‰ã€‚å¦‚æœ1-&gt;Nçš„è·¯å¾„ä¸Šä¸åŒ…å«eï¼Œåˆ™ï¼ˆe.A+1-&gt;Nè·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼ï¼‰&gt;=ï¼ˆe1.A+1-&gt;Nè·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼ï¼‰ï¼Œe1ä¸º1-&gt;Nçš„è·¯å¾„ä¸ŠAå€¼æœ€å¤§çš„è¾¹ï¼Œe1åœ¨eä¹‹å‰åŠ å…¥ï¼Œæœ‰e.A&gt;=e1.Aï¼Œåˆ™æ­¤æ¬¡æ›´æ–°ä¸å½±å“ç»“æœã€‚</p><p>ç²—ç•¥è¯æ˜åŠ è¾¹ç­–ç•¥çš„æ­£ç¡®æ€§ï¼š<br>ä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„æœ€å¤§æƒå€¼å°½å¯èƒ½å°ï¼Œè¿™æ ·æ‰èƒ½ä½¿1-&gt;Nè·¯å¾„ä¸Šçš„æœ€å¤§æƒå€¼å°½å¯èƒ½å‡å°‘ï¼Œæ‰èƒ½ä½¿1-&gt;Nçš„è·¯å¾„æ‰€å¯¹åº”çš„å€¼å°½å¯èƒ½å‡å°‘ã€‚</p><p>å®ç°ä¸Šï¼Œå› ä¸ºæ‰€ç»´æŠ¤çš„å€¼åœ¨é¡¶ç‚¹ä¸Šï¼ŒæŠŠä¸€æ¡è¾¹ä½œä¸ºä¸€ä¸ªé¡¶ç‚¹wï¼ŒåŠ å…¥è¾¹e(u,v)æ—¶åŠ å…¥w-&gt;uå’Œw-&gt;vä¸¤æ¡è¾¹ï¼Œå»è¾¹e(u,v)æ—¶ä¹Ÿæ˜¯å»ä¸¤æ¡ã€‚<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_M = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = ~<span class="number">0U</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> u, v, A, B;</span><br><span class="line">&#125; es[MAX_M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">comp</span><span class="params">(<span class="keyword">const</span> Edge&amp; e1, <span class="keyword">const</span> Edge&amp; e2)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> e1.A &lt; e2.A;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// union set</span></span><br><span class="line"><span class="keyword">int</span> par[MAX_N], rank[MAX_N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x == par[x]) <span class="keyword">return</span> x;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">return</span> par[x] = find(par[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">same</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> find(x) == find(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">  x = find(x);</span><br><span class="line">  y = find(y);</span><br><span class="line">  <span class="keyword">if</span> (rank[x] &lt; rank[y]) &#123;</span><br><span class="line">    par[x] = y;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    par[y] = x;</span><br><span class="line">    <span class="keyword">if</span> (rank[x] == rank[y]) rank[x]++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LCT</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">  Node *p, *ch[<span class="number">2</span>];</span><br><span class="line">  <span class="keyword">int</span> val, id, mx, mxid, rev, size;</span><br><span class="line">  Node() &#123;</span><br><span class="line">    val = <span class="number">0</span>;</span><br><span class="line">    rev = <span class="number">0</span>;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">d</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span> == p-&gt;ch[<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">setc</span><span class="params">(Node* c, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    ch[d] = c;</span><br><span class="line">    c-&gt;p = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">revIt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    rev ^= <span class="number">1</span>;</span><br><span class="line">    swap(ch[<span class="number">0</span>], ch[<span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">is_root</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p-&gt;ch[<span class="number">0</span>] != <span class="keyword">this</span> &amp;&amp; p-&gt;ch[<span class="number">1</span>] != <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mx = val;</span><br><span class="line">    mxid = id;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (ch[i]-&gt;mx &gt; mx) &#123;</span><br><span class="line">        mx = ch[i]-&gt;mx;</span><br><span class="line">        mxid = ch[i]-&gt;mxid;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    size = ch[<span class="number">0</span>]-&gt;size + ch[<span class="number">1</span>]-&gt;size + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (rev) &#123;</span><br><span class="line">      ch[<span class="number">0</span>]-&gt;revIt();</span><br><span class="line">      ch[<span class="number">1</span>]-&gt;revIt();</span><br><span class="line">      rev = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; Tnull, *null = &amp;Tnull;</span><br><span class="line">Node npool[MAX_N + MAX_M], *V[MAX_N + MAX_M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">    par[i] = i;</span><br><span class="line">    rank[i] = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N + M; i++) &#123;</span><br><span class="line">    Node* v = npool + i;</span><br><span class="line">    V[i] = v;</span><br><span class="line">    v-&gt;p = null;</span><br><span class="line">    v-&gt;ch[<span class="number">0</span>] = null;</span><br><span class="line">    v-&gt;ch[<span class="number">1</span>] = null;</span><br><span class="line">    v-&gt;val = i &gt; N ? es[i - N].B : <span class="number">0</span>; </span><br><span class="line">    v-&gt;id = i &gt; N ? i - N : <span class="number">0</span>;</span><br><span class="line">    v-&gt;mx = v-&gt;val;</span><br><span class="line">    v-&gt;mxid = v-&gt;id;</span><br><span class="line">    v-&gt;rev = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(Node* x)</span> </span>&#123;</span><br><span class="line">  Node* p = x-&gt;p;</span><br><span class="line">  <span class="keyword">int</span> d = x-&gt;d();</span><br><span class="line">  p-&gt;push_down();</span><br><span class="line">  x-&gt;push_down();</span><br><span class="line">  <span class="keyword">if</span> (p-&gt;is_root()) &#123;</span><br><span class="line">    x-&gt;p = p-&gt;p;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    p-&gt;p-&gt;setc(x, p-&gt;d());</span><br><span class="line">  &#125;</span><br><span class="line">  p-&gt;setc(x-&gt;ch[!d], d);</span><br><span class="line">  x-&gt;setc(p, !d);</span><br><span class="line">  p-&gt;push_up();</span><br><span class="line">  <span class="comment">// x-&gt;push_up();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(Node* x)</span> </span>&#123;</span><br><span class="line">  x-&gt;push_down();</span><br><span class="line">  <span class="keyword">while</span> (!x-&gt;is_root()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (x-&gt;p-&gt;is_root()) &#123;</span><br><span class="line">      rotate(x);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      x-&gt;d() == x-&gt;p-&gt;d() ? rotate(x-&gt;p) : rotate(x);</span><br><span class="line">      rotate(x);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  x-&gt;push_up();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">access</span><span class="params">(Node* v)</span> </span>&#123;</span><br><span class="line">  Node* t = null;</span><br><span class="line">  <span class="keyword">while</span> (v != null) &#123;</span><br><span class="line">    splay(v);</span><br><span class="line">    v-&gt;ch[<span class="number">1</span>] = t;</span><br><span class="line">    v-&gt;push_up();</span><br><span class="line">    t = v;</span><br><span class="line">    v = v-&gt;p;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_root</span><span class="params">(Node* v)</span> </span>&#123;</span><br><span class="line">  access(v);</span><br><span class="line">  splay(v);</span><br><span class="line">  v-&gt;revIt();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">link</span><span class="params">(Node* v, Node* u)</span> </span>&#123;</span><br><span class="line">  make_root(v);</span><br><span class="line">  v-&gt;p = u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cut</span><span class="params">(Node* v, Node* u)</span> </span>&#123;</span><br><span class="line">  make_root(v);</span><br><span class="line">  access(u);</span><br><span class="line">  splay(u);</span><br><span class="line">  v-&gt;p = null;</span><br><span class="line">  u-&gt;ch[<span class="number">0</span>] = null;</span><br><span class="line">  u-&gt;push_up();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node* <span class="title">query</span><span class="params">(Node* v, Node* u)</span> </span>&#123;</span><br><span class="line">  make_root(v);</span><br><span class="line">  access(u);</span><br><span class="line">  splay(u);</span><br><span class="line">  <span class="keyword">return</span> u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;N, &amp;M);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= M; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> u, v, A, B;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>, &amp;u, &amp;v, &amp;A, &amp;B);</span><br><span class="line">    es[i] = (Edge)&#123;u, v, A, B&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  sort(es + <span class="number">1</span>, es + M + <span class="number">1</span>, comp);</span><br><span class="line">  init();</span><br><span class="line">  <span class="keyword">int</span> res = INF;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= M; i++) &#123;</span><br><span class="line">    Edge&amp; e = es[i];</span><br><span class="line">    <span class="keyword">int</span> u = e.u, v = e.v;</span><br><span class="line">    <span class="keyword">if</span> (same(u, v)) &#123;</span><br><span class="line">      Node* q = query(V[u], V[v]);</span><br><span class="line">      <span class="keyword">if</span> (q-&gt;mx &gt; e.B) &#123;</span><br><span class="line">        <span class="comment">// cause q-&gt;mxid maybe changed in cut and link ops</span></span><br><span class="line">        <span class="keyword">int</span> mxid = q-&gt;mxid;</span><br><span class="line">        Edge&amp; e1 = es[mxid];</span><br><span class="line">        <span class="keyword">int</span> u1 = e1.u, v1 = e1.v;</span><br><span class="line">        cut(V[u1], V[N + mxid]);</span><br><span class="line">        cut(V[v1], V[N + mxid]);</span><br><span class="line">        link(V[u], V[N + i]);</span><br><span class="line">        link(V[v], V[N + i]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      unite(u, v);</span><br><span class="line">      link(V[u], V[N + i]);</span><br><span class="line">      link(V[v], V[N + i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (same(<span class="number">1</span>, N)) &#123;</span><br><span class="line">      <span class="comment">// query path from 1 to N</span></span><br><span class="line">      res = min(res, e.A + query(V[<span class="number">1</span>], V[N])-&gt;mx);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res == INF ? <span class="number">-1</span> : res);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>BZOJ 2049 Cave æ´ç©´å‹˜æµ‹<br>LCTæ¨¡æ¿é¢˜<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">    Result: Accepted</span><br><span class="line">    Time:<span class="number">1632</span> ms</span><br><span class="line">    Memory:<span class="number">1488</span> kb</span><br><span class="line">****************************************************************/</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">10000</span> + <span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">  Node *p, *ch[<span class="number">2</span>];</span><br><span class="line">  <span class="keyword">int</span> rev;</span><br><span class="line">  Node() &#123;</span><br><span class="line">    rev = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">d</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span> == p-&gt;ch[<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">setc</span><span class="params">(Node* c, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    ch[d] = c;</span><br><span class="line">    c-&gt;p = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">revIt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    rev ^= <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">is_root</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (rev) &#123;</span><br><span class="line">      <span class="keyword">this</span>-&gt;revIt();</span><br><span class="line">      ch[<span class="number">0</span>]-&gt;revIt();</span><br><span class="line">      ch[<span class="number">1</span>]-&gt;revIt();</span><br><span class="line">      swap(ch[<span class="number">0</span>], ch[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; Tnull, *null = &amp;Tnull;</span><br><span class="line">Node mem[MAX_N], *C = mem, *V[MAX_N];</span><br><span class="line"><span class="keyword">bool</span> Node::is_root() &#123;</span><br><span class="line">  <span class="comment">// return p-&gt;ch[0] != this &amp;&amp; p-&gt;ch[1] != this;</span></span><br><span class="line">  <span class="keyword">return</span> p == null || (p-&gt;ch[<span class="number">0</span>] != <span class="keyword">this</span> &amp;&amp; p-&gt;ch[<span class="number">1</span>] != <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Node* <span class="title">new_node</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  C-&gt;p = null;</span><br><span class="line">  C-&gt;ch[<span class="number">0</span>] = null;</span><br><span class="line">  C-&gt;ch[<span class="number">1</span>] = null;</span><br><span class="line">  C-&gt;rev = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> C++;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    V[i] = new_node();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(Node* x)</span> </span>&#123;</span><br><span class="line">  Node* p = x-&gt;p;</span><br><span class="line">  p-&gt;push_down();</span><br><span class="line">  x-&gt;push_down();</span><br><span class="line">  <span class="keyword">int</span> d = x-&gt;d();</span><br><span class="line">  <span class="keyword">if</span> (p-&gt;is_root()) &#123;</span><br><span class="line">    x-&gt;p = p-&gt;p;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    p-&gt;p-&gt;setc(x, p-&gt;d());</span><br><span class="line">  &#125;</span><br><span class="line">  p-&gt;setc(x-&gt;ch[!d], d);</span><br><span class="line">  x-&gt;setc(p, !d);</span><br><span class="line">  p-&gt;push_up();</span><br><span class="line">  <span class="comment">// x-&gt;push_up();</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(Node* x)</span> </span>&#123;</span><br><span class="line">  x-&gt;push_down();</span><br><span class="line">  <span class="keyword">while</span> (!x-&gt;is_root()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (x-&gt;p-&gt;is_root()) &#123;</span><br><span class="line">      rotate(x);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      x-&gt;d() == x-&gt;p-&gt;d() ? rotate(x-&gt;p) : rotate(x);</span><br><span class="line">      rotate(x);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  x-&gt;push_up();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">access</span><span class="params">(Node* v)</span> </span>&#123;</span><br><span class="line">  Node* t = null;</span><br><span class="line">  <span class="keyword">while</span> (v != null) &#123;</span><br><span class="line">    splay(v);</span><br><span class="line">    v-&gt;ch[<span class="number">1</span>] = t;</span><br><span class="line">    v-&gt;push_up();</span><br><span class="line">    t = v;</span><br><span class="line">    v = v-&gt;p;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_root</span><span class="params">(Node* v)</span> </span>&#123;</span><br><span class="line">  access(v);</span><br><span class="line">  splay(v);</span><br><span class="line">  v-&gt;revIt();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function">Node* <span class="title">find_root</span><span class="params">(Node* v)</span> </span>&#123;</span><br><span class="line">  access(v);</span><br><span class="line">  splay(v);</span><br><span class="line">  Node* r = v;</span><br><span class="line">  <span class="keyword">while</span> (r-&gt;ch[<span class="number">0</span>] != null) r = r-&gt;ch[<span class="number">0</span>];</span><br><span class="line">  splay(r);</span><br><span class="line">  <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">link</span><span class="params">(Node* v, Node* w)</span> </span>&#123;</span><br><span class="line">  make_root(v);</span><br><span class="line">  <span class="comment">// if (find_root(w) == v) return;</span></span><br><span class="line">  v-&gt;p = w;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cut</span><span class="params">(Node* v, Node* u)</span> </span>&#123;</span><br><span class="line">  make_root(v);</span><br><span class="line">  <span class="comment">// if (find_root(u) != v) return;</span></span><br><span class="line">  access(u);</span><br><span class="line">  splay(u);</span><br><span class="line">  v-&gt;p = null;</span><br><span class="line">  u-&gt;ch[<span class="number">0</span>] = null;</span><br><span class="line">  u-&gt;push_up();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">query</span><span class="params">(Node* v, Node* u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> find_root(v) == find_root(u);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m);</span><br><span class="line">  build();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">    <span class="keyword">char</span> cmd[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> u, v;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s %d %d"</span>, cmd, &amp;u, &amp;v);</span><br><span class="line">    <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'Q'</span>) &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, query(V[u], V[v]) ? <span class="string">"Yes"</span> : <span class="string">"No"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">'C'</span>) &#123;</span><br><span class="line">      <span class="comment">// if u v already connect</span></span><br><span class="line">      link(V[u], V[v]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// if u v don't connect</span></span><br><span class="line">      cut(V[u], V[v]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;LCTç”¨æ¥ç»´æŠ¤&lt;strong&gt;æœ‰æ ¹æ ‘çš„æ£®æ—&lt;/strong&gt;ã€‚å¯¹ä»»æ„ç»“ç‚¹vï¼ŒPreferred Childï¼ˆPCï¼‰çš„å®šä¹‰ä¸ºï¼šå¦‚æœvæ²¡è¢«è®¿é—®è¿‡æˆ–è€…åˆšåˆšè®¿é—®åˆ°vï¼Œåˆ™PC[v] = nullï¼›å¦‚æœåˆšåˆšè®¿é—®åˆ°vçš„å­©å­ç»“ç‚¹uæ‰€åœ¨çš„å­æ ‘ï¼Œåˆ™PC[v] = uã€‚våˆ°å…¶preferred childï¼ˆå¦‚æœæœ‰ï¼‰çš„è¾¹ä¸ºpreferred edgeï¼Œpreferred edgeè¿æ¥èµ·æ¥å½¢æˆpreferred pathã€‚éœ€è¦è¡¨ç¤ºçš„æ ‘ï¼ˆä¹Ÿå°±æ˜¯ç›´è§‚ä¸Šçš„æ ‘ï¼‰ç§°ä¸ºrepresented treeã€‚LCTæŠŠæ¯ä¸€æ¡preferred pathç»´æŠ¤æˆä¸€ä¸ªæ ‘ï¼Œç§°ä¸ºAuxiliary Treeï¼Œæ‰€ç”¨çš„æ•°æ®ç»“æ„ä¸ºSplay Treeã€‚&lt;/p&gt;
&lt;p&gt;æ ‘é“¾å‰–åˆ†æ˜¯Heavy Light Decompositionï¼ŒæŠŠä¸€ä¸ªç»“ç‚¹çš„å­©å­åˆ†ä¸ºé‡å’Œè½»ï¼Œæ˜¯æŒ‰ç…§æ ‘çš„ç»“æ„æ¥è¿›è¡Œåˆ’åˆ†ã€‚LCTæ˜¯Preferred Path Decompositionï¼Œæ˜¯æŒ‰ç…§å¯¹ç»“ç‚¹çš„è®¿é—®æ¥åˆ’åˆ†çš„ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å›¾è®º" scheme="http://lvzhh.github.io/categories/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="æ ‘" scheme="http://lvzhh.github.io/categories/%E5%9B%BE%E8%AE%BA/%E6%A0%91/"/>
    
      <category term="link cut tree" scheme="http://lvzhh.github.io/categories/%E5%9B%BE%E8%AE%BA/%E6%A0%91/link-cut-tree/"/>
    
    
      <category term="template" scheme="http://lvzhh.github.io/tags/template/"/>
    
      <category term="UOJ" scheme="http://lvzhh.github.io/tags/UOJ/"/>
    
      <category term="BZOJ" scheme="http://lvzhh.github.io/tags/BZOJ/"/>
    
  </entry>
  
  <entry>
    <title>UVA 10820 Send a Table</title>
    <link href="http://lvzhh.github.io/2018/05/UVA-10820-Send-a-Table/"/>
    <id>http://lvzhh.github.io/2018/05/UVA-10820-Send-a-Table/</id>
    <published>2018-05-22T13:06:31.000Z</published>
    <updated>2018-05-24T08:50:38.594Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰€æœ‰å¯èƒ½çš„æ•°å¯¹æ•°é‡ä¸ºNÃ—N<br>æ‰€æ±‚çš„ï¼ˆxï¼Œyï¼‰ä¸€å®šæ»¡è¶³xï¼Œyäº’ç´ ï¼Œå¦åˆ™è®¾å…¬çº¦æ•°ä¸ºtï¼Œï¼ˆxï¼Œyï¼‰å¯ç”±ï¼ˆx/tï¼Œy/tï¼‰å¾—åˆ°<br>è‹¥ï¼ˆxï¼Œyï¼‰äº’ç´ ï¼Œé‚£ä¹ˆï¼ˆyï¼Œxï¼‰ä¹Ÿäº’ç´ <br>è‹¥èƒ½æ±‚å‡ºæ»¡è¶³1&lt;=x&lt;=Nï¼Œ1&lt;=y&lt;=xçš„äº’ç´ çš„ï¼ˆxï¼Œyï¼‰ï¼Œé‚£ä¹ˆç»è¿‡å¯¹ç§°å³å¯å¾—åˆ°æ‰€æœ‰çš„æ•°å¯¹ï¼ˆå¯ä»NÃ—Nçš„äºŒç»´å›¾ä¸Šæ¥ç†è§£ï¼‰</p><p>æ±‚phiå€¼æ—¶æ³¨æ„é¿å…æº¢å‡º<br><a id="more"></a><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="keyword">int</span> phi[MAX_N + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">euler_function</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) phi[i] = i;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= N; i++) &#123;</span><br><span class="line">    <span class="comment">// phi[i] == i, then i is prime</span></span><br><span class="line">    <span class="keyword">if</span> (phi[i] != i) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= N; j += i) &#123;</span><br><span class="line">      <span class="comment">// first / i then * (i - 1)</span></span><br><span class="line">      <span class="comment">// ensures phi[j] &lt;= j and no overflow</span></span><br><span class="line">      phi[j] = phi[j] / i * (i - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  euler_function(MAX_N);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N) &amp;&amp; N) &#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) res += phi[i];</span><br><span class="line">    res = res * <span class="number">2</span> - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰€æœ‰å¯èƒ½çš„æ•°å¯¹æ•°é‡ä¸ºNÃ—N&lt;br&gt;
æ‰€æ±‚çš„ï¼ˆxï¼Œyï¼‰ä¸€å®šæ»¡è¶³xï¼Œyäº’ç´ ï¼Œå¦åˆ™è®¾å…¬çº¦æ•°ä¸ºtï¼Œï¼ˆxï¼Œyï¼‰å¯ç”±ï¼ˆx/tï¼Œy/tï¼‰å¾—åˆ°&lt;br&gt;
è‹¥ï¼ˆxï¼Œyï¼‰äº’ç´ ï¼Œé‚£ä¹ˆï¼ˆyï¼Œxï¼‰ä¹Ÿäº’ç´ &lt;br&gt;
è‹¥èƒ½æ±‚å‡ºæ»¡è¶³1&amp;lt;=x&amp;lt;=Nï¼Œ1&amp;lt;=y&amp;lt;=xçš„äº’ç´ çš„ï¼ˆxï¼Œyï¼‰ï¼Œé‚£ä¹ˆç»è¿‡å¯¹ç§°å³å¯å¾—åˆ°æ‰€æœ‰çš„æ•°å¯¹ï¼ˆå¯ä»NÃ—Nçš„äºŒç»´å›¾ä¸Šæ¥ç†è§£ï¼‰&lt;/p&gt;
&lt;p&gt;æ±‚phiå€¼æ—¶æ³¨æ„é¿å…æº¢å‡º&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°å­¦" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="æ¬§æ‹‰å‡½æ•°" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0/"/>
    
    
      <category term="template" scheme="http://lvzhh.github.io/tags/template/"/>
    
      <category term="UVA" scheme="http://lvzhh.github.io/tags/UVA/"/>
    
  </entry>
  
  <entry>
    <title>HDU 1402. A * B Problem Plus(FFT)</title>
    <link href="http://lvzhh.github.io/2018/05/HDU-1402-A-B-Problem-Plus-FFT/"/>
    <id>http://lvzhh.github.io/2018/05/HDU-1402-A-B-Problem-Plus-FFT/</id>
    <published>2018-05-22T13:01:55.000Z</published>
    <updated>2018-05-24T08:52:39.503Z</updated>
    
    <content type="html"><![CDATA[<p>é€’å½’ç‰ˆæœ¬çš„FFTè¿˜æ˜¯å¥½å†™â€¦<br>è¾“å‡ºç»“æœæ—¶ï¼Œæ³¨æ„ç‰¹æ®Šæƒ…å†µ0*0=0<br><a id="more"></a><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;complex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">complex</span>&lt;<span class="keyword">double</span>&gt; Comp;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">const</span> Comp <span class="title">I</span><span class="params">(<span class="number">0</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">50000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> M_PI</span></span><br><span class="line">  <span class="meta">#<span class="meta-keyword">define</span> M_PI 3.14159265358979323846</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">Comp tmp[<span class="number">1</span> &lt;&lt; <span class="number">17</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFT</span><span class="params">(Comp* a, <span class="keyword">int</span> n, <span class="keyword">int</span> rev)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    tmp[i] = a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &amp; <span class="number">1</span>)</span><br><span class="line">      a[n / <span class="number">2</span> + i / <span class="number">2</span>] = tmp[i];</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      a[i / <span class="number">2</span>] = tmp[i];</span><br><span class="line">  &#125;</span><br><span class="line">  Comp *a0 = a, *a1 = a + n / <span class="number">2</span>;</span><br><span class="line">  DFT(a0, n / <span class="number">2</span>, rev);</span><br><span class="line">  DFT(a1, n / <span class="number">2</span>, rev);</span><br><span class="line">  </span><br><span class="line">  <span class="function">Comp <span class="title">cur</span><span class="params">(<span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">  <span class="keyword">double</span> alpha = <span class="number">2</span> * M_PI / n * rev;</span><br><span class="line">  Comp step = <span class="built_in">exp</span>(I * alpha);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n / <span class="number">2</span>; k++) &#123;</span><br><span class="line">    tmp[k] = a0[k] + cur * a1[k];</span><br><span class="line">    tmp[k + n / <span class="number">2</span>] = a0[k] - cur * a1[k];</span><br><span class="line">    cur *= step;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    a[i] = tmp[i];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> A[MAX_N], B[MAX_N];</span><br><span class="line">Comp a[<span class="number">1</span> &lt;&lt; <span class="number">17</span>] = &#123; &#125;, b[<span class="number">1</span> &lt;&lt; <span class="number">17</span>] = &#123; &#125;;</span><br><span class="line"><span class="keyword">int</span> res[<span class="number">1</span> &lt;&lt; <span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%s %s"</span>, A, B) != EOF) &#123;</span><br><span class="line">    <span class="keyword">int</span> lA = <span class="built_in">strlen</span>(A), lB = <span class="built_in">strlen</span>(B);</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &lt; lA + lB) n &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      a[i] = <span class="number">0</span>;</span><br><span class="line">      b[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lA; i++) &#123;</span><br><span class="line">      a[i] = A[lA - <span class="number">1</span> - i] - <span class="string">'0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lB; i++) &#123;</span><br><span class="line">      b[i] = B[lB - <span class="number">1</span> - i] - <span class="string">'0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// FFT</span></span><br><span class="line">    DFT(a, n, <span class="number">1</span>);</span><br><span class="line">    DFT(b, n, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      a[i] *= b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    DFT(a, n, <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      a[i] /= n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// res processing</span></span><br><span class="line">    <span class="built_in">memset</span>(res, <span class="number">0</span>, <span class="keyword">sizeof</span>(res));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i + <span class="number">1</span> &lt; n; i++) &#123;</span><br><span class="line">      res[i] += <span class="keyword">int</span>(a[i].real() + <span class="number">0.5</span>);</span><br><span class="line">      res[i + <span class="number">1</span>] = res[i] / <span class="number">10</span>;</span><br><span class="line">      res[i] %= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> k = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (res[k] == <span class="number">0</span>) k--;</span><br><span class="line">    <span class="keyword">if</span> (k &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"0"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (k &gt;= <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"%d"</span>, res[k--]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Referenceï¼šhttp://blog.miskcoo.com/2015/04/polynomial-multiplication-and-fast-fourier-transform#i-12</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€’å½’ç‰ˆæœ¬çš„FFTè¿˜æ˜¯å¥½å†™â€¦&lt;br&gt;
è¾“å‡ºç»“æœæ—¶ï¼Œæ³¨æ„ç‰¹æ®Šæƒ…å†µ0*0=0&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°å­¦" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="å¿«é€Ÿå‚…é‡Œå¶å˜æ¢" scheme="http://lvzhh.github.io/categories/%E6%95%B0%E5%AD%A6/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/"/>
    
    
      <category term="template" scheme="http://lvzhh.github.io/tags/template/"/>
    
      <category term="HDU" scheme="http://lvzhh.github.io/tags/HDU/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://lvzhh.github.io/2018/05/hello-world/"/>
    <id>http://lvzhh.github.io/2018/05/hello-world/</id>
    <published>2018-05-21T13:13:23.000Z</published>
    <updated>2018-05-24T09:10:27.690Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="quick-start">Quick Start</h2><h3 id="create-a-new-post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="run-server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="generate-static-files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="deploy-to-remote-sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;quick-start&quot;&gt;Quick Start&lt;/h2&gt;
&lt;h3 id=&quot;create-a-new-post&quot;&gt;Create a new post&lt;/h3&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
